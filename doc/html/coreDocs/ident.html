
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Ident Module &#8212; Eggdrop 1.9.0 documentation</title>
    <link rel="stylesheet" href="../_static/eggdrop.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="IRC Module" href="irc.html" />
    <link rel="prev" title="Filesys Module" href="filesys.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
          <p class="logo"><a href="../index.html">
            <img class="logo" src="../_static/eggman.png.gif" alt="Logo"/>
          </a></p>
        <div class="headertitle"><a
          href="../index.html">Eggdrop 1.9.0 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="filesys.html" title="Filesys Module"
             accesskey="P">previous</a> |
          <a href="irc.html" title="IRC Module"
             accesskey="N">next</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="sidebar">
          
          <h3>Table of Contents</h3>
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../installAndSetup/readme.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installAndSetup/install.html">Installing Eggdrop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installAndSetup/faq.html">Frequently Asked Questions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mainDocs/about.html">About Eggdrop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mainDocs/features.html">Eggdrop Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mainDocs/users.html">Users and Flags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mainDocs/partyline.html">The Party Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mainDocs/bans.html">Bans, Invites, and Exempts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mainDocs/botnet.html">Botnet Sharing and Linking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mainDocs/patch.html">Patch How-To</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mainDocs/tcl-commands.html">Eggdrop Tcl Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mainDocs/ipv6.html">IPv6 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mainDocs/tls.html">TLS support</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="core.html">Eggdrop Core Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Eggdrop Module Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="assoc.html">Assoc Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="blowfish.html">Blowfish Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="channels.html">Channels Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="compress.html">Compress Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="console.html">Console Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="ctcp.html">CTCP Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="dns.html">DNS Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="filesys.html">Filesys Module</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Ident Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="irc.html">IRC Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="notes.html">Notes Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="seen.html">Seen Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Server Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="share.html">Share Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="transfer.html">Transfer Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="uptime.html">Uptime Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="woobie.html">Woobie Module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendices/known-probs.html">Known Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/tricks.html">Eggdrop Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/text-sub.html">Textfile Substitutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/weird-msgs.html">Weird Messages That Get Logged</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/first-script.html">Your First Eggdrop Script</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="../search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
            </form>
          </div>

        </div>
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>Last revised: June 27, 2019</p>
<div class="section" id="ident">
<span id="ident-module"></span><h1>Ident Module<a class="headerlink" href="#ident" title="Permalink to this headline">¶</a></h1>
<p>This module adds Eggdrop support for the externally-provided oident
service, or alternatively the ability for Eggdrop to act as its own ident
daemon.</p>
<p>Traditionally, an IRC server queries port 113 on an irc client’s host to
determine the ident for the client. The client’s host normally replies with
the username of the account. If the host machine is running oident as its
ident service, Eggdrop can now interact with oident to instead reply with
a custom ident specified by Eggdrop (oidentd is an external service not
specific to Eggdrop nor maintained by Eggheads developers, thus no support
for it can be given).</p>
<p>Alternatively, this module can also allow Eggdrop to act as its own ident
daemon, answering queries from the IRC server directly. While this option
may be of use to a very specific group of people, it requires additional
external configuration via root access. Because most modern OSs do not allow
user-level programs to bind to port 113, required by this option, a user must
either:</p>
<ul>
<li><p class="first">Allow Eggdrop to bind to ports &lt;1024 via the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">setcap</span> <span class="s2">&quot;cap_net_bind_service=+ep&quot;</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">eggdrop</span>
</pre></div>
</div>
<p>Warning: this will allow Eggdrop to <em>any</em> port below 1024, potentially
allowing a user to impersonate a standard system service with Eggdrop</p>
</li>
<li><p class="first">Use iptables to re-route ident queries destined for port 113 to a
&gt;1024 port that Eggdrop can bind to, for example by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">iptables</span> <span class="o">-</span><span class="n">t</span> <span class="n">nat</span> <span class="o">-</span><span class="n">A</span> <span class="n">PREROUTING</span> <span class="o">-</span><span class="n">i</span> <span class="n">eth0</span> <span class="o">-</span><span class="n">p</span> <span class="n">tcp</span> <span class="o">--</span><span class="n">dport</span> \
<span class="mi">113</span> <span class="o">-</span><span class="n">j</span> <span class="n">REDIRECT</span> <span class="o">--</span><span class="n">to</span><span class="o">-</span><span class="n">port</span> <span class="o">&lt;</span><span class="n">ident</span> <span class="n">port</span> <span class="ow">in</span> <span class="n">config</span><span class="o">&gt;</span><span class="s1">&#39;</span>
</pre></div>
</div>
</li>
</ul>
<p>Additionally, using Eggdrop as a built-in ident daemon can cause issues
when running multiple bots from the same account. The ident server is only
activated and bound to the configured ident port while Eggdrop is connecting
to an IRC server, but only one Eggdrop can bind to port 113 at a time. If
multiple bots were to start at the same time, such as after a netsplit or host
reboot, only one bot can bind to port 113 at a time, creating ident conflicts.
Thus, this option is best suited for single-bot environments.</p>
<dl class="docutils">
<dt>This module requires:</dt>
<dd><ul class="first last simple">
<li>oident to be running on your shell host, configured to allow user
spoofing, for the oidentd method.</li>
</ul>
</dd>
</dl>
<p>Put this line into your Eggdrop configuration file to load the ident
module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">loadmodule</span> <span class="n">ident</span>
</pre></div>
</div>
<p>There are also some variables you can set in your config file:</p>
<blockquote>
<div><dl class="docutils">
<dt>set ident-method 0</dt>
<dd><dl class="first last docutils">
<dt>This sets which ident method you wish to use:</dt>
<dd><dl class="first last docutils">
<dt>0 = oidentd / Your bot will overwrite $HOME/.oidentd.conf right before</dt>
<dd>opening the socket to the IRC server with the global reply.</dd>
<dt>1 = Builtin / Your bot will automatically turn its builtin identd on and</dt>
<dd>off when needed so it shouldn’t conflict with other identds that do the
same. Ident port 113 is normally restricted to privileged processes on
UNIX systems.</dd>
</dl>
</dd>
</dl>
</dd>
<dt>set ident-port 113</dt>
<dd>This sets the port which port Eggdrop will attempt to bind to for option 1
of ident-method. Most OSs do not allow non-privileged programs such as
Eggdrop to bind to ports &lt;1024; please read the beginning of this document
for potential ways to implement this setting.</dd>
</dl>
</div></blockquote>
<p>Copyright (C) 2019 - 2020 Eggheads Development Team</p>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="filesys.html" title="Filesys Module"
              >previous</a> |
            <a href="irc.html" title="IRC Module"
              >next</a>
          </div>
          <div role="note" aria-label="source link">
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Eggheads.
      Last updated on Jan 20, 2020.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>