
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Eggdrop Tcl Commands &mdash; Eggdrop 1.8.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/eggdrop.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.8.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Eggdrop 1.8.1 documentation" href="../index.html" />
    <link rel="up" title="&lt;no title&gt;" href="index.html" />
    <link rel="next" title="IPv6 support" href="ipv6.html" />
    <link rel="prev" title="Patch How-To" href="patch.html" /> 
  </head>
  <body role="document">
    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="../index.html">
            <img class="logo" src="../_static/eggman.png.gif" alt="Logo"/>
          </a></p>
        <div class="headertitle"><a
          href="../index.html">Eggdrop 1.8.1 documentation</a></div>
        <div class="rel">
          <a href="patch.html" title="Patch How-To"
             accesskey="P">previous</a> |
          <a href="ipv6.html" title="IPv6 support"
             accesskey="N">next</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>Eggdrop Tcl Commands
Last revised: June 20, 2016</p>
<div class="section" id="eggdrop-tcl-commands">
<h1>Eggdrop Tcl Commands<a class="headerlink" href="#eggdrop-tcl-commands" title="Permalink to this headline">¶</a></h1>
<p>This is an exhaustive list of all the Tcl commands added to Eggdrop. All
of the normal Tcl built-in commands are still there, of course, but you
can also use these to manipulate features of the bot. They are listed
according to category.</p>
<p>This list is accurate for Eggdrop v1.8.1. Scripts written for v1.3, v1.4
or 1.6 series of Eggdrop should probably work with a few minor modifications
depending on the script. Scripts which were written for  v0.9, v1.0, v1.1
or v1.2 will probably not work without modification. Commands which have
been changed in this version of Eggdrop (or are just new commands) are
marked with vertical bars (|) on the left.</p>
<div class="section" id="output-commands">
<h2>Output Commands<a class="headerlink" href="#output-commands" title="Permalink to this headline">¶</a></h2>
<p><strong>putserv &lt;text&gt; [options]</strong></p>
<blockquote>
<div><p>Description: sends text to the server, like '.dump' (intended for direct server commands); output is queued so that the bot won't flood itself off the server.</p>
<p>Options:
-next    push messages to the front of the queue
-normal  no effect</p>
<p>Returns: nothing</p>
<p>Module: server</p>
</div></blockquote>
<p><strong>puthelp &lt;text&gt; [options]</strong></p>
<blockquote>
<div><p>Description: sends text to the server, like 'putserv', but it uses a different queue intended for sending messages to channels or people.</p>
<p>Options:
-next    push messages to the front of the queue
-normal  no effect</p>
<p>Returns: nothing</p>
<p>Module: server</p>
</div></blockquote>
<p><strong>putquick &lt;text&gt; [options]</strong></p>
<blockquote>
<div><p>Description: sends text to the server, like 'putserv', but it uses a different (and faster) queue.</p>
<p>Options:
-next    push messages to the front of the queue
-normal  no effect</p>
<p>Returns: nothing</p>
<p>Module: server</p>
</div></blockquote>
<p><strong>putnow &lt;text&gt; [-oneline]</strong></p>
<blockquote>
<div><p>Description: sends text to the server immediately, bypassing all queues. Use with caution, as the bot may easily flood itself off the server.</p>
<p>Options:
-oneline  send text up to the first r or n, discarding the rest</p>
<p>Returns: nothing</p>
<p>Module: server</p>
</div></blockquote>
<p><strong>putkick &lt;channel&gt; &lt;nick,nick,...&gt; [reason]</strong></p>
<blockquote>
<div><p>Description: sends kicks to the server and tries to put as many nicks into one kick command as possible.</p>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>putlog &lt;text&gt;</strong></p>
<blockquote>
<div><p>Description: sends text to the bot's logfile, marked as 'misc' (o)</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>putcmdlog &lt;text&gt;</strong></p>
<blockquote>
<div><p>Description: sends text to the bot's logfile, marked as 'command' (c)</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<dl class="docutils">
<dt><strong>putxferlog &lt;text&gt;</strong></dt>
<dd><p class="first">Description: sends text to the bot's logfile, marked as 'file-area' (x)</p>
<p>Returns: nothing</p>
<p class="last">Module: core</p>
</dd>
<dt><strong>putloglev &lt;level(s)&gt; &lt;channel&gt; &lt;text&gt;</strong></dt>
<dd><p class="first">Description: sends text to the bot's logfile, tagged with all of the valid levels given. Use &quot;*&quot; to indicate all log levels.</p>
<p>Returns: nothing</p>
<p class="last">Module: core</p>
</dd>
</dl>
<p><strong>dumpfile &lt;nick&gt; &lt;filename&gt;</strong></p>
<blockquote>
<div><p>Description: dumps file from the help/text directory to a user on IRC via msg (one line per msg). The user has no flags, so the flag bindings won't work within the file.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>queuesize [queue]</strong></p>
<blockquote>
<div><p>Returns: the number of messages in all queues. If a queue is specified, only the size of this queue is returned. Valid queues are: mode, server, help.</p>
<p>Module: server</p>
</div></blockquote>
<p><strong>clearqueue &lt;queue&gt;</strong></p>
<blockquote>
<div><p>Description: removes all messages from a queue. Valid arguments are: mode, server, help, or all.</p>
<p>Returns: the number of deleted lines from the specified queue.</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="user-record-manipulation-commands">
<h2>User Record Manipulation Commands<a class="headerlink" href="#user-record-manipulation-commands" title="Permalink to this headline">¶</a></h2>
<p><strong>countusers</strong></p>
<blockquote>
<div><p>Returns: number of users in the bot's database</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>validuser &lt;handle&gt;</strong></p>
<blockquote>
<div><p>Returns: 1 if a user by that name exists; 0 otherwise</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>finduser &lt;nick!user&#64;host&gt;</strong></p>
<blockquote>
<div><p>Description: finds the user record which most closely matches the given nick!user&#64;host</p>
<p>Returns: the handle found, or &quot;*&quot; if none</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>userlist [flags]</strong></p>
<blockquote>
<div><p>Returns: a list of users on the bot. You can use the flag matching system here ([global]{&amp;/|}[chan]{&amp;/|}[bot]). '&amp;' specifies &quot;and&quot;; '|' specifies &quot;or&quot;.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>passwdok &lt;handle&gt; &lt;pass&gt;</strong></p>
<blockquote>
<div><p>Description: checks the password given against the user's password. Check against the password &quot;&quot; (a blank string) or &quot;-&quot; to find out if a user has no password set.</p>
<p>Returns: 1 if the password matches for that user; 0 otherwise</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>getuser &lt;handle&gt; &lt;entry-type&gt; [extra info]</strong></p>
<blockquote>
<div><p>Description: an interface to the new generic userfile support. Valid entry types are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>BOTFL</td>
<td>returns the current bot-specific flags for the user (bot-only)</td>
</tr>
<tr class="row-even"><td>BOTADDR</td>
<td>returns a list containing the bot's address, telnet port, and relay port (bot-only)</td>
</tr>
<tr class="row-odd"><td>HOSTS</td>
<td>returns a list of hosts for the user</td>
</tr>
<tr class="row-even"><td>LASTON</td>
<td>returns a list containing the unixtime last seen and the last seen place.
LASTON #channel returns the time last seen time for the channel or 0 if no info
exists.</td>
</tr>
<tr class="row-odd"><td>INFO</td>
<td>returns the user's global info line</td>
</tr>
<tr class="row-even"><td>XTRA</td>
<td>returns the user's XTRA info</td>
</tr>
<tr class="row-odd"><td>COMMENT</td>
<td>returns the master-visible only comment for the user</td>
</tr>
<tr class="row-even"><td>HANDLE</td>
<td>returns the user's handle as it is saved in the userfile</td>
</tr>
<tr class="row-odd"><td>PASS</td>
<td>returns the user's encrypted password</td>
</tr>
</tbody>
</table>
<p>For additional custom user fields, to include the deprecated &quot;EMAIL&quot; and &quot;URL&quot; fields, reference scripts/userinfo.tcl</p>
<p>Returns: info specific to each entry-type</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>setuser &lt;handle&gt; &lt;entry-type&gt; [extra info]</strong></p>
<blockquote>
<div><p>Description: this is the counterpart of getuser. It lets you set the various values. Other then the ones listed below, the entry-types are the same as getuser's.</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>PASS</td>
<td>sets a users password (no third arg will clear it)</td>
</tr>
<tr class="row-even"><td>HOSTS</td>
<td>if used with no third arg, all hosts for the user will be cleared. Otherwise, <em>1</em>
hostmask is added :P</td>
</tr>
<tr class="row-odd"><td>LASTON</td>
<td><p class="first">This setting has 3 forms.</p>
<blockquote class="last">
<div><p><em>setuser &lt;handle&gt; LASTON &lt;unixtime&gt; &lt;place&gt;</em> sets global LASTON time</p>
<p><em>setuser &lt;handle&gt; LASTON &lt;unixtime&gt;</em> sets global LASTON time (leaving the place
field empty)</p>
<p><em>setuser &lt;handle&gt; LASTON &lt;unixtime&gt; &lt;channel&gt;</em> sets a users LASTON time for a
channel (if it is a  valid channel)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>chhandle &lt;old-handle&gt; &lt;new-handle&gt;</strong></p>
<blockquote>
<div><p>Description: changes a user's handle</p>
<p>Returns: 1 on success; 0 if the new handle is invalid or already used, or if the user can't be found</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>chattr &lt;handle&gt; [changes [channel]]</strong></p>
<blockquote>
<div><p>Description: changes the attributes for a user record, if you include any.
Changes are of the form '+f', '-o', '+dk', '-o+d', etc. If changes are specified in the format of |&lt;changes&gt; &lt;channel&gt;, the channel-specific flags for that channel are altered. You can now use the +o|-o #channel format here too.</p>
<p>Returns: new flags for the user (if you made no changes, the current flags are returned). If a channel was specified, the global AND the channel-specific flags for that channel are returned in the format of globalflags|channelflags. &quot;*&quot; is returned if the specified user does not exist.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>botattr &lt;handle&gt; [changes [channel]]</strong></p>
<blockquote>
<div><p>Description: similar to chattr except this modifies bot flags rather than normal user attributes.</p>
<p>Returns: new flags for the bot (if you made no changes, the current flags are returned). If a channel was specified, the global AND the channel-specific flags for that channel are returned in the format of globalflags|channelflags. &quot;*&quot; is returned if the specified bot does not exist.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>matchattr &lt;handle&gt; &lt;flags&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the specified user has the specified flags; 0 otherwise</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>adduser &lt;handle&gt; [hostmask]</strong></p>
<blockquote>
<div><p>Description: creates a new user entry with the handle and hostmask given (with no password and the default flags)</p>
<p>Returns: 1 if successful; 0 if the handle already exists</p>
<p>Module: core</p>
</div></blockquote>
<dl class="docutils">
<dt><strong>addbot &lt;handle&gt; &lt;address&gt;</strong></dt>
<dd><p class="first">Description: adds a new bot to the userlist with the handle and botaddress given (with no password and no flags)</p>
<p>Returns: 1 if successful; 0 if the bot already exists</p>
<p class="last">Module: core</p>
</dd>
</dl>
<p><strong>deluser &lt;handle&gt;</strong></p>
<blockquote>
<div><p>Description: attempts to erase the user record for a handle</p>
<p>Returns: 1 if successful, 0 if no such user exists</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>delhost &lt;handle&gt; &lt;hostmask&gt;</strong></p>
<blockquote>
<div><p>Description: deletes a hostmask from a user's host list</p>
<p>Returns: 1 on success; 0 if the hostmask (or user) doesn't exist</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>addchanrec &lt;handle&gt; &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Description: adds a channel record for a user</p>
<p>Returns: 1 on success; 0 if the user or channel does not exist</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>delchanrec &lt;handle&gt; &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Description: removes a channel record for a user. This includes all associated channel flags.</p>
<p>Returns: 1 on success; 0 if the user or channel does not exist</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>haschanrec &lt;handle&gt; &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Returns: 1 if the given handle has a chanrec for the specified channel; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>getchaninfo &lt;handle&gt; &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Returns: info line for a specific channel (behaves just like 'getinfo')</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>setchaninfo &lt;handle&gt; &lt;channel&gt; &lt;info&gt;</strong></p>
<blockquote>
<div><p>Description: sets the info line on a specific channel for a user. If info is &quot;none&quot;, it will be removed.</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>newchanban &lt;channel&gt; &lt;ban&gt; &lt;creator&gt; &lt;comment&gt; [lifetime] [options]</strong></p>
<blockquote>
<div><p>Description: adds a ban to the ban list of a channel; creator is given credit for the ban in the ban list. lifetime is specified in minutes. If lifetime is not specified, ban-time (usually 60) is used. Setting the lifetime to 0 makes it a permanent ban.</p>
<p>Options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>sticky</td>
<td>forces the ban to be always active on a channel, even with dynamicbans on</td>
</tr>
</tbody>
</table>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>newban &lt;ban&gt; &lt;creator&gt; &lt;comment&gt; [lifetime] [options]</strong></p>
<blockquote>
<div><p>Description: adds a ban to the global ban list (which takes effect on all channels); creator is given credit for the ban in the ban list. lifetime is specified in minutes. If lifetime is not specified, global-ban-time (usually 60) is used. Setting the lifetime to 0 makes it a permanent ban.</p>
<p>Options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>sticky</td>
<td>forces the ban to be always active on a channel, even with dynamicbans on</td>
</tr>
</tbody>
</table>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>newchanexempt &lt;channel&gt; &lt;exempt&gt; &lt;creator&gt; &lt;comment&gt; [lifetime] [options]</strong></p>
<blockquote>
<div><p>Description: adds a exempt to the exempt list of a channel; creator is given credit for the exempt in the exempt list. lifetime is specified in minutes. If lifetime is not specified, exempt-time (usually 60) is used. Setting the lifetime to 0 makes it a permanent exempt. The exempt will not be removed until the corresponding ban has been removed. For timed bans, once the time period has expired, the exempt will not be removed until the corresponding ban has either expired or been removed.</p>
<p>Options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>sticky</td>
<td>forces the exempt to be always active on a channel, even with dynamicexempts on</td>
</tr>
</tbody>
</table>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>newexempt &lt;exempt&gt; &lt;creator&gt; &lt;comment&gt; [lifetime] [options]</strong></p>
<blockquote>
<div><p>Description: adds a exempt to the global exempt list (which takes effect on all channels); creator is given credit for the exempt in the exempt list. lifetime is specified in minutes. If lifetime is not specified, exempt-time (usually 60) is used. Setting the lifetime to 0 makes it a permanent exempt. The exempt will not be removed until the corresponding ban has been removed.</p>
<p>Options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>sticky</td>
<td>forces the exempt to be always active on a channel, even with dynamicexempts on</td>
</tr>
</tbody>
</table>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>newchaninvite &lt;channel&gt; &lt;invite&gt; &lt;creator&gt; &lt;comment&gt; [lifetime] [options]</strong></p>
<blockquote>
<div><p>Description: adds a invite to the invite list of a channel; creator is given credit for the invite in the invite list. lifetime is specified in minutes. If lifetime is not specified, invite-time (usually 60) is used. Setting the lifetime to 0 makes it a permanent invite. The invite will not be removed until the channel has gone -i.</p>
<p>Options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>sticky</td>
<td>forces the invite to be always active on a channel, even with dynamicinvites on</td>
</tr>
</tbody>
</table>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>newinvite &lt;invite&gt; &lt;creator&gt; &lt;comment&gt; [lifetime] [options]</strong></p>
<blockquote>
<div><p>Description: adds a invite to the global invite list (which takes effect on all channels); creator is given credit for the invite in the invite list. lifetime is specified in minutes. If lifetime is not specified, invite-time (usually 60) is used. Setting the lifetime to 0 makes it a permanent invite. The invite will not be removed until the channel has gone -i.</p>
<p>Options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>sticky</td>
<td>forces the invite to be always active on a channel, even with dynamicinvites on</td>
</tr>
</tbody>
</table>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>stickban &lt;banmask&gt; [channel]</strong></p>
<blockquote>
<div><p>Description: makes a ban sticky, or, if a channel is specified, then it is set sticky on that channel only.</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>unstickban &lt;banmask&gt; [channel]</strong></p>
<blockquote>
<div><p>Description: makes a ban no longer sticky, or, if a channel is specified, then it is unstuck on that channel only.</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>stickexempt &lt;exemptmask&gt; [channel]</strong></p>
<blockquote>
<div><p>Description: makes an exempt sticky, or, if a channel is specified, then it is set sticky on that channel only.</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>unstickexempt &lt;exemptmask&gt; [channel]</strong></p>
<blockquote>
<div><p>Description: makes an exempt no longer sticky, or, if a channel is specified, then it is unstuck on that channel only.</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
<dl class="docutils">
<dt><strong>stickinvite &lt;invitemask&gt; [channel]</strong></dt>
<dd><p class="first">Description: makes an invite sticky, or, if a channel is specified, then it is set sticky on that channel only.</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p class="last">Module: channels</p>
</dd>
</dl>
<p><strong>unstickinvite &lt;invitemask&gt; [channel]</strong></p>
<blockquote>
<div><p>Description: makes an invite no longer sticky, or, if a channel is specified, then it is unstuck on that channel only.</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>killchanban &lt;channel&gt; &lt;ban&gt;</strong></p>
<blockquote>
<div><p>Description: removes a ban from the ban list for a channel</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>killban &lt;ban&gt;</strong></p>
<blockquote>
<div><p>Description: removes a ban from the global ban list</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>killchanexempt &lt;channel&gt; &lt;exempt&gt;</strong></p>
<blockquote>
<div><p>Description: removes an exempt from the exempt list for a channel</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>killexempt &lt;exempt&gt;</strong></p>
<blockquote>
<div><p>Description: removes an exempt from the global exempt list</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>killchaninvite &lt;channel&gt; &lt;invite&gt;</strong></p>
<blockquote>
<div><p>Description: removes an invite from the invite list for a channel</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>killinvite &lt;invite&gt;</strong></p>
<blockquote>
<div><p>Description: removes an invite from the global invite list</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>ischanjuped &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Returns: 1 if the channel is juped, and the bot is unable to join; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>isban &lt;ban&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the specified ban is in the global ban list; 0 otherwise. If a channel is specified, that channel's ban list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>ispermban &lt;ban&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the specified ban is in the global ban list AND is marked as permanent; 0 otherwise. If a channel is specified, that channel's ban list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>isexempt &lt;exempt&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the specified exempt is in the global exempt list; 0 otherwise. If a channel is specified, that channel's exempt list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>ispermexempt &lt;exempt&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the specified exempt is in the global exempt list AND is marked as permanent; 0 otherwise. If a channel is specified, that channel's exempt list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>isinvite &lt;invite&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the specified invite is in the global invite list; 0 otherwise. If a channel is specified, that channel's invite list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>isperminvite &lt;invite&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the specified invite is in the global invite list AND is marked as permanent; 0 otherwise. If a channel is specified, that channel's invite list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>isbansticky &lt;ban&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the specified ban is marked as sticky in the global ban list; 0 otherwise. If a channel is specified, that channel's ban list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>isexemptsticky &lt;exempt&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the specified exempt is marked as sticky in the global exempt list; 0 otherwise. If a channel is specified, that channel's exempt list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>isinvitesticky &lt;invite&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the specified invite is marked as sticky in the global invite list; 0 otherwise. If a channel is specified, that channel's invite list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>matchban &lt;nick!user&#64;host&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the specified nick!user&#64;host matches a ban in the global ban list; 0 otherwise. If a channel is specified, that channel's ban list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>matchexempt &lt;nick!user&#64;host&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the specified nick!user&#64;host matches an exempt in the global exempt list; 0 otherwise. If a channel is specified, that channel's exempt list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>matchinvite &lt;nick!user&#64;host&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the specified nick!user&#64;host matches an invite in the global invite list; 0 otherwise. If a channel is specified, that
channel's invite list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>banlist [channel]</strong></p>
<blockquote>
<div><p>Returns: a list of global bans, or, if a channel is specified, a list of channel-specific bans. Each entry is a sublist containing: hostmask, comment, expiration timestamp, time added, last time active, and creator. The three timestamps are in unixtime format.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>exemptlist [channel]</strong></p>
<blockquote>
<div><p>Returns: a list of global exempts, or, if a channel is specified, a list of channel-specific exempts. Each entry is a sublist containing: hostmask, comment, expiration timestamp, time added, last time active, and creator. The three timestamps are in unixtime format.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>invitelist [channel]</strong></p>
<blockquote>
<div><p>Returns: a list of global invites, or, if a channel is specified, a list of channel-specific invites. Each entry is a sublist containing: hostmask, comment, expiration timestamp, time added, last time active, and creator. The three timestamps are in unixtime format.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>newignore &lt;hostmask&gt; &lt;creator&gt; &lt;comment&gt; [lifetime]</strong></p>
<blockquote>
<div><p>Description: adds an entry to the ignore list; creator is given credit for the ignore. lifetime is how many minutes until the ignore expires and is removed. If lifetime is not specified, ignore-time (usually 60) is used. Setting the lifetime to 0 makes it a permanent ignore.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<dl class="docutils">
<dt><strong>killignore &lt;hostmask&gt;</strong></dt>
<dd><p class="first">Description: removes an entry from the ignore list</p>
<p>Returns: 1 if successful; 0 otherwise</p>
<p class="last">Module: core</p>
</dd>
</dl>
<p><strong>ignorelist</strong></p>
<blockquote>
<div><p>Returns: a list of ignores. Each entry is a sublist containing: hostmask, comment, expiration timestamp, time added, and creator. The timestamps are in unixtime format.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>isignore &lt;hostmask&gt;</strong></p>
<blockquote>
<div><p>Returns: 1 if the ignore is in the list; 0 otherwise</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>save</strong></p>
<blockquote>
<div><p>Description: writes the user and channel files to disk</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>reload</strong></p>
<blockquote>
<div><p>Description: loads the userfile from disk, replacing whatever is in memory</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<dl class="docutils">
<dt><strong>backup</strong></dt>
<dd><p class="first">Description: makes a simple backup of the userfile that's on disk. If the channels module is loaded, this also makes a simple backup of the channel file.</p>
<p>Returns: nothing</p>
<p class="last">Module: core</p>
</dd>
</dl>
<p><strong>getting-users</strong></p>
<blockquote>
<div><p>Returns: 1 if the bot is currently downloading a userfile from a sharebot (and hence, user records are about to drastically change); 0 if not</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="channel-commands">
<h2>Channel Commands<a class="headerlink" href="#channel-commands" title="Permalink to this headline">¶</a></h2>
<p><strong>channel add &lt;name&gt; [option-list]</strong></p>
<blockquote>
<div><p>Description: adds a channel record for the bot to monitor. The full list of possible options are given in doc/settings/mod.channels. Note that the channel options must be in a list (enclosed in {}).</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>channel set &lt;name&gt; &lt;options...&gt;</strong></p>
<blockquote>
<div><p>Description: sets options for the channel specified. The full list of possible options are given in doc/settings/mod.channels.</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>channel info &lt;name&gt;</strong></p>
<blockquote>
<div><p>Returns: a list of info about the specified channel's settings.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>channel get &lt;name&gt; [setting]</strong></p>
<blockquote>
<div><p>Returns: The value of the setting you specify. For flags, a value of 0 means it is disabled (-), and non-zero means enabled (+). If no setting is specified, a flat list of all available settings and their values will be returned.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>channel remove &lt;name&gt;</strong></p>
<blockquote>
<div><p>Description: removes a channel record from the bot and makes the bot no longer monitor the channel</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>savechannels</strong></p>
<blockquote>
<div><p>Description: saves the channel settings to the channel-file if one is defined.</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
<dl class="docutils">
<dt><strong>loadchannels</strong></dt>
<dd><p class="first">Description: reloads the channel settings from the channel-file if one is defined.</p>
<p>Returns: nothing</p>
<p class="last">Module: channels</p>
</dd>
</dl>
<p><strong>channels</strong></p>
<blockquote>
<div><p>Returns: a list of the channels the bot has a channel record for</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>channame2dname &lt;channel-name&gt;</strong> and <strong>chandname2name &lt;channel-dname&gt;</strong></p>
<blockquote>
<div><p>Description: these two functions are important to correctly support !channels. The bot differentiates between channel description names (chan dnames) and real channel names (chan names). The chan dnames are what you would normally call the channel, such as &quot;!channel&quot;. The chan names are what the IRC server uses to identify the channel. They consist of the chan dname prefixed with an ID; such as &quot;!ABCDEchannel&quot;.</p>
<p>For bot functions like isop, isvoice, etc. you need to know the chan dnames. If you communicate with the server, you usually get the chan name, though. That's what you need the channame2dname function for.</p>
<p>If you only have the chan dname and want to directly send raw server commands, use the chandname2name command.</p>
<p>NOTE: For non-!channels, chan dname and chan name are the same.</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>isbotnick &lt;nick&gt;</strong></p>
<blockquote>
<div><p>Returns: 1 if the nick matches the botnick; 0 otherwise</p>
<p>Module: server</p>
</div></blockquote>
<p><strong>botisop [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the bot has ops on the specified channel (or any channel if no channel is specified); 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>botishalfop [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the bot has halfops on the specified channel (or any channel if no channel is specified); 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>botisvoice [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the bot has a voice on the specified channel (or any channel if no channel is specified); 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>botonchan [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the bot is on the specified channel (or any channel if no channel is specified); 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>isop &lt;nickname&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if someone by the specified nickname is on the channel (or any channel if no channel name is specified) and has ops; 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>ishalfop &lt;nickname&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if someone by the specified nickname is on the channel (or any channel if no channel name is specified) and has halfops; 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>wasop &lt;nickname&gt; &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Returns: 1 if someone that just got opped/deopped in the chan had op before the modechange; 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>washalfop &lt;nickname&gt; &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Returns: 1 if someone that just got halfopped/dehalfopped in the chan had halfop before the modechange; 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>isvoice &lt;nickname&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if someone by that nickname is on the channel (or any channel if no channel is specified) and has voice (+v); 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
<dl class="docutils">
<dt><strong>onchan &lt;nickname&gt; [channel]</strong></dt>
<dd><p class="first">Returns: 1 if someone by that nickname is on the specified channel (or any channel if none is specified); 0 otherwise</p>
<p class="last">Module: irc</p>
</dd>
</dl>
<p><strong>nick2hand &lt;nickname&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: the handle of a nickname on a channel. If a channel is not specified, the bot will check all of its channels. If the nick is not found, &quot;&quot; is returned. If the nick is found but does not have a handle, &quot;*&quot; is returned.</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>hand2nick &lt;handle&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: nickname of the first person on the specified channel (if one is specified) whose nick!user&#64;host matches the given handle; &quot;&quot; is returned if no match is found. If no channel is specified, all channels are checked.</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>handonchan &lt;handle&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if the the nick!user&#64;host for someone on the channel (or any channel if no channel name is specified) matches for the handle given; 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>ischanban &lt;ban&gt; &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Returns: 1 if the specified ban is on the given channel's ban list (not the bot's banlist for the channel)</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>ischanexempt &lt;exempt&gt; &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Returns: 1 if the specified exempt is on the given channel's exempt list (not the bot's exemptlist for the channel)</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>ischaninvite &lt;invite&gt; &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Returns: 1 if the specified invite is on the given channel's invite list (not the bot's invitelist for the channel)</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>chanbans &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Returns: a list of the current bans on the channel. Each element is a sublist of the form {&lt;ban&gt; &lt;bywho&gt; &lt;age&gt;}. age is seconds from the bot's point of view</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>chanexempts &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Returns: a list of the current exempts on the channel. Each element is a sublist of the form {&lt;exempts&gt; &lt;bywho&gt; &lt;age&gt;}. age is seconds from the bot's point of view</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>chaninvites &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Returns: a list of the current invites on the channel. Each element is a sublist of the form {&lt;invites&gt; &lt;bywho&gt; &lt;age&gt;}. age is seconds from the bot's point of view</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>resetbans &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Description: removes all bans on the channel that aren't in the bot's ban list and refreshes any bans that should be on the channel but aren't</p>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>resetexempts &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Description: removes all exempt on the channel that aren't in the bot's exempt list and refreshes any exempts that should be on the channel but aren't</p>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>resetinvites &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Description: removes all invites on the channel that aren't in the bot's invite list and refreshes any invites that should be on the channel but aren't</p>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>resetchanidle [nick] &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Description: resets the channel idle time for the given nick or for all nicks on the channel if no nick is specified.</p>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
<dl class="docutils">
<dt><strong>resetchanjoin [nick] &lt;channel&gt;</strong></dt>
<dd><p class="first">Description: resets the channel join time for the given nick or for all nicks on the channel if no nick is specified.</p>
<p>Returns: nothing</p>
<p class="last">Module: irc</p>
</dd>
</dl>
<p><strong>resetchan &lt;channel&gt; [flags]</strong></p>
<blockquote>
<div><p>Description: rereads in the channel info from the server. If flags are specified, only the required information will be reset, according to the given flags. Available flags:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>b</td>
<td>reset channel bans</td>
</tr>
<tr class="row-even"><td>e</td>
<td>reset channel exempts</td>
</tr>
<tr class="row-odd"><td>I</td>
<td>reset channel invites</td>
</tr>
<tr class="row-even"><td>m</td>
<td>refresh channel modes</td>
</tr>
<tr class="row-odd"><td>t</td>
<td>refresh channel topic</td>
</tr>
<tr class="row-even"><td>w</td>
<td>refresh memberlist</td>
</tr>
</tbody>
</table>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>getchanhost &lt;nickname&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: user&#64;host of the specified nickname (the nickname is not included in the returned host). If a channel is not specified, bot will check all of its channels. If the nickname is not on the channel(s), &quot;&quot; is returned.</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>getchanjoin &lt;nickname&gt; &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Returns: timestamp (unixtime format) of when the specified nickname joined the channel if available, 0 otherwise. Note that after a channel reset this information will be lost, even if previously available.</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>onchansplit &lt;nick&gt; [channel]</strong></p>
<blockquote>
<div><p>Returns: 1 if that nick is split from the channel (or any channel if no channel is specified); 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>chanlist &lt;channel&gt; [flags[&amp;chanflags]]</strong></p>
<blockquote>
<div><p>Description: flags are any global flags; the '&amp;' denotes to look for channel specific flags. Examples:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>n</td>
<td>(Global Owner)</td>
</tr>
<tr class="row-even"><td>&amp;n</td>
<td>(Channel Owner)</td>
</tr>
<tr class="row-odd"><td>o&amp;m</td>
<td>(Global Op, Channel Master)</td>
</tr>
</tbody>
</table>
<p>Now you can use even more complex matching of flags, including +&amp;- flags and &amp; or | ('and' or 'or') matching.</p>
<p>Returns: list of nicknames currently on the bot's channel that have all of the flags specified;. If no flags are given, all of the nicknames are returned. Please note that if you're executing chanlist after a part or sign bind, the gone user will still be listed, so you can check for wasop, isop, etc.</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>getchanidle &lt;nickname&gt; &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Returns: number of minutes that person has been idle; -1 if the specified user isn't on the channel</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>getchanmode &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Returns: string of the type &quot;+ntik key&quot; for the channel specified</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>jump [server [[+]port [password]]]</strong></p>
<blockquote>
<div><p>Description: jumps to the server specified, or (if none is specified) the next server in the bot's serverlist. If you prefix the port with a plus sign (e.g. +6697), SSL connection will be attempted.</p>
<p>Returns: nothing</p>
<p>Module: server</p>
</div></blockquote>
<p><strong>pushmode &lt;channel&gt; &lt;mode&gt; [arg]</strong></p>
<blockquote>
<div><p>Description: sends out a channel mode change (ex: pushmode #lame +o goober) through the bot's queuing system. All the mode changes will be sent out at once (combined into one line as much as possible) after the script finishes, or when 'flushmode' is called.</p>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>flushmode &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Description: forces all previously pushed channel mode changes to be sent to the server, instead of when the script is finished (just for the channel specified)</p>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>topic &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Returns: string containing the current topic of the specified channel</p>
<p>Module: irc</p>
</div></blockquote>
<p><strong>validchan &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Description: checks if the bot has a channel record for the specified channel. Note that this does not necessarily mean that the bot is ON the channel.</p>
<p>Returns: 1 if the channel exists, 0 if not</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>isdynamic &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Returns: 1 if the channel is a dynamic channel; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>setudef &lt;flag/int/str&gt; &lt;name&gt;</strong></p>
<blockquote>
<div><p>Description: initializes a user defined channel flag, string or integer setting. You can use it like any other flag/setting. IMPORTANT: Don't forget to reinitialize your flags/settings after a restart, or it'll be lost.</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>renudef &lt;flag/int/str&gt; &lt;oldname&gt; &lt;newname&gt;</strong></p>
<blockquote>
<div><p>Description: renames a user defined channel flag, string, or integer setting.</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>deludef &lt;flag/int/str&gt; &lt;name&gt;</strong></p>
<blockquote>
<div><p>Description: deletes a user defined channel flag, string, or integer setting.</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>getudefs [flag/int/str]</strong></p>
<blockquote>
<div><p>Returns: a list of user defined channel settings of the given type, or all of them if no type is given.</p>
<p>Module: channels</p>
</div></blockquote>
<p><strong>chansettype &lt;setting&gt;</strong></p>
<blockquote>
<div><p>Returns: The type of the setting you specify. The possible types are flag, int, str, pair. A flag type references a channel flag setting that can be set to either + or -. An int type is a channel  setting that is set to a number, such as ban-time. A str type is a  channel setting that stores a string, such as need-op. A pair type is a setting that holds a value couple, such as the flood settings.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="dcc-commands">
<h2>DCC Commands<a class="headerlink" href="#dcc-commands" title="Permalink to this headline">¶</a></h2>
<p><strong>putdcc &lt;idx&gt; &lt;text&gt; [-raw]</strong></p>
<blockquote>
<div><p>Description: sends text to the idx specified. If -raw is specified, the text will be sent as is, without forced new lines or limits to line length.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>dccbroadcast &lt;message&gt;</strong></p>
<blockquote>
<div><p>Description: sends a message to everyone on the party line across the botnet, in the form of &quot;*** &lt;message&gt;&quot; for local users and &quot;*** (Bot) &lt;message&gt;&quot; for users on other bots</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>dccputchan &lt;channel&gt; &lt;message&gt;</strong></p>
<blockquote>
<div><p>Description: sends your message to everyone on a certain channel on the botnet, in a form exactly like dccbroadcast does. Valid channels are 0 through 99999.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<dl class="docutils">
<dt><strong>boot &lt;user&#64;bot&gt; [reason]</strong></dt>
<dd><p class="first">Description: boots a user from the partyline</p>
<p>Returns: nothing</p>
<p class="last">Module: core</p>
</dd>
</dl>
<p><strong>dccsimul &lt;idx&gt; &lt;text&gt;</strong></p>
<blockquote>
<div><p>Description: simulates text typed in by the dcc user specified. Note that in v0.9, this only simulated commands; now a command must be preceded by a '.' to be simulated.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>hand2idx &lt;handle&gt;</strong></p>
<blockquote>
<div><p>Returns: the idx (a number greater than or equal to zero) for the user given if the user is on the party line in chat mode (even if she is currently on a channel or in chat off), the file area, or in the control of a script. -1 is returned if no idx is found. If the user is on multiple times, the oldest idx is returned.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>idx2hand &lt;idx&gt;</strong></p>
<blockquote>
<div><p>Returns: handle of the user with the given idx</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>valididx &lt;idx&gt;</strong></p>
<blockquote>
<div><p>Returns: 1 if the idx currently exists; 0 otherwise</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>getchan &lt;idx&gt;</strong></p>
<blockquote>
<div><p>Returns: the current party line channel for a user on the party line; &quot;0&quot; indicates he's on the group party line, &quot;-1&quot; means he has chat off, and a value from 1 to 99999 is a private channel</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>setchan &lt;idx&gt; &lt;channel&gt;</strong></p>
<blockquote>
<div><p>Description: sets a party line user's channel. The party line user is not notified that she is now on a new channel. A channel name can be used (provided it exists).</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>console &lt;idx&gt; [channel] [console-modes]</strong></p>
<blockquote>
<div><p>Description: changes a dcc user's console mode, either to an absolute mode (like &quot;mpj&quot;) or just adding/removing flags (like &quot;+pj&quot; or &quot;-moc&quot; or &quot;+mp-c&quot;). The user's console channel view can be changed also (as long as the new channel is a valid channel).</p>
<p>Returns: a list containing the user's (new) channel view and (new) console modes, or nothing if that user isn't currently on the partyline</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>echo &lt;idx&gt; [status]</strong></p>
<blockquote>
<div><p>Description: turns a user's echo on or off; the status has to be a 1 or 0</p>
<p>Returns: new value of echo for that user (or the current value, if status was omitted)</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>strip &lt;idx&gt; [+/-strip-flags]</strong></p>
<blockquote>
<div><p>Description: modifies the strip-flags for a user. The supported strip-flags are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>c</td>
<td>remove all color codes</td>
</tr>
<tr class="row-even"><td>b</td>
<td>remove all boldface codes</td>
</tr>
<tr class="row-odd"><td>r</td>
<td>remove all reverse video codes</td>
</tr>
<tr class="row-even"><td>u</td>
<td>remove all underline codes</td>
</tr>
<tr class="row-odd"><td>a</td>
<td>remove all ANSI codes</td>
</tr>
<tr class="row-even"><td>g</td>
<td>remove all ctrl-g (bell) codes</td>
</tr>
<tr class="row-odd"><td>o</td>
<td>remove all ordinary codes (ctrl+o, terminates bold/color/..)</td>
</tr>
<tr class="row-even"><td>i</td>
<td>remove all italics codes</td>
</tr>
<tr class="row-odd"><td>*</td>
<td>remove all of the above</td>
</tr>
</tbody>
</table>
<p>Returns: new strip-flags for the specified user (or the current flags, if strip-flags was omitted)</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>putbot &lt;bot-nick&gt; &lt;message&gt;</strong></p>
<blockquote>
<div><p>Description: sends a message across the botnet to another bot. If no script intercepts the message on the other end, the message is ignored.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>putallbots &lt;message&gt;</strong></p>
<blockquote>
<div><p>Description: sends a message across the botnet to all bots. If no script intercepts the message on the other end, the message is ignored.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>killdcc &lt;idx&gt;</strong></p>
<blockquote>
<div><p>Description: kills a partyline or file area connection</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>bots</strong></p>
<blockquote>
<div><p>Returns: list of the bots currently connected to the botnet</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>botlist</strong></p>
<blockquote>
<div><p>Returns: a list of bots currently on the botnet. Each item in the list is a sublist with four elements: bot, uplink, version, and sharing status:</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>bot</td>
<td>the bot's botnetnick</td>
</tr>
<tr class="row-even"><td>uplink</td>
<td>the bot the bot is connected to</td>
</tr>
<tr class="row-odd"><td>version</td>
<td>it's current numeric version</td>
</tr>
<tr class="row-even"><td>sharing</td>
<td>a &quot;+&quot; if the bot is a sharebot; &quot;-&quot; otherwise</td>
</tr>
</tbody>
</table>
<p>Module: core</p>
</div></blockquote>
<p><strong>islinked &lt;bot&gt;</strong></p>
<blockquote>
<div><p>Returns: 1 if the bot is currently linked; 0 otherwise</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>dccused</strong></p>
<blockquote>
<div><p>Returns: number of dcc connections currently in use</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>dcclist [type]</strong></p>
<blockquote>
<div><p>Returns: a list of active connections, each item in the list is a sublist containing six elements:
{&lt;idx&gt; &lt;handle&gt; &lt;hostname&gt; &lt;type&gt; {&lt;other&gt;} &lt;timestamp&gt;}.</p>
<p>The types are: chat, bot, files, file_receiving, file_sending, file_send_pending, script, socket (these are connections that have not yet been put under 'control'), telnet, and server. The timestamp is in unixtime format.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>whom &lt;chan&gt;</strong></p>
<blockquote>
<div><p>Returns: list of people on the botnet who are on that channel. 0 is the default party line. Each item in the list is a sublist with six elements: nickname, bot, hostname, access flag ('-', '&#64;', '+', or '*'), minutes idle, and away message (blank if the user is not away). If you specify * for channel, every user on the botnet is returned with an extra argument indicating the channel the user is on.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>getdccidle &lt;idx&gt;</strong></p>
<blockquote>
<div><p>Returns: number of seconds the dcc chat/file system/script user has been idle</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>getdccaway &lt;idx&gt;</strong></p>
<blockquote>
<div><p>Returns: away message for a dcc chat user (or &quot;&quot; if the user is not set away)</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>setdccaway &lt;idx&gt; &lt;message&gt;</strong></p>
<blockquote>
<div><p>Description: sets a party line user's away message and marks them away. If set to &quot;&quot;, the user is marked as no longer away.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>connect &lt;host&gt; &lt;[+]port&gt;</strong></p>
<blockquote>
<div><p>Description: makes an outgoing connection attempt and creates a dcc entry for it. A 'control' command should be used immediately after a successful 'connect' so no input is lost. If the port is prefixed with a plus sign, SSL encrypted connection will be attempted.</p>
<p>Returns: idx of the new connection</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>listen &lt;port&gt; &lt;type&gt; [options] [flag]</strong></p>
<blockquote>
<div><p>Description: opens a listening port to accept incoming telnets; type must be one of &quot;bots&quot;, &quot;all&quot;, &quot;users&quot;, &quot;script&quot;, or &quot;off&quot;. Prefixing the port with a plus sign will make eggdrop accept SSL connections on it.</p>
<blockquote>
<div><p>listen &lt;port&gt; bots [mask]</p>
<blockquote>
<div><p>Description: accepts connections from bots only; the optional mask is used to identify permitted bot names. If the mask begins with '&#64;', it is interpreted to be a mask of permitted hosts to accept connections from.</p>
<p>Returns: port number</p>
</div></blockquote>
<p>listen &lt;port&gt; users [mask]</p>
<blockquote>
<div><p>Description: accepts connections from users only (no bots); the optional mask is used to identify permitted nicknames. If the mask begins with '&#64;', it is interpreted to be a mask of permitted hosts to accept connections from.</p>
<p>Returns: port number</p>
</div></blockquote>
<p>listen &lt;port&gt; all [mask]</p>
<blockquote>
<div><p>Description: accepts connections from anyone; the optional mask is used to identify permitted nicknames/botnames. If the mask begins with '&#64;', it is interpreted to be a mask of permitted hosts to accept connections from.</p>
<p>Returns: port number</p>
</div></blockquote>
<p>listen &lt;port&gt; script &lt;proc&gt; [flag]</p>
<blockquote>
<div><p>Description: accepts connections which are immediately routed to a proc. The proc is called with one parameter: the idx of the new connection. Flag may currently only be 'pub', which makes the bot allow anyone to connect and not perform an ident lookup.</p>
<p>Returns: port number</p>
</div></blockquote>
<p>listen &lt;port&gt; off</p>
<blockquote>
<div><p>Description: stop listening on a port</p>
<p>Returns: nothing</p>
</div></blockquote>
</div></blockquote>
<p>Module: core</p>
</div></blockquote>
<p><strong>dccdumpfile &lt;idx&gt; &lt;filename&gt;</strong></p>
<blockquote>
<div><p>Description: dumps out a file from the text directory to a dcc chat user. The flag matching that's used everywhere else works here, too.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="notes-module">
<h2>Notes Module<a class="headerlink" href="#notes-module" title="Permalink to this headline">¶</a></h2>
<p><strong>notes &lt;user&gt; [numberlist]</strong></p>
<blockquote>
<div><p>Returns: -1 if no such user, -2 if notefile failure. If a numberlist is not specified, the number of notes stored for the user is returned. Otherwise, a list of sublists containing information about notes stored for the user is returned. Each sublist is in the format of:</p>
<div class="highlight-python"><div class="highlight"><pre>{&lt;from&gt; &lt;timestamp&gt; &lt;note text&gt;}
</pre></div>
</div>
<p>Module: notes</p>
</div></blockquote>
<p><strong>erasenotes &lt;user&gt; &lt;numberlist&gt;</strong></p>
<blockquote>
<div><p>Description: erases some or all stored notes for a user. Use '-' to erase all notes.</p>
<p>Returns: -1 if no such user, -2 if notefile failure, 0 if no such note, or number of erased notes.</p>
<p>Module: notes</p>
</div></blockquote>
<p><strong>listnotes &lt;user&gt; &lt;numberlist&gt;</strong></p>
<blockquote>
<div><p>Description: lists existing notes according to the numberlist (ex: &quot;2-4;8;16-&quot;)</p>
<p>Returns: -1 if no such user, -2 if notefile failure, 0 if no such note, list of existing notes.</p>
<p>Module: notes</p>
</div></blockquote>
<p><strong>storenote &lt;from&gt; &lt;to&gt; &lt;msg&gt; &lt;idx&gt;</strong></p>
<blockquote>
<div><p>Description: stores a note for later reading, notifies idx of any results (use idx -1 for no notify).</p>
<p>Returns: 0 on success; non-0 on failure</p>
<p>Module: notes</p>
</div></blockquote>
</div>
<div class="section" id="assoc-module">
<h2>Assoc Module<a class="headerlink" href="#assoc-module" title="Permalink to this headline">¶</a></h2>
<p><strong>assoc &lt;chan&gt; [name]</strong></p>
<blockquote>
<div><p>Description: sets the name associated with a botnet channel, if you specify one</p>
<p>Returns: current name for that channel, if any</p>
<p>Module: assoc</p>
</div></blockquote>
<p><strong>killassoc &lt;chan&gt;</strong></p>
<blockquote>
<div><p>Description: removes the name associated with a botnet channel, if any exists. Use 'killassoc &amp;' to kill all assocs.</p>
<p>Returns: nothing</p>
<p>Module: assoc</p>
</div></blockquote>
</div>
<div class="section" id="compress-module">
<h2>Compress Module<a class="headerlink" href="#compress-module" title="Permalink to this headline">¶</a></h2>
<p><strong>compressfile [-level &lt;level&gt;] &lt;src-file&gt; [target-file]</strong>
and
<strong>uncompressfile &lt;src-file&gt; [target-file]</strong></p>
<blockquote>
<div><p>Description: compresses or un-compresses files. The level option specifies the compression mode to use when compressing. Available modes are from 0 (minimum CPU usage, minimum compression) all the way up to 9 (maximum CPU usage, maximum compression). If you don't specify the target-file, the src-file will be overwritten.</p>
<p>Returns: nothing</p>
<p>Module: compress</p>
</div></blockquote>
<p><strong>iscompressed &lt;filename&gt;</strong></p>
<blockquote>
<div><p>Description: determines whether &lt;filename&gt; is gzip compressed.</p>
<p>Returns: 1 if it is, 0 if it isn't, and 2 if some kind of error prevented the checks from succeeding.</p>
<p>Module: compress</p>
</div></blockquote>
</div>
<div class="section" id="filesys-module">
<h2>Filesys Module<a class="headerlink" href="#filesys-module" title="Permalink to this headline">¶</a></h2>
<p><strong>setpwd &lt;idx&gt; &lt;dir&gt;</strong></p>
<blockquote>
<div><p>Description: changes the directory of a file system user, in exactly the same way as a 'cd' command would. The directory can be specified relative or absolute.</p>
<p>Returns: nothing</p>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>getpwd &lt;idx&gt;</strong></p>
<blockquote>
<div><p>Returns: the current directory of a file system user</p>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>getfiles &lt;dir&gt;</strong></p>
<blockquote>
<div><p>Returns: a list of files in the directory given; the directory is relative to dcc-path</p>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>getdirs &lt;dir&gt;</strong></p>
<blockquote>
<div><p>Returns: a list of subdirectories in the directory given; the directory is relative to dcc-path</p>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>dccsend &lt;filename&gt; &lt;ircnick&gt;</strong></p>
<blockquote>
<div><p>Description: attempts to start a dcc file transfer to the given nick; the filename must be specified either by full pathname or in relation to the bot's startup directory</p>
<p>Returns:</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>0</td>
<td>success</td>
</tr>
<tr class="row-even"><td>1</td>
<td>the dcc table is full (too many connections)</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>can't open a socket for the transfer</td>
</tr>
<tr class="row-even"><td>3</td>
<td>the file doesn't exist</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>the file was queued for later transfer, which means that person has
too many file transfers going right now</td>
</tr>
<tr class="row-even"><td>5</td>
<td>copy-to-tmp is enabled and the file already exists in the temp
directory</td>
</tr>
</tbody>
</table>
<p>Module: transfer</p>
</div></blockquote>
<p><strong>filesend &lt;idx&gt; &lt;filename&gt; [ircnick]</strong></p>
<blockquote>
<div><p>Description: like dccsend, except it operates for a current filesystem user, and the filename is assumed to be a relative path from that user's current directory</p>
<p>Returns: 0 on failure; 1 on success (either an immediate send or a queued send)</p>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>fileresend &lt;idx&gt; &lt;filename&gt; [ircnick]</strong></p>
<blockquote>
<div><p>Description: functions like filesend, only that it sends a DCC RESEND instead of a DCC SEND, which allows people to resume aborted file transfers if their client supports that protocol. ircII/BitchX/etc. support it; mIRC does not.</p>
<p>Returns: 0 on failure; 1 on success (either an immediate send or a queued send)</p>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>setdesc &lt;dir&gt; &lt;file&gt; &lt;desc&gt;</strong></p>
<blockquote>
<div><p>Description: sets the description for a file in a file system directory; the directory is relative to dcc-path</p>
<p>Returns: nothing</p>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>getdesc &lt;dir&gt; &lt;file&gt;</strong></p>
<blockquote>
<div><p>Returns: the description for a file in the file system, if one exists</p>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>setowner &lt;dir&gt; &lt;file&gt; &lt;handle&gt;</strong></p>
<blockquote>
<div><p>Description: changes the owner for a file in the file system; the directory is relative to dcc-path</p>
<p>Returns: nothing</p>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>getowner &lt;dir&gt; &lt;file&gt;</strong></p>
<blockquote>
<div><p>Returns: the owner of a file in the file system</p>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>setlink &lt;dir&gt; &lt;file&gt; &lt;link&gt;</strong></p>
<blockquote>
<div><p>Description: creates or changes a linked file (a file that actually exists on another bot); the directory is relative to dcc-path</p>
<p>Returns: nothing</p>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>getlink &lt;dir&gt; &lt;file&gt;</strong></p>
<blockquote>
<div><p>Returns: the link for a linked file, if it exists</p>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>getfileq &lt;handle&gt;</strong></p>
<blockquote>
<div><p>Returns: list of files queued by someone; each item in the list will be a sublist with two elements: nickname the file is being sent to and the filename</p>
<p>Module: transfer</p>
</div></blockquote>
<p><strong>getfilesendtime &lt;idx&gt;</strong></p>
<blockquote>
<div><p>Returns: the unixtime value from when a file transfer started, or a negative number:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>-1</td>
<td>no matching transfer with the specified idx was found</td>
</tr>
<tr class="row-even"><td>-2</td>
<td>the idx matches an entry which is not a file transfer</td>
</tr>
</tbody>
</table>
<p>Module: transfer</p>
</div></blockquote>
<p><strong>mkdir &lt;directory&gt; [&lt;required-flags&gt; [channel]]</strong></p>
<blockquote>
<div><p>Description: creates a directory in the file system. Only users with the required flags may access it.</p>
<p>Returns:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>0</td>
<td>success</td>
</tr>
<tr class="row-even"><td>1</td>
<td>can't create directory</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>directory exists but is not a directory</td>
</tr>
<tr class="row-even"><td>-3</td>
<td>could not open filedb</td>
</tr>
</tbody>
</table>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>rmdir &lt;directory&gt;</strong></p>
<blockquote>
<div><p>Description: removes a directory from the file system.</p>
<p>Returns: 0 on success; 1 on failure</p>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>mv &lt;file&gt; &lt;destination&gt;</strong></p>
<blockquote>
<div><p>Description: moves a file from its source to the given destination. The file can also be a mask, such as /incoming/*, provided the destination is a directory.</p>
<p>Returns: If the command was successful, the number of files moved will be returned. Otherwise, a negative number will be returned:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>-1</td>
<td>invalid source file</td>
</tr>
<tr class="row-even"><td>-2</td>
<td>invalid destination</td>
</tr>
<tr class="row-odd"><td>-3</td>
<td>destination file exists</td>
</tr>
<tr class="row-even"><td>-4</td>
<td>no matches found</td>
</tr>
</tbody>
</table>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>cp &lt;file&gt; &lt;destination&gt;</strong></p>
<blockquote>
<div><p>Description: copies a file from its source to the given destination. The file can also be a mask, such as /incoming/*, provided the destination is a directory.</p>
<p>Returns: If the command was successful, the number of files copied will be returned. Otherwise, a negative number will be returned:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>-1</td>
<td>invalid source file</td>
</tr>
<tr class="row-even"><td>-2</td>
<td>invalid destination</td>
</tr>
<tr class="row-odd"><td>-3</td>
<td>destination file exists</td>
</tr>
<tr class="row-even"><td>-4</td>
<td>no matches found</td>
</tr>
</tbody>
</table>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>getflags &lt;dir&gt;</strong></p>
<blockquote>
<div><p>Returns: the flags required to access a directory</p>
<p>Module: filesys</p>
</div></blockquote>
<p><strong>setflags &lt;dir&gt; [&lt;flags&gt; [channel]]</strong></p>
<blockquote>
<div><p>Description: sets the flags required to access a directory</p>
<p>Returns: 0 on success; -1 or -3 on failure</p>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="miscellaneous-commands">
<h2>Miscellaneous Commands<a class="headerlink" href="#miscellaneous-commands" title="Permalink to this headline">¶</a></h2>
<p><strong>bind &lt;type&gt; &lt;flags&gt; &lt;keyword/mask&gt; [proc-name]</strong></p>
<blockquote>
<div><p>Description: You can use the 'bind' command to attach Tcl procedures to certain events. flags are the flags the user must have to trigger the event (if applicable). proc-name is the name of the Tcl procedure to call for this command (see below for the format of the procedure call). If the proc-name is omitted, no binding is added. Instead, the current binding is returned (if it's stackable, a list of the current bindings is returned).</p>
<p>Returns: name of the command that was added, or (if proc-name was omitted), a list of the current bindings for this command</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>unbind &lt;type&gt; &lt;flags&gt; &lt;keyword/mask&gt; &lt;proc-name&gt;</strong></p>
<blockquote>
<div><p>Description: removes a previously created bind</p>
<p>Returns: name of the command that was removed</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>binds [type/mask]</strong></p>
<blockquote>
<div><dl class="docutils">
<dt>Returns: a list of Tcl binds, each item in the list is a sublist of five elements:</dt>
<dd>{&lt;type&gt; &lt;flags&gt; &lt;name&gt; &lt;hits&gt; &lt;proc&gt;}</dd>
</dl>
<p>Module: core</p>
</div></blockquote>
<p><strong>logfile [&lt;modes&gt; &lt;channel&gt; &lt;filename&gt;]</strong></p>
<blockquote>
<div><p>Description: creates a new logfile, which will log the modes given for the channel listed. If no logfile is specified, a list of existing logfiles will be returned. &quot;*&quot; indicates all channels. You can also change the modes and channel of an existing logfile with this command. Entering a blank mode and channel (&quot;&quot;) makes the bot stop logging there.</p>
<p>Logfile flags:</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>b</td>
<td>information about bot linking and userfile sharing</td>
</tr>
<tr class="row-even"><td>c</td>
<td>commands</td>
</tr>
<tr class="row-odd"><td>d</td>
<td>misc debug information</td>
</tr>
<tr class="row-even"><td>h</td>
<td>raw share traffic</td>
</tr>
<tr class="row-odd"><td>j</td>
<td>joins, parts, quits, topic changes, and netsplits on the channel</td>
</tr>
<tr class="row-even"><td>k</td>
<td>kicks, bans, and mode changes on the channel</td>
</tr>
<tr class="row-odd"><td>m</td>
<td>private msgs, notices and ctcps to the bot</td>
</tr>
<tr class="row-even"><td>o</td>
<td>misc info, errors, etc (IMPORTANT STUFF)</td>
</tr>
<tr class="row-odd"><td>p</td>
<td>public text on the channel</td>
</tr>
<tr class="row-even"><td>r</td>
<td>raw incoming server traffic</td>
</tr>
<tr class="row-odd"><td>s</td>
<td>server connects, disconnects, and notices</td>
</tr>
<tr class="row-even"><td>t</td>
<td>raw botnet traffic</td>
</tr>
<tr class="row-odd"><td>v</td>
<td>raw outgoing server traffic</td>
</tr>
<tr class="row-even"><td>w</td>
<td>wallops (make sure the bot sets +w in init-server)</td>
</tr>
<tr class="row-odd"><td>x</td>
<td>file transfers and file-area commands</td>
</tr>
</tbody>
</table>
<p>Returns: filename of logfile created, or, if no logfile is specified, a list of logfiles such as: {mco * eggdrop.log} {jp #lame lame.log}</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>maskhost &lt;nick!user&#64;host&gt; [masktype]</strong></p>
<blockquote>
<div><p>Returns: masked hostmask for the string given according to the masktype (the default is 3).</p>
<p>Available types are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>0</td>
<td>*!user&#64;host</td>
</tr>
<tr class="row-even"><td>1</td>
<td>*!*user&#64;host</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>*!*&#64;host</td>
</tr>
<tr class="row-even"><td>3</td>
<td>*!*user&#64;*.host</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>*!*&#64;*.host</td>
</tr>
<tr class="row-even"><td>5</td>
<td>nick!user&#64;host</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>nick!*user&#64;host</td>
</tr>
<tr class="row-even"><td>7</td>
<td>nick!*&#64;host</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>nick!*user&#64;*.host</td>
</tr>
<tr class="row-even"><td>9</td>
<td>nick!*&#64;*.host</td>
</tr>
</tbody>
</table>
<p>You can also specify types from 10 to 19 which correspond to types
0 to 9, but instead of using a * wildcard to replace portions of the
host, only numbers in hostnames are replaced with the '?' wildcard.
Same is valid for types 20-29, but instead of '?', the '*' wildcard
will be used.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>timer &lt;minutes&gt; &lt;tcl-command&gt; [count]</strong></p>
<blockquote>
<div><p>Description: executes the given Tcl command after a certain number of minutes have passed. If count is specified, the command will be executed count times with the given interval in between. If you specify a count of 0, the timer will repeat until it's removed with killtimer or until the bot is restarted.</p>
<p>Returns: a timerID</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>utimer &lt;seconds&gt; &lt;tcl-command&gt; [count]</strong></p>
<blockquote>
<div><p>Description: executes the given Tcl command after a certain number of seconds have passed. If count is specified, the command will be executed count times with the given interval in between. If you specify a count of 0, the utimer will repeat until it's removed with killutimer or until the bot is restarted.</p>
<p>Returns: a timerID</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>timers</strong></p>
<blockquote>
<div><p>Returns: a list of active minutely timers. Each entry in the list contains the number of minutes left till activation, the command that will be executed, the timerID, and the remaining number of repeats.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>utimers</strong></p>
<blockquote>
<div><p>Returns: a list of active secondly timers. Each entry in the list contains the number of minutes left till activation, the command that will be executed, the timerID, and the remaining number of repeats.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>killtimer &lt;timerID&gt;</strong></p>
<blockquote>
<div><p>Description: removes a minutely timer from the list</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>killutimer &lt;timerID&gt;</strong></p>
<blockquote>
<div><p>Description: removes a secondly timer from the list</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>unixtime</strong></p>
<blockquote>
<div><p>Returns: a long integer which represents the number of seconds that have passed since 00:00 Jan 1, 1970 (GMT).</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>duration &lt;seconds&gt;</strong></p>
<blockquote>
<div><p>Returns: the number of seconds converted into years, weeks, days, hours, minutes, and seconds. 804600 seconds is turned into 1 week 2 days 7 hours 30 minutes.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>strftime &lt;formatstring&gt; [time]</strong></p>
<blockquote>
<div><p>Returns: a formatted string of time using standard strftime format. If time is specified, the value of the specified time is used. Otherwise, the current time is used.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>ctime &lt;unixtime&gt;</strong></p>
<blockquote>
<div><p>Returns: a formatted date/time string based on the current locale settings from the unixtime string given; for example &quot;Fri Aug 3 11:34:55 1973&quot;</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>myip</strong></p>
<blockquote>
<div><p>Returns: a long number representing the bot's IP address, as it might appear in (for example) a DCC request</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>rand &lt;limit&gt;</strong></p>
<blockquote>
<div><p>Returns: a random integer between 0 and limit-1</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>control &lt;idx&gt; &lt;command&gt;</strong></p>
<blockquote>
<div><p>Description: removes an idx from the party line and sends all future input to the Tcl command given. The command will be called with two parameters: the idx and the input text. The command should return 0 to indicate success and 1 to indicate that it relinquishes control of the user back to the bot. If the input text is blank (&quot;&quot;), it indicates that the connection has been dropped. Also, if the input text is blank, never call killdcc on it, as it will fail with &quot;invalid idx&quot;.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>sendnote &lt;from&gt; &lt;to[&#64;bot]&gt; &lt;message&gt;</strong></p>
<blockquote>
<div><p>Description: simulates what happens when one user sends a note to another</p>
<p>Returns:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>0</td>
<td>the send failed</td>
</tr>
<tr class="row-even"><td>1</td>
<td>the note was delivered locally or sent to another bot</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>the note was stored locally</td>
</tr>
<tr class="row-even"><td>3</td>
<td>the user's notebox is too full to store a note</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>a Tcl binding caught the note</td>
</tr>
<tr class="row-even"><td>5</td>
<td>the note was stored because the user is away</td>
</tr>
</tbody>
</table>
<p>Module: core</p>
</div></blockquote>
<p><strong>link [via-bot] &lt;bot&gt;</strong></p>
<blockquote>
<div><p>Description: attempts to link to another bot directly. If you specify a via-bot, it tells the via-bot to attempt the link.</p>
<p>Returns: 1 if the link will be attempted; 0 otherwise</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>unlink &lt;bot&gt;</strong></p>
<blockquote>
<div><p>Description: attempts to unlink a bot from the botnet</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>encrypt &lt;key&gt; &lt;string&gt;</strong></p>
<blockquote>
<div><p>Returns: encrypted string (using the currently loaded encryption module), encoded into ASCII using base-64</p>
<p>Module: encryption</p>
</div></blockquote>
<p><strong>decrypt &lt;key&gt; &lt;encrypted-base64-string&gt;</strong></p>
<blockquote>
<div><p>Returns: decrypted string (using the currently loaded encryption module)</p>
<p>Module: encryption</p>
</div></blockquote>
<p><strong>encpass &lt;password&gt;</strong></p>
<blockquote>
<div><p>Returns: encrypted string (using the currently loaded encryption module)</p>
<p>Module: encryption</p>
</div></blockquote>
<p><strong>die [reason]</strong></p>
<blockquote>
<div><p>Description: causes the bot to log a fatal error and exit completely. If no reason is given, &quot;EXIT&quot; is used.</p>
<p>Returns: none</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>unames</strong></p>
<blockquote>
<div><p>Returns: the current operating system the bot is using</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>dnslookup &lt;ip-address/hostname&gt; &lt;proc&gt; [[arg1] [arg2] ... [argN]]</strong></p>
<blockquote>
<div><p>Description: This issues an asynchronous dns lookup request. The command will block if dns module is not loaded; otherwise it will either return immediately or immediately call the specified proc (e.g. if the lookup is already cached).</p>
<p>As soon as the request completes, the specified proc will be called as follows:</p>
<blockquote>
<div>&lt;proc&gt; &lt;ipaddress&gt; &lt;hostname&gt; &lt;status&gt; [[arg1] [arg2] ... [argN]]</div></blockquote>
<p>status is 1 if the lookup was successful and 0 if it wasn't. All additional parameters (called arg1, arg2 and argN above) get appended to the proc's other parameters.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>md5 &lt;string&gt;</strong></p>
<blockquote>
<div><p>Returns: the 128 bit MD5 message-digest of the specified string</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>callevent &lt;event&gt;</strong></p>
<blockquote>
<div><p>Description: triggers the evnt bind manually for a certain event. You can call arbitrary events here, even ones that are not pre-defined by Eggdrop. For example: callevent rehash, or callevent myownevent123.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>traffic</strong></p>
<blockquote>
<div><p>Returns: a list of sublists containing information about the bot's traffic usage in bytes. Each sublist contains five elements: type, in-traffic today, in-traffic total, out-traffic today, out-traffic total (in that order).</p>
<p>Module: core</p>
</div></blockquote>
<dl class="docutils">
<dt><strong>modules</strong></dt>
<dd><p class="first">Returns: a list of sublists containing information about the bot's currently loaded modules. Each sublist contains three elements: module, version, and dependencies. Each dependency is also a sublist containing the module name and version.</p>
<p class="last">Module: core</p>
</dd>
</dl>
<p><strong>loadmodule &lt;module&gt;</strong></p>
<blockquote>
<div><p>Description: attempts to load the specified module.</p>
<p>Returns: &quot;Already loaded.&quot; if the module is already loaded, &quot;&quot; if successful, or the reason the module couldn't be loaded.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>unloadmodule &lt;module&gt;</strong></p>
<blockquote>
<div><p>Description: attempts to unload the specified module.</p>
<p>Returns: &quot;No such module&quot; if the module is not loaded, &quot;&quot; otherwise.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>loadhelp &lt;helpfile-name&gt;</strong></p>
<blockquote>
<div><p>Description: attempts to load the specified help file from the help/ directory.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>unloadhelp &lt;helpfile-name&gt;</strong></p>
<blockquote>
<div><p>Description: attempts to unload the specified help file.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>reloadhelp</strong></p>
<blockquote>
<div><p>Description: reloads the bot's help files.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>restart</strong></p>
<blockquote>
<div><p>Description: rehashes the bot, kills all timers, reloads all modules, and reconnects the bot to the next server in its list.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>rehash</strong></p>
<blockquote>
<div><p>Description: rehashes the bot</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>stripcodes &lt;strip-flags&gt; &lt;string&gt;</strong></p>
<blockquote>
<div><p>Description: strips specified control characters from the string given. strip-flags can be any combination of the following:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>c</td>
<td>remove all color codes</td>
</tr>
<tr class="row-even"><td>b</td>
<td>remove all boldface codes</td>
</tr>
<tr class="row-odd"><td>r</td>
<td>remove all reverse video codes</td>
</tr>
<tr class="row-even"><td>u</td>
<td>remove all underline codes</td>
</tr>
<tr class="row-odd"><td>a</td>
<td>remove all ANSI codes</td>
</tr>
<tr class="row-even"><td>g</td>
<td>remove all ctrl-g (bell) codes</td>
</tr>
<tr class="row-odd"><td>o</td>
<td>remove all ordinary codes (ctrl+o, terminates bold/color/..)</td>
</tr>
<tr class="row-even"><td>i</td>
<td>remove all italics codes</td>
</tr>
<tr class="row-odd"><td>*</td>
<td>remove all of the above</td>
</tr>
</tbody>
</table>
<p>Returns: the stripped string.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>matchaddr &lt;hostmask&gt; &lt;address&gt;</strong></p>
<blockquote>
<div><p>Description: checks if the address matches the hostmask given. The address should be in the form nick!user&#64;host.</p>
<p>Returns: 1 if the address matches the hostmask, 0 otherwise.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>matchcidr &lt;block&gt; &lt;address&gt; &lt;prefix&gt;</strong></p>
<blockquote>
<div><p>Description: performs a cidr match on the specified ip addresses. IPv6 is supported, if enabled at compile time.</p>
<p>Example: matchcidr 192.1.8.1.0 192.168.1.17 16</p>
<p>Returns: 1 if the address matches the block prefix, 0 otherwise.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>matchstr &lt;pattern&gt; &lt;string&gt;</strong></p>
<blockquote>
<div><p>Description: checks if pattern matches string. Only two wildcards are supported: '*' and '?'. Matching is case-insensitive. This command is intended as a simplified alternative to Tcl's string match.</p>
<p>Returns: 1 if the pattern matches the string, 0 if it doesn't.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>rfcequal &lt;string1&gt; &lt;string2&gt;</strong></p>
<blockquote>
<div><p>Description: Checks if two strings are equal. Case is ignored, and this uses RFC1459 matching {}|~ == []^, depending on the rfc_compliant setting.</p>
<p>Returns: 1 if equal, 0 if not.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>status [type]</strong></p>
<blockquote>
<div><p>Description: provides eggdrop status information similar to the .status command in partyline. The available types of information are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>cpu</td>
<td>total cpu time spent by eggdrop</td>
</tr>
<tr class="row-even"><td>mem</td>
<td>dynamically allocated memory excluding the Tcl interpreter</td>
</tr>
<tr class="row-odd"><td>cache</td>
<td>user entries cache hits (in %)</td>
</tr>
<tr class="row-even"><td>ipv6</td>
<td>shows whether IPv6 support was compiled in</td>
</tr>
</tbody>
</table>
<p>Returns: the requested information type or all information if type isn't specified. The format is a flat list of name-value pairs.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>istls &lt;idx&gt;</strong></p>
<blockquote>
<div><p>Description: checks if a connection is encrypted or cleartext. This command is available on TLS-enabled bots only.</p>
<p>Returns: 1 if the idx is a TLS connection, 0 if it's plaintext.</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>starttls &lt;idx&gt;</strong></p>
<blockquote>
<div><p>Description: establishes a secure (using TLS) connection over idx. The TLS connection should be first negotiated over the plaintext link, or using other means. Both parties must switch to TLS simultaneously. This command is available on TLS-enabled bots only.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
<p><strong>tlsstatus &lt;idx&gt;</strong></p>
<blockquote>
<div><p>Description: provides information about an established TLS connection This includes certificate and cipher information as well as protocol version. This command is available on TLS-enabled bots only.</p>
<p>Returns: a flat list of name-value pairs</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="global-variables">
<h2>Global Variables<a class="headerlink" href="#global-variables" title="Permalink to this headline">¶</a></h2>
<p>NOTE: All config file variables are also global.</p>
<p><strong>botnick</strong></p>
<blockquote>
<div><p>Value: the current nickname the bot is using (for example: &quot;Valis&quot;, &quot;Valis0&quot;, etc.)</p>
<p>Module: server</p>
</div></blockquote>
<p><strong>botname</strong></p>
<blockquote>
<div><p>Value: the current nick!user&#64;host that the server sees (for example: &quot;Valis!valis&#64;crappy.com&quot;)</p>
<p>Module: server</p>
</div></blockquote>
<p><strong>server</strong></p>
<blockquote>
<div><p>Value: the current server's real name (what server calls itself) and port bot is connected to (for example: &quot;irc.math.ufl.edu:6667&quot;) Note that this does not necessarily match the servers internet address.</p>
<p>Module: server</p>
</div></blockquote>
<dl class="docutils">
<dt><strong>serveraddress</strong></dt>
<dd><p class="first">Value: the current server's internet address (hostname or IP) and port bot is connected to. This will correspond to the entry in server list (for example: &quot;eu.undernet.org:6667&quot;). Note that this does not necessarily match the name server calls itself.</p>
<p class="last">Module: server</p>
</dd>
<dt><strong>version</strong></dt>
<dd><p class="first">Value: current bot version &quot;1.1.2+pl1 1010201&quot;; first item is the text version, to include a patch string if present, and second item is a numerical version</p>
<p class="last">Module: core</p>
</dd>
<dt><strong>numversion</strong></dt>
<dd><p class="first">Value: the current numeric bot version (for example: &quot;1010201&quot;). Numerical version is in the format of &quot;MNNRRPP&quot;, where:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>M</td>
<td>major release number</td>
</tr>
<tr class="row-even"><td>NN</td>
<td>minor release number</td>
</tr>
<tr class="row-odd"><td>RR</td>
<td>sub-release number</td>
</tr>
<tr class="row-even"><td>PP</td>
<td>patch level for that sub-release</td>
</tr>
</tbody>
</table>
<p class="last">Module: core</p>
</dd>
<dt><strong>uptime</strong></dt>
<dd><p class="first">Value: the unixtime value for when the bot was started</p>
<p class="last">Module: core</p>
</dd>
<dt><strong>server-online</strong></dt>
<dd><p class="first">Value: the unixtime value for when the bot connected to its current server</p>
<p class="last">Module: server</p>
</dd>
<dt><strong>lastbind</strong></dt>
<dd><p class="first">Value: the last command binding which was triggered. This allows you to identify which command triggered a Tcl proc.</p>
<p class="last">Module: core</p>
</dd>
<dt><strong>isjuped</strong></dt>
<dd><p class="first">Value: 1 if bot's nick is juped(437); 0 otherwise</p>
<p class="last">Module: server</p>
</dd>
<dt><strong>handlen</strong></dt>
<dd><p class="first">Value: the value of the HANDLEN define in src/eggdrop.h</p>
<p class="last">Module: core</p>
</dd>
<dt><strong>config</strong></dt>
<dd><p class="first">Value: the filename of the config file Eggdrop is currently using</p>
<p class="last">Module: core</p>
</dd>
</dl>
</div>
<div class="section" id="binds">
<h2>Binds<a class="headerlink" href="#binds" title="Permalink to this headline">¶</a></h2>
<p>You can use the 'bind' command to attach Tcl procedures to certain events.
For example, you can write a Tcl procedure that gets called every time a
user says &quot;danger&quot; on the channel.</p>
<p>Some bind types are marked as &quot;stackable&quot;. That means that you can bind
multiple commands to the same trigger. Normally, for example, a bind such
as 'bind msg - stop msg:stop' (which makes a msg-command &quot;stop&quot; call the
Tcl proc &quot;msg:stop&quot;) will overwrite any previous binding you had for the
msg command &quot;stop&quot;. With stackable bindings, like 'msgm' for example,
you can bind the same command to multiple procs. When the bind is triggered,
ALL of the Tcl procs that are bound to it will be called.</p>
<p>To remove a bind, use the 'unbind' command. For example, to remove the
bind for the &quot;stop&quot; msg command, use 'unbind msg - stop msg:stop'.</p>
<div class="section" id="bind-types">
<h3>Bind Types<a class="headerlink" href="#bind-types" title="Permalink to this headline">¶</a></h3>
<p>The following is a list of bind types and how they work. Below each bind type is the format of the bind command, the list of arguments sent to the Tcl proc, and an explanation.</p>
<ol class="arabic simple">
<li>MSG</li>
</ol>
<blockquote>
<div><p>bind msg &lt;flags&gt; &lt;command&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;text&gt;</p>
<p>Description: used for /msg commands. The first word of the user's msg is the command, and everything else becomes the text argument.</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>DCC</li>
</ol>
<blockquote>
<div><p>bind dcc &lt;flags&gt; &lt;command&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;idx&gt; &lt;text&gt;</p>
<p>Description: used for partyline commands; the command is the first word and everything else becomes the text argument. The idx is valid until the user disconnects. After that, it may be reused, so be careful about storing an idx for long periods of time.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>FIL</li>
</ol>
<blockquote>
<div><p>bind fil &lt;flags&gt; &lt;command&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;idx&gt; &lt;text&gt;</p>
<p>Description: the same as DCC, except this is triggered if the user is in the file area instead of the party line</p>
<p>Module: filesys</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>PUB</li>
</ol>
<blockquote>
<div><p>bind pub &lt;flags&gt; &lt;command&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt; &lt;text&gt;</p>
<p>Description: used for commands given on a channel. The first word becomes the command and everything else is the text argument.</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="5">
<li>MSGM (stackable)</li>
</ol>
<blockquote>
<div><p>bind msgm &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;text&gt;</p>
<p>Description: matches the entire line of text from a /msg with the mask. This is useful for binding Tcl procs to words or phrases spoken anywhere within a line of text. If the proc returns 1, Eggdrop will not log the message that triggered this bind. MSGM binds are processed before MSG binds. If the exclusive-binds setting is enabled, MSG binds will not be triggered by text that a MSGM bind has already handled.</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="6">
<li>PUBM (stackable)</li>
</ol>
<blockquote>
<div><p>bind pubm &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt; &lt;text&gt;</p>
<p>Description: just like MSGM, except it's triggered by things said on a channel instead of things /msg'd to the bot. The mask is matched against the channel name followed by the text and can contain wildcards. If the proc returns 1, Eggdrop will not log the message that triggered this bind. PUBM binds are processed before PUB binds. If the exclusive-binds setting is enabled, PUB binds will not be triggered by text that a PUBM bind has already handled.</p>
<dl class="docutils">
<dt>Examples:</dt>
<dd><dl class="first last docutils">
<dt>bind pubm * &quot;#eggdrop Hello*&quot; myProc</dt>
<dd>Listens on #eggdrop for any line that begins with &quot;Hello&quot;</dd>
<dt>bind pubm * &quot;% Hello*&quot; myProc</dt>
<dd>Listens on any channel for any line that begins with &quot;Hello&quot;</dd>
<dt>bind pubm * &quot;% !command&quot; myProc</dt>
<dd>Listens on any channel for a line that ONLY contains &quot;!command&quot;</dd>
</dl>
</dd>
</dl>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="7">
<li>NOTC (stackable)</li>
</ol>
<blockquote>
<div><p>bind notc &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;text&gt; &lt;dest&gt;</p>
<p>Description: dest will be a nickname (the bot's nickname, obviously) or a channel name. mask is matched against the entire text of the notice and can contain wildcards. It is considered a breach of protocol to respond to a /notice on IRC, so this is intended for internal use (logging, etc.) only. Note that server notices do not trigger the NOTC bind. If the proc returns 1, Eggdrop will not log the message that triggered this bind.</p>
<p>New Tcl procs should be declared as:</p>
<div class="highlight-python"><div class="highlight"><pre>proc notcproc {nick uhost hand text {dest &quot;&quot;}} {
  global botnick; if {$dest == &quot;&quot;} {set dest $botnick}
  ...
}
</pre></div>
</div>
<p>for compatibility.</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="8">
<li>JOIN (stackable)</li>
</ol>
<blockquote>
<div><p>bind join &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt;</p>
<p>Description: triggered by someone joining the channel. The mask in the bind is matched against &quot;#channel nick!user&#64;host&quot; and can contain wildcards.</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="9">
<li>PART (stackable)</li>
</ol>
<blockquote>
<div><p>bind part &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt; &lt;msg&gt;</p>
<p>Description: triggered by someone leaving the channel. The mask is matched against &quot;#channel nick!user&#64;host&quot; and can contain wildcards. If no part message is specified, msg will be set to &quot;&quot;.</p>
<p>New Tcl procs should be declared as:</p>
<div class="highlight-python"><div class="highlight"><pre>proc partproc {nick uhost hand chan {msg &quot;&quot;}} { ... }
</pre></div>
</div>
<p>for compatibility.</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="10">
<li>SIGN (stackable)</li>
</ol>
<blockquote>
<div><p>bind sign &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt; &lt;reason&gt;</p>
<p>Description: triggered by a signoff, or possibly by someone who got netsplit and never returned. The signoff message is the last argument to the proc. Wildcards can be used in the mask, which is matched against '#channel nick!user&#64;host'.</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="11">
<li>TOPC (stackable)</li>
</ol>
<blockquote>
<div><p>bind topc &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt; &lt;topic&gt;</p>
<p>Description: triggered by a topic change. mask can contain wildcards and is matched against '#channel &lt;new topic&gt;'.</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="12">
<li>KICK (stackable)</li>
</ol>
<blockquote>
<div><p>bind kick &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt; &lt;target&gt; &lt;reason&gt;</p>
<p>Description: triggered when someone is kicked off the channel. The mask is matched against '#channel target reason' where the target is the nickname of the person who got kicked (can contain wildcards). The proc is called with the nick, user&#64;host, and handle of the kicker, plus the channel, the nickname of the person who was kicked, and the reason.</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="13">
<li>NICK (stackable)</li>
</ol>
<blockquote>
<div><p>bind nick &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt; &lt;newnick&gt;</p>
<p>Description: triggered when someone changes nicknames. The mask is matched against '#channel newnick' and can contain wildcards. Channel is &quot;*&quot; if the user isn't on a channel (usually the bot not yet in a channel).</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="14">
<li>MODE (stackable)</li>
</ol>
<blockquote>
<div><p>bind mode &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt; &lt;mode-change&gt; &lt;target&gt;</p>
<p>Description: mode changes are broken down into their component parts before being sent here, so the &lt;mode-change&gt; will always be a single mode, such as &quot;+m&quot; or &quot;-o&quot;. target will show the argument of the mode change (for o/v/b/e/I) or &quot;&quot; if the set mode does not take an argument. The bot's automatic response to a mode change will happen AFTER all matching Tcl procs are called. The mask will be matched against '#channel +/-modes' and can contain wildcards.</p>
<p>If it is a server mode, nick will be &quot;&quot;, user&#64;host is the server name, and handle is *.</p>
<p>Note that &quot;target&quot; was added in 1.3.17 and that this will break Tcl scripts that were written for pre-1.3.17 Eggdrop that use the mode binding. Also, due to a typo, mode binds were broken completely in 1.3.17 but were fixed in 1.3.18. Mode bindings are not triggered at all in 1.3.17.</p>
<p>One easy example (from guppy) of how to support the &quot;target&quot; parameter in 1.3.18 and later and still remain compatible with older Eggdrop versions is:</p>
<p>Old script looks as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>bind mode - * mode_proc
proc mode_proc {nick uhost hand chan mode} { ... }
</pre></div>
</div>
<p>To make it work with 1.3.18+ and stay compatible with older bots, do:</p>
<div class="highlight-python"><div class="highlight"><pre>bind mode - * mode_proc_fix
proc mode_proc_fix {nick uhost hand chan mode {target &quot;&quot;}} {
  if {$target != &quot;&quot;} {append mode &quot; $target&quot;}
  mode_proc $nick $uhost $hand $chan $mode
}
proc mode_proc {nick uhost hand chan mode} { ... }
</pre></div>
</div>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="15">
<li>CTCP (stackable)</li>
</ol>
<blockquote>
<div><p>bind ctcp &lt;flags&gt; &lt;keyword&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;dest&gt; &lt;keyword&gt; &lt;text&gt;</p>
<p>Description: dest will be a nickname (the bot's nickname, obviously) or channel name. keyword is the ctcp command (which can contain wildcards), and text may be empty. If the proc returns 0, the bot will attempt its own processing of the ctcp command.</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="16">
<li>CTCR (stackable)</li>
</ol>
<blockquote>
<div><p>bind ctcr &lt;flags&gt; &lt;keyword&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;dest&gt; &lt;keyword&gt; &lt;text&gt;</p>
<p>Description: just like ctcp, but this is triggered for a ctcp-reply (ctcp embedded in a notice instead of a privmsg)</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="17">
<li>RAW (stackable)</li>
</ol>
<blockquote>
<div><p>bind raw &lt;flags&gt; &lt;keyword&gt; &lt;proc&gt;</p>
<p>procname &lt;from&gt; &lt;keyword&gt; &lt;text&gt;</p>
<p>Description: previous versions of Eggdrop required a special compile option to enable this binding, but it's now standard. The keyword is either a numeric, like &quot;368&quot;, or a keyword, such as &quot;PRIVMSG&quot;. &quot;from&quot; will be the server name or the source user (depending on the keyword); flags are ignored. The order of the arguments is identical to the order that the IRC server sends to the bot. The pre-processing  only splits it apart enough to determine the keyword. If the proc returns 1, Eggdrop will not process the line any further (this could cause unexpected behavior in some cases).</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="18">
<li>BOT</li>
</ol>
<blockquote>
<div><p>bind bot &lt;flags&gt; &lt;command&gt; &lt;proc&gt;</p>
<p>procname &lt;from-bot&gt; &lt;command&gt; &lt;text&gt;</p>
<p>Description: triggered by a message coming from another bot in the botnet. The first word is the command and the rest becomes the text argument; flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="19">
<li>CHON (stackable)</li>
</ol>
<blockquote>
<div><p>bind chon &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;idx&gt;</p>
<p>Description: when someone first enters the party-line area of the bot via dcc chat or telnet, this is triggered before they are connected to a chat channel (so, yes, you can change the channel in a 'chon' proc). mask is matched against the handle and supports wildcards. This is NOT triggered when someone returns from the file area, etc.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="20">
<li>CHOF (stackable)</li>
</ol>
<blockquote>
<div><p>bind chof &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;idx&gt;</p>
<p>Description: triggered when someone leaves the party line to disconnect from the bot. mask is matched against the handle and can contain wildcards. Note that the connection may have already been dropped by the user, so don't send output to the idx.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="21">
<li>SENT (stackable)</li>
</ol>
<blockquote>
<div><p>bind sent &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;nick&gt; &lt;path/to/file&gt;</p>
<p>Description: after a user has successfully downloaded a file from the bot, this binding is triggered. mask is matched against the handle of the user that initiated the transfer and supports wildcards. nick is the actual recipient (on IRC) of the file. The path is relative to the dcc directory (unless the file transfer was started by a script call to 'dccsend', in which case the path is the exact path given in the call to 'dccsend').</p>
<p>Module: transfer</p>
</div></blockquote>
<ol class="arabic simple" start="22">
<li>RCVD (stackable)</li>
</ol>
<blockquote>
<div><p>bind rcvd &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;nick&gt; &lt;path/to/file&gt;</p>
<p>Description: triggered after a user uploads a file successfully. mask is matched against the user's handle. nick is the IRC nickname that the file transfer originated from. The path is where the file ended up, relative to the dcc directory (usually this is your incoming dir).</p>
<p>Module: transfer</p>
</div></blockquote>
<ol class="arabic simple" start="23">
<li>CHAT (stackable)</li>
</ol>
<blockquote>
<div><p>bind chat &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;channel#&gt; &lt;text&gt;</p>
<p>Description: when a user says something on the botnet, it invokes this binding. Flags are ignored; handle could be a user on this bot (&quot;DronePup&quot;) or on another bot (&quot;Eden&#64;Wilde&quot;) and therefore you can't rely on a local user record. The mask is checked against the entire line of text and supports wildcards.</p>
<p>NOTE: If a BOT says something on the botnet, the BCST bind is invoked instead.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="24">
<li>LINK (stackable)</li>
</ol>
<blockquote>
<div><p>bind link &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;botname&gt; &lt;via&gt;</p>
<p>Description: triggered when a bot links into the botnet. botname is the botnetnick of the bot that just linked in; via is the bot it linked through. The mask is checked against the botnetnick of the bot that linked and supports wildcards. flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="25">
<li>DISC (stackable)</li>
</ol>
<blockquote>
<div><p>bind disc &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;botname&gt;</p>
<p>Description: triggered when a bot disconnects from the botnet for whatever reason. Just like the link bind, flags are ignored; mask is matched against the botnetnick of the bot that unlinked. Wildcards are supported in mask.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="26">
<li>SPLT (stackable)</li>
</ol>
<blockquote>
<div><p>bind splt &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt;</p>
<p>Description: triggered when someone gets netsplit on the channel. Be aware that this may be a false alarm (it's easy to fake a netsplit signoff message on some networks); mask may contain wildcards and is matched against '#channel nick!user&#64;host'. Anyone who is SPLT will trigger a REJN or SIGN within the next wait-split (defined in the config file) seconds.</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="27">
<li>REJN (stackable)</li>
</ol>
<blockquote>
<div><p>bind rejn &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt;</p>
<p>Description: someone who was split has rejoined. mask can contain wildcards, and is matched against '#channel nick!user&#64;host'.</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="28">
<li>FILT (stackable)</li>
</ol>
<blockquote>
<div><p>bind filt &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;idx&gt; &lt;text&gt;</p>
<p>Description: party line and file system users have their text sent through filt before being processed. If the proc returns a blank string, the text is considered parsed. Otherwise, the bot will use the text returned from the proc and continue parsing that</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="29">
<li>NEED (stackable)</li>
</ol>
<blockquote>
<div><p>bind need &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;channel&gt; &lt;type&gt;</p>
<p>Description: this bind is triggered on certain events, like when the bot needs operator status or the key for a channel. The types are: op, unban, invite, limit, and key; the mask is matched against '#channel type' and can contain wildcards. flags are ignored.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>bind need - &quot;% op&quot; needop &lt; handles only need op
bind need - &quot;*&quot; needall   &lt; handles all needs
</pre></div>
</div>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="30">
<li>FLUD (stackable)</li>
</ol>
<blockquote>
<div><p>bind flud &lt;flags&gt; &lt;type&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;type&gt; &lt;channel&gt;</p>
<p>Description: any floods detected through the flood control settings (like 'flood-ctcp') are sent here before processing. If the proc returns 1, no further action is taken on the flood; if the proc returns 0, the bot will do its normal &quot;punishment&quot; for the flood. The flood types are: pub, msg, join, or ctcp (and can be masked to &quot;*&quot; for the bind); flags are ignored.</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="31">
<li>NOTE (stackable)</li>
</ol>
<blockquote>
<div><p>bind note &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;from&gt; &lt;to&gt; &lt;text&gt;</p>
<p>Description: incoming notes (either from the party line, someone on IRC, or someone on another bot on the botnet) are checked against these binds before being processed. The mask is matched against the receiving handle and supports wildcards. If the proc returns 1, Eggdrop will not process the note any further. Flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="32">
<li>ACT (stackable)</li>
</ol>
<blockquote>
<div><p>bind act &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;channel#&gt; &lt;action&gt;</p>
<p>Description: when someone does an action on the botnet, it invokes this binding. flags are ignored; the mask is matched against the text of the action and can support wildcards.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="33">
<li>WALL (stackable)</li>
</ol>
<blockquote>
<div><p>bind wall &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;from&gt; &lt;msg&gt;</p>
<p>Description: when the bot receives a wallops, it invokes this binding. flags are ignored; the mask is matched against the text of the wallops msg. Note that RFC shows the server name as a source of the message, whereas many IRCds send the nick!user&#64;host of the actual sender, thus, Eggdrop will not parse it at all, but simply pass it to bind in its original form. If the proc returns 1,           Eggdrop will not log the message that triggered this bind.</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="34">
<li>BCST (stackable)</li>
</ol>
<blockquote>
<div><p>bind bcst &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;botname&gt; &lt;channel#&gt; &lt;text&gt;</p>
<p>Description: when a bot broadcasts something on the botnet (see 'dccbroadcast' above), it invokes this binding. flags are ignored; the mask is matched against the message text and can contain wildcards. 'channel' argument will always be '-1' since broadcasts are not directed to any partyline channel.</p>
<p>It is also invoked when a BOT (not a person, as with the CHAT bind) 'says' something on a channel. In this case, the 'channel' argument will be a valid channel, and not '-1'.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="35">
<li>CHJN (stackable)</li>
</ol>
<blockquote>
<div><p>bind chjn &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;botname&gt; &lt;handle&gt; &lt;channel#&gt; &lt;flag&gt; &lt;idx&gt; &lt;user&#64;host&gt;</p>
<p>Description: when someone joins a botnet channel, it invokes this binding. The mask is matched against the channel and can contain wildcards. flag is one of: * (owner), + (master), &#64; (op), or % (botnet master). Flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="36">
<li>CHPT (stackable)</li>
</ol>
<blockquote>
<div><p>bind chpt &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;botname&gt; &lt;handle&gt; &lt;idx&gt; &lt;channel#&gt;</p>
<p>Description: when someone parts a botnet channel, it invokes this binding. The mask is matched against the channel and can contain wildcards. Flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="37">
<li>TIME (stackable)</li>
</ol>
<blockquote>
<div><p>bind time &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;minute 00-59&gt; &lt;hour 00-23&gt; &lt;day 01-31&gt; &lt;month 00-11&gt; &lt;year 0000-9999&gt;</p>
<p>Description: allows you to schedule procedure calls at certain times. mask matches 5 space separated integers of the form: &quot;minute hour day month year&quot;. The month var starts at 00 (Jan) and ends at 11 (Dec). Minute, hour, day, month have a zero padding so they are exactly two characters long; year is four characters. Flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="38">
<li>AWAY (stackable)</li>
</ol>
<blockquote>
<div><p>bind away &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;botname&gt; &lt;idx&gt; &lt;text&gt;</p>
<p>Description: triggers when a user goes away or comes back on the botnet. text is the reason than has been specified (text is &quot;&quot; when returning). mask is matched against the botnet-nick of the bot the user is connected to and supports wildcards. flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="39">
<li>LOAD (stackable)</li>
</ol>
<blockquote>
<div><p>bind load &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;module&gt;</p>
<p>Description: triggers when a module is loaded. mask is matched against the name of the loaded module and supports wildcards; flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="40">
<li>UNLD (stackable)</li>
</ol>
<blockquote>
<div><p>bind unld &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;module&gt;</p>
<p>Description: triggers when a module is unloaded. mask is matched against the name of the unloaded module and supports wildcards;
flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="41">
<li>NKCH (stackable)</li>
</ol>
<blockquote>
<div><p>bind nkch &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;oldhandle&gt; &lt;newhandle&gt;</p>
<p>Description: triggered whenever a local user's handle is changed (in the userfile). mask is matched against the user's old handle and can contain wildcards; flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="42">
<li>EVNT (stackable)</li>
</ol>
<blockquote>
<div><p>bind evnt &lt;flags&gt; &lt;type&gt; &lt;proc&gt;</p>
<p>procname &lt;type&gt;</p>
<p>Description: triggered whenever one of these events happen. flags are ignored. Pre-defined events triggered by Eggdrop are:</p>
<div class="highlight-python"><div class="highlight"><pre>sighup            - called on a kill -HUP &lt;pid&gt;
sigterm           - called on a kill -TERM &lt;pid&gt;
sigill            - called on a kill -ILL &lt;pid&gt;
sigquit           - called on a kill -QUIT &lt;pid&gt;
save              - called when the userfile is saved
rehash            - called just after a rehash
prerehash         - called just before a rehash
prerestart        - called just before a restart
logfile           - called when the logs are switched daily
loaded            - called when the bot is done loading
userfile-loaded   - called after userfile has been loaded
connect-server    - called just before we connect to an IRC server
preinit-server    - called immediately when we connect to the server
init-server       - called when we actually get on our IRC server
disconnect-server - called when we disconnect from our IRC server
fail-server       - called when an IRC server fails to respond
</pre></div>
</div>
<p>Note that Tcl scripts can trigger arbitrary events, including ones that are not pre-defined or used by Eggdrop.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="43">
<li>LOST (stackable)</li>
</ol>
<blockquote>
<div><p>bind lost &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;nick&gt; &lt;path&gt; &lt;bytes-transferred&gt; &lt;length-of-file&gt;</p>
<p>Description: triggered when a DCC SEND transfer gets lost, such as when the connection is terminated before all data was successfully sent/received. This is typically caused by a user abort.</p>
<p>Module: transfer</p>
</div></blockquote>
<ol class="arabic simple" start="44">
<li>TOUT (stackable)</li>
</ol>
<blockquote>
<div><p>bind tout &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;nick&gt; &lt;path&gt; &lt;bytes-transferred&gt; &lt;length-of-file&gt;</p>
<p>Description: triggered when a DCC SEND transfer times out. This may either happen because the dcc connection was not accepted or because the data transfer stalled for some reason.</p>
<p>Module: transfer</p>
</div></blockquote>
<ol class="arabic simple" start="45">
<li>OUT (stackable)</li>
</ol>
<blockquote>
<div><p>bind out &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;queue&gt; &lt;message&gt; &lt;queued|sent&gt;</p>
<p>Description: triggered whenever output is sent to the server. Normally the event will occur twice for each line sent: once before entering a server queue and once after the message is actually sent. This allows for more flexible logging of server output and introduces the ability to cancel the message. Mask is matched against &quot;queue status&quot;, where status is either 'queued' or 'sent'. Queues are: mode, server, help, noqueue. noqueue is only used by the putnow tcl command.</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="46">
<li>CRON (stackable)</li>
</ol>
<blockquote>
<div><p>bind cron &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;minute 0-59&gt; &lt;hour 0-23&gt; &lt;day 1-31&gt; &lt;month 1-12&gt; &lt;weekday 0-6&gt;</p>
<p>Description: similar to bind TIME, but the mask is evaluated as a cron expression, e.g. &quot;16/2 */2 5-15 7,8,9 4&quot;. It can contain up to five fields: minute, hour, day, month, weekday; delimited by whitespace. Week days are represented as 0-6, where Sunday can be either 0 or 7. Symbolic names are not supported. The bind will be triggered if the mask matches all of the fields, except that if both day and weekday are not '*', only one of them is required to match. If any number of fields are omitted at the end, the match will proceed as if they were '*'. All cron operators are supported. Please refer to the crontab manual for their meanings. Flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="47">
<li>LOG (stackable)</li>
</ol>
<blockquote>
<div><p>bind log &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;level&gt; &lt;channel&gt; &lt;message&gt;</p>
<p>Description: triggered whenever a message is sent to a log. The mask is matched against &quot;channel text&quot;. The level argument to the proc will contain the level(s) the message is sent to, or '*' if the message is sent to all log levels at once. If the message wasn't sent to a specific channel, channel will be set to '*'.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="48">
<li>TLS (stackable)</li>
</ol>
<blockquote>
<div><p>bind tls &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;idx&gt;</p>
<p>Description: triggered for tcp connections when a ssl handshake has completed and the connection is secured. The mask is matched against the idx of the connection.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="49">
<li>DIE (stackable)</li>
</ol>
<blockquote>
<div><p>bind die &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;shutdownreason&gt;</p>
<p>Description: triggered when eggdrop is about to die. The mask is matched against the shutdown reason. The bind won't be triggered if the bot crashes or is being terminated by SIGKILL.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="return-values">
<h3>Return Values<a class="headerlink" href="#return-values" title="Permalink to this headline">¶</a></h3>
<p>Several bindings pay attention to the value you return from the proc(using 'return &lt;value&gt;'). Usually, they expect a 0 or 1, and returning an empty return is interpreted as a 0. Be aware if you omit the return statement, the result of the last Tcl command executed will be returned by the proc. This will not likely produce the results you intended (this is a &quot;feature&quot; of Tcl).</p>
<p>Here's a list of the bindings that use the return value from procs they trigger:</p>
<ol class="arabic">
<li><p class="first">MSG   Return 1 to make Eggdrop log the command as:</p>
<div class="highlight-python"><div class="highlight"><pre>(nick!user@host) !handle! command
</pre></div>
</div>
</li>
<li><p class="first">DCC   Return 1 to make Eggdrop log the command as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1">#handle# command</span>
</pre></div>
</div>
</li>
<li><p class="first">FIL   Return 1 to make Eggdrop log the command as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c1">#handle# files: command</span>
</pre></div>
</div>
</li>
<li><p class="first">PUB   Return 1 to make Eggdrop log the command as:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;&lt;nick&gt;&gt; !handle! command
</pre></div>
</div>
</li>
<li><p class="first">CTCP  Return 1 to ask the bot not to process the CTCP command on its own. Otherwise, it would send its own response to the CTCP (possibly an error message if it doesn't know how to deal with it).</p>
</li>
<li><p class="first">FILT  Return &quot;&quot; to indicate the text has been processed, and the bot should just ignore it. Otherwise, it will treat the text like any other.</p>
</li>
<li><p class="first">FLUD  Return 1 to ask the bot not to take action on the flood. Otherwise it will do its normal punishment.</p>
</li>
<li><p class="first">RAW   Return 1 to ask the bot not to process the server text. This can affect the bot's performance by causing it to miss things that it would normally act on -- you have been warned.</p>
</li>
<li><p class="first">CHON  Return 1 to ask the bot not to process the partyline join event.</p>
</li>
<li><p class="first">CHOF  Return 1 to ask the bot not to process the partyline part event.</p>
</li>
<li><p class="first">WALL  Return 1 to make Eggdrop not log the message that triggered this bind.</p>
</li>
<li><p class="first">NOTE  Return 1 to make Eggdrop not process the note any further. This includes stacked note bindings that would be processed after this one, as well as the built-in eggdrop note handling routines.</p>
</li>
<li><p class="first">MSGM  Return 1 to make Eggdrop not log the message that triggered this bind.</p>
</li>
<li><p class="first">PUBM  Return 1 to make Eggdrop not log the message that triggered this bind.</p>
</li>
<li><p class="first">NOTC  Return 1 to make Eggdrop not log the message that triggered this bind.</p>
</li>
<li><p class="first">OUT   Return 1 to make Eggdrop drop the message instead of sending it. Only meaningful for messages with status &quot;queued&quot;.</p>
</li>
<li><p class="first">EVNT  Return 1 to make Eggdrop not to take the default action for the event. Used for signal type events, ignored for others.</p>
</li>
<li><p class="first">TLS   Return 1 to disable verbose ssl information for the handshake.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="control-procedures">
<h2>Control Procedures<a class="headerlink" href="#control-procedures" title="Permalink to this headline">¶</a></h2>
<p>Using the 'control' command, you can put a DCC connection (or outgoing
TCP connection) in control of a script. All text received from the
connection is sent to the proc you specify. All outgoing text should
be sent with 'putdcc'.</p>
<p>The control procedure is called with these parameters:</p>
<div class="highlight-python"><div class="highlight"><pre>procname &lt;idx&gt; &lt;input-text&gt;
</pre></div>
</div>
<p>This allows you to use the same proc for several connections. The
idx will stay the same until the connection is dropped. After that,
it will probably get reused for a later connection.</p>
<p>To indicate that the connection has closed, your control procedure
will be called with blank text (the input-text will be &quot;&quot;). This
is the only time it will ever be called with &quot;&quot; as the text, and it
is the last time your proc will be called for that connection. Don't
call killdcc on the idx when text is blank, it will always fail with
&quot;invalid idx&quot;.</p>
<p>If you want to hand control of your connection back to Eggdrop, your
proc should return 1. Otherwise, return 0 to retain control.</p>
</div>
<div class="section" id="tcp-connections">
<h2>TCP Connections<a class="headerlink" href="#tcp-connections" title="Permalink to this headline">¶</a></h2>
<p>Eggdrop allows you to make two types of TCP (&quot;telnet&quot;) connections:
outgoing and incoming. For an outgoing connection, you specify the
remote host and port to connect to. For an incoming connection, you
specify a port to listen on.</p>
<p>All of the connections are <em>event driven</em>. This means that the bot will
trigger your procs when something happens on the connection, and your
proc is expected to return as soon as possible. Waiting in a proc for
more input is a no-no.</p>
<p>To initiate an outgoing connection, use:</p>
<div class="highlight-python"><div class="highlight"><pre>set idx [connect &lt;hostname&gt; &lt;[+]port&gt;]
</pre></div>
</div>
<p>For SSL connections, prefix the port with a plus sign.</p>
<p>$idx now contains a new DCC entry for the outgoing connection.</p>
<p>All connections use non-blocking (commonly called &quot;asynchronous&quot;,
which is a misnomer) I/O. Without going into a big song and dance
about asynchronous I/O, what this means to you is:</p>
<blockquote>
<div><ul class="simple">
<li>assume the connection succeeded immediately</li>
<li>if the connection failed, an EOF will arrive for that idx</li>
</ul>
</div></blockquote>
<p>The only time a 'connect' will return an error is if you give it a
hostname that can't be resolved (this is considered a &quot;DNS error&quot;).
Otherwise, it will appear to have succeeded. If the connection failed,
you will immediately get an EOF.</p>
<p>Right after doing a 'connect' call, you should set up a 'control' for
the new idx (see the section above). From then on, the connection will
act just like a normal DCC connection that has been put under the control
of a script. If you ever return &quot;1&quot; from the control proc (indicating
that you want control to return to Eggdrop), the bot will just close the
connection and dispose of it. Other commands that work on normal DCC
connections, like 'killdcc' and 'putdcc', will work on this idx, too.
The 'killdcc' command will fail with &quot;invalid idx&quot; if you attempt to use
it on a closed socket.</p>
<p>To create a listen port, use:</p>
<div class="highlight-python"><div class="highlight"><pre>listen &lt;[+]port&gt; script &lt;proc&gt;
</pre></div>
</div>
<p>By default, a listen port will allow both plaintext and SSL connections.
To restrict a port to allow only SSL connections, prefix the port with a
plus sign.</p>
<p>Procs should be declared as:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;procname&gt; &lt;newidx&gt;
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre>listen 6687 script listen:grab

proc listen:grab {newidx} {
  control $newidx listen:control
}
</pre></div>
</div>
<p>When a new connection arrives in port 6687, Eggdrop will create a new idx for the connection. That idx is sent to 'listen:grab'. The proc immediately puts this idx under control. Once 'listen:grab' has been called, the idx behaves exactly like an outgoing connection would.</p>
<p>Secure connection can be also established after a connection is active. You can connect/listen normally and switch later using the 'starttls' command. Your script should first inform the other side of the connection that it wants to switch to SSL. How to do this is application specific.</p>
<p>The best way to learn how to use these commands is to find a script that uses them and follow it carefully. However, hopefully this has given you a good start.</p>
</div>
<div class="section" id="match-characters">
<h2>Match Characters<a class="headerlink" href="#match-characters" title="Permalink to this headline">¶</a></h2>
<p>Many of the bindings allow match characters in the arguments. Here
are the four special characters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="94%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>?</td>
<td>matches any single character</td>
</tr>
<tr class="row-even"><td>*</td>
<td>matches 0 or more characters of any type</td>
</tr>
<tr class="row-odd"><td>%</td>
<td>matches 0 or more non-space characters (can be used to match a single
word) (This character only works in binds, not in regular matching)</td>
</tr>
<tr class="row-even"><td>~</td>
<td>matches 1 or more space characters (can be used for whitespace between
words) (This char only works in binds, not in regluar matching)</td>
</tr>
</tbody>
</table>
<blockquote>
<div>Copyright (C) 1999 - 2017 Eggheads Development Team</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../installAndSetup/readme.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installAndSetup/install.html">Installing Eggdrop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installAndSetup/faq.html">Frequently Asked Questions</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About Eggdrop</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Eggdrop Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="users.html">Users and Flags</a></li>
<li class="toctree-l1"><a class="reference internal" href="partyline.html">The Party Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="bans.html">Bans, Invites, and Exempts</a></li>
<li class="toctree-l1"><a class="reference internal" href="botnet.html">Botnet Sharing and Linking</a></li>
<li class="toctree-l1"><a class="reference internal" href="patch.html">Patch How-To</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Eggdrop Tcl Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipv6.html">IPv6 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="tls.html">TLS support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/core.html">Eggdrop Core Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/modules.html">Eggdrop Module Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/assoc.html">Assoc Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/blowfish.html">Blowfish Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/channels.html">Channels Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/compress.html">Compress Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/console.html">Console Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/ctcp.html">CTCP Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/dns.html">DNS Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/filesys.html">Filesys Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/irc.html">IRC Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/notes.html">Notes Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/seen.html">Seen Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/server.html">Server Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/share.html">Share Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/transfer.html">Transfer Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/uptime.html">Uptime Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/woobie.html">Woobie Module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendices/known-probs.html">Known Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/tricks.html">Eggdrop Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/text-sub.html">Textfile Substitutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/weird-msgs.html">Weird Messages That Get Logged</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/first-script.html">Your First Eggdrop Script</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="../search.html" method="get">
            <input type="text" name="q" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms or a module, class or function name.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="patch.html" title="Patch How-To"
             >previous</a> |
          <a href="ipv6.html" title="IPv6 support"
             >next</a>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &copy; Copyright 2017, Eggheads.
      Last updated on Mar 02, 2017.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>