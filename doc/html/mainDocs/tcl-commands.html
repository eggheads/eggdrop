
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Eggdrop Tcl Commands &#8212; Eggdrop 1.9.0 documentation</title>
    <link rel="stylesheet" href="../_static/eggdrop.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="IPv6 support" href="ipv6.html" />
    <link rel="prev" title="Patch How-To" href="patch.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
          <p class="logo"><a href="../index.html">
            <img class="logo" src="../_static/eggman.png.gif" alt="Logo"/>
          </a></p>
        <div class="headertitle"><a
          href="../index.html">Eggdrop 1.9.0 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="patch.html" title="Patch How-To"
             accesskey="P">previous</a> |
          <a href="ipv6.html" title="IPv6 support"
             accesskey="N">next</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="sidebar">
          
          <h3>Table of Contents</h3>
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../installAndSetup/readme.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installAndSetup/install.html">Installing Eggdrop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installAndSetup/faq.html">Frequently Asked Questions</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About Eggdrop</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Eggdrop Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="users.html">Users and Flags</a></li>
<li class="toctree-l1"><a class="reference internal" href="partyline.html">The Party Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="bans.html">Bans, Invites, and Exempts</a></li>
<li class="toctree-l1"><a class="reference internal" href="botnet.html">Botnet Sharing and Linking</a></li>
<li class="toctree-l1"><a class="reference internal" href="patch.html">Patch How-To</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Eggdrop Tcl Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipv6.html">IPv6 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="tls.html">TLS support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/core.html">Eggdrop Core Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/modules.html">Eggdrop Module Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/assoc.html">Assoc Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/blowfish.html">Blowfish Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/channels.html">Channels Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/compress.html">Compress Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/console.html">Console Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/ctcp.html">CTCP Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/dns.html">DNS Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/filesys.html">Filesys Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/ident.html">Ident Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/irc.html">IRC Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/notes.html">Notes Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/seen.html">Seen Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/server.html">Server Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/share.html">Share Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/transfer.html">Transfer Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/uptime.html">Uptime Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/woobie.html">Woobie Module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendices/known-probs.html">Known Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/tricks.html">Eggdrop Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/text-sub.html">Textfile Substitutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/weird-msgs.html">Weird Messages That Get Logged</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/first-script.html">Your First Eggdrop Script</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="../search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
            </form>
          </div>

        </div>
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>Eggdrop Tcl Commands
Last revised: December 14, 2017</p>
<div class="section" id="eggdrop-tcl-commands">
<h1>Eggdrop Tcl Commands<a class="headerlink" href="#eggdrop-tcl-commands" title="Permalink to this headline">¶</a></h1>
<p>This is an exhaustive list of all the Tcl commands added to Eggdrop. All
of the normal Tcl built-in commands are still there, of course, but you
can also use these to manipulate features of the bot. They are listed
according to category.</p>
<p>This list is accurate for Eggdrop v1.9.0. Scripts written for v1.3, v1.4,
1.6 and 1.8 series of Eggdrop should probably work with a few minor modifications
depending on the script. Scripts which were written for v0.9, v1.0, v1.1
or v1.2 will probably not work without modification. Commands which have
been changed in this version of Eggdrop (or are just new commands) are
marked with vertical bars (|) on the left.</p>
<div class="section" id="output-commands">
<h2>Output Commands<a class="headerlink" href="#output-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="putserv-text-options">
<h3>putserv &lt;text&gt; [options]<a class="headerlink" href="#putserv-text-options" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sends text to the server, like ‘.dump’ (intended for direct server commands); output is queued so that the bot won’t flood itself off the server.</p>
<p>Options:
-next    push messages to the front of the queue
-normal  no effect</p>
<p>Returns: nothing</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="puthelp-text-options">
<h3>puthelp &lt;text&gt; [options]<a class="headerlink" href="#puthelp-text-options" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sends text to the server, like ‘putserv’, but it uses a different queue intended for sending messages to channels or people.</p>
<p>Options:
-next    push messages to the front of the queue
-normal  no effect</p>
<p>Returns: nothing</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="putquick-text-options">
<h3>putquick &lt;text&gt; [options]<a class="headerlink" href="#putquick-text-options" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sends text to the server, like ‘putserv’, but it uses a different (and faster) queue.</p>
<p>Options:
-next    push messages to the front of the queue
-normal  no effect</p>
<p>Returns: nothing</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="putnow-text-oneline">
<h3>putnow &lt;text&gt; [-oneline]<a class="headerlink" href="#putnow-text-oneline" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sends text to the server immediately, bypassing all queues. Use with caution, as the bot may easily flood itself off the server.</p>
<p>Options:
-oneline  send text up to the first r or n, discarding the rest</p>
<p>Returns: nothing</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="putkick-channel-nick-nick-reason">
<h3>putkick &lt;channel&gt; &lt;nick,nick,…&gt; [reason]<a class="headerlink" href="#putkick-channel-nick-nick-reason" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sends kicks to the server and tries to put as many nicks into one kick command as possible.</p>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="putlog-text">
<h3>putlog &lt;text&gt;<a class="headerlink" href="#putlog-text" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: logs &lt;text&gt; to the logfile and partyline if the ‘misc’ flag (o) is active via the ‘logfile’ config file setting and the ‘.console’ partyline setting, respectively.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="putcmdlog-text">
<h3>putcmdlog &lt;text&gt;<a class="headerlink" href="#putcmdlog-text" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: logs &lt;text&gt; to the logfile and partyline if the ‘cmds’ flag (c) is active via the ‘logfile’ config file setting and the ‘.console’ partyline setting, respectively.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="putxferlog-text">
<h3>putxferlog &lt;text&gt;<a class="headerlink" href="#putxferlog-text" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: logs &lt;text&gt; to the logfile and partyline if the ‘files’ flag (x) is active via the ‘logfile’ config file setting and the ‘.console’ partyline setting, respectively.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="putloglev-flag-s-channel-text">
<h3>putloglev &lt;flag(s)&gt; &lt;channel&gt; &lt;text&gt;<a class="headerlink" href="#putloglev-flag-s-channel-text" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: logs &lt;text&gt; to the logfile and partyline at the log level of the specified flag. Use “*” in lieu of a flag to indicate all log levels.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="dumpfile-nick-filename">
<h3>dumpfile &lt;nick&gt; &lt;filename&gt;<a class="headerlink" href="#dumpfile-nick-filename" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: dumps file from the help/text directory to a user on IRC via msg (one line per msg). The user has no flags, so the flag bindings won’t work within the file.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="queuesize-queue">
<h3>queuesize [queue]<a class="headerlink" href="#queuesize-queue" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: the number of messages in all queues. If a queue is specified, only the size of this queue is returned. Valid queues are: mode, server, help.</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="clearqueue-queue">
<h3>clearqueue &lt;queue&gt;<a class="headerlink" href="#clearqueue-queue" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes all messages from a queue. Valid arguments are: mode, server, help, or all.</p>
<p>Returns: the number of deleted lines from the specified queue.</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="cap-active-available-raw-arg">
<h3>cap &lt;active/available/raw&gt; [arg]<a class="headerlink" href="#cap-active-available-raw-arg" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: displays CAP status or sends a raw CAP command to the server. “available” will list the capabilities supported by the server, “active” will list the capabilities Eggdrop has negotiated with the server, and raw will send a raw CAP command to the server. If sending a raw command, it must be submitted in arg as a single string. For example, to request capabilities foo and bar, you would use [cap raw “REQ :foo bar”].</p>
<p>Returns: nothing</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="addserver-ip-host-port-password">
<h3>addserver &lt;ip/host&gt; [port [password]]<a class="headerlink" href="#addserver-ip-host-port-password" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: adds a server to the list of servers Eggdrop will connect to. A port value is required if password is to be specified.</p>
<p>Returns: nothing</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="delserver-ip-host-port">
<h3>delserver &lt;ip/host&gt; [[+]port]<a class="headerlink" href="#delserver-ip-host-port" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>Description: removes a server from the list of servers Eggdrop will connect to. If no port is specified, Eggdrop will remove the first server matching the ip or hostname provided. The SSL status (+) of the provided port is matched against as well (ie, 7000 is not the same as +7000).</div></blockquote>
</div>
</div>
<div class="section" id="user-record-manipulation-commands">
<h2>User Record Manipulation Commands<a class="headerlink" href="#user-record-manipulation-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="countusers">
<h3>countusers<a class="headerlink" href="#countusers" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: number of users in the bot’s database</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="validuser-handle">
<h3>validuser &lt;handle&gt;<a class="headerlink" href="#validuser-handle" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if a user by that name exists; 0 otherwise</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="finduser-nick-user-host">
<h3>finduser &lt;<a class="reference external" href="mailto:nick!user&#37;&#52;&#48;host">nick!user<span>&#64;</span>host</a>&gt;<a class="headerlink" href="#finduser-nick-user-host" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: finds the user record which most closely matches the given nick!user&#64;host</p>
<p>Returns: the handle found, or “*” if none</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="userlist-flags">
<h3>userlist [flags]<a class="headerlink" href="#userlist-flags" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of users on the bot. You can use the flag matching system here ([global]{&amp;/|}[chan]{&amp;/|}[bot]). ‘&amp;’ specifies “and”; ‘|’ specifies “or”.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="passwdok-handle-pass">
<h3>passwdok &lt;handle&gt; &lt;pass&gt;<a class="headerlink" href="#passwdok-handle-pass" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: checks the password given against the user’s password. Check against the password “-” to find out if a user has no password set.</p>
<p>Returns: 1 if the password matches for that user; 0 otherwise. Or if we are checking against the password “-“: 1 if the user has no password set; 0 otherwise.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="getuser-handle-entry-type-extra-info">
<h3>getuser &lt;handle&gt; [entry-type] [extra info]<a class="headerlink" href="#getuser-handle-entry-type-extra-info" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: an interface to the new generic userfile support. Without an entry-type, it returns a flat key/value list (dict) of all set entries. Valid entry types are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>BOTFL</td>
<td>returns the current bot-specific flags for the user (bot-only)</td>
</tr>
<tr class="row-even"><td>BOTADDR</td>
<td>returns a list containing the bot’s address, bot listen port, and user listen port</td>
</tr>
<tr class="row-odd"><td>HOSTS</td>
<td>returns a list of hosts for the user</td>
</tr>
<tr class="row-even"><td>LASTON</td>
<td>returns a list containing the unixtime last seen and the last seen place.
LASTON #channel returns the time last seen time for the channel or 0 if no info
exists.</td>
</tr>
<tr class="row-odd"><td>INFO</td>
<td>returns the user’s global info line</td>
</tr>
<tr class="row-even"><td>XTRA</td>
<td>returns the user’s XTRA info</td>
</tr>
<tr class="row-odd"><td>COMMENT</td>
<td>returns the master-visible only comment for the user</td>
</tr>
<tr class="row-even"><td>HANDLE</td>
<td>returns the user’s handle as it is saved in the userfile</td>
</tr>
<tr class="row-odd"><td>PASS</td>
<td>returns the user’s encrypted password</td>
</tr>
</tbody>
</table>
<p>For additional custom user fields, to include the deprecated “EMAIL” and “URL” fields, reference scripts/userinfo.tcl.</p>
<p>Returns: info specific to each entry-type</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="setuser-handle-entry-type-extra-info">
<h3>setuser &lt;handle&gt; &lt;entry-type&gt; [extra info]<a class="headerlink" href="#setuser-handle-entry-type-extra-info" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: this is the counterpart of getuser. It lets you set the various values. Other then the ones listed below, the entry-types are the same as getuser’s.</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Extra Info</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PASS</td>
<td><dl class="first last docutils">
<dt>&lt;password&gt;</dt>
<dd>Password string (Empty value will clear the password)</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td>BOTADDR</td>
<td><dl class="first last docutils">
<dt>&lt;address&gt; [bot listen port] [user listen port]</dt>
<dd>Sets address, bot listen port and user listen port. If no listen ports are
specified, only the bot address is updated. If only the bot listen port is
specified, both the bot and user listen ports are set to the bot listen port.</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td>HOSTS</td>
<td><dl class="first last docutils">
<dt>[hostmask]</dt>
<dd>If no value is specified, all hosts for the user will be cleared. Otherwise, only
<em>1</em> hostmask is added :P</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td>LASTON</td>
<td><p class="first">This setting has 3 forms.</p>
<dl class="last docutils">
<dt>&lt;unixtime&gt; &lt;place&gt;</dt>
<dd>sets global LASTON time. Standard values used by Eggdrop for &lt;place&gt; are partyline,
linked, unlinked, filearea, &lt;#channel&gt;, and &lt;&#64;remotebotname&gt;, but can be set to
anything.</dd>
<dt>&lt;unixtime&gt;</dt>
<dd>sets global LASTON time (leaving the place field empty)</dd>
<dt>&lt;unixtime&gt; &lt;channel&gt;</dt>
<dd>sets a user’s LASTON time for a channel (if it is a valid channel)</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="chhandle-old-handle-new-handle">
<h3>chhandle &lt;old-handle&gt; &lt;new-handle&gt;<a class="headerlink" href="#chhandle-old-handle-new-handle" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: changes a user’s handle</p>
<p>Returns: 1 on success; 0 if the new handle is invalid or already used, or if the user can’t be found</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="chattr-handle-changes-channel">
<h3>chattr &lt;handle&gt; [changes [channel]]<a class="headerlink" href="#chattr-handle-changes-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: changes the attributes for a user record, if you include any.
Changes are of the form ‘+f’, ‘-o’, ‘+dk’, ‘-o+d’, etc. If changes are specified in the format of |&lt;changes&gt; &lt;channel&gt;, the channel-specific flags for that channel are altered. You can now use the +o|-o #channel format here too.</p>
<p>Returns: new flags for the user (if you made no changes, the current flags are returned). If a channel was specified, the global AND the channel-specific flags for that channel are returned in the format of globalflags|channelflags. “*” is returned if the specified user does not exist.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="botattr-handle-changes-channel">
<h3>botattr &lt;handle&gt; [changes [channel]]<a class="headerlink" href="#botattr-handle-changes-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: similar to chattr except this modifies bot flags rather than normal user attributes.</p>
<p>Returns: new flags for the bot (if you made no changes, the current flags are returned). If a channel was specified, the global AND the channel-specific flags for that channel are returned in the format of globalflags|channelflags. “*” is returned if the specified bot does not exist.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="matchattr-handle-flags-channel">
<h3>matchattr &lt;handle&gt; &lt;flags&gt; [channel]<a class="headerlink" href="#matchattr-handle-flags-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>Description: checks if the flags of the specified user match the flags provided. Default matching pattern uses the | (OR) convention. For example, specifying +mn for flags will check if the user has the m OR n flag.</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Flag Mask</th>
<th class="head">Action</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2">+m</td>
<td rowspan="2">Checks if the user has the m global flag</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td>+mn</td>
<td>Checks if the user has the m or n global flag</td>
</tr>
<tr class="row-odd"><td>+mn&amp;</td>
<td>Checks if the user has the m and n global flag</td>
</tr>
<tr class="row-even"><td>|+o #foo</td>
<td>Checks if the user has the o channel flag for #foo</td>
</tr>
<tr class="row-odd"><td>&amp;mn #foo</td>
<td>Checks if the user has the m and n channel flag for #foo</td>
</tr>
<tr class="row-even"><td>+o|+n #foo</td>
<td>Checks if the user has the o global flag, or the n channel
flag for #foo</td>
</tr>
<tr class="row-odd"><td>+m&amp;+v</td>
<td>Checks if the user has the m global flag, and the v channel
flag for #foo</td>
</tr>
<tr class="row-even"><td>-m</td>
<td>Checks if the user does not have the m global flag</td>
</tr>
<tr class="row-odd"><td>|-n #foo</td>
<td>Checks if the user does not have the n channel flag for #foo</td>
</tr>
<tr class="row-even"><td>+m|-n #foo</td>
<td>Checks if the user has the global m flag or does not have a
channel n flag for #foo</td>
</tr>
<tr class="row-odd"><td>-n&amp;-m #foo</td>
<td>Searches if the user does not have the global n flag and does
not have the channel m flag for #foo</td>
</tr>
<tr class="row-even"><td>||+b</td>
<td>Searches if the user has the bot flag b</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>Returns: 1 if the specified user has the flags matching the provided mask; 0 otherwise</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="adduser-handle-hostmask">
<h3>adduser &lt;handle&gt; [hostmask]<a class="headerlink" href="#adduser-handle-hostmask" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: creates a new user entry with the handle and hostmask given (with no password and the default flags)</p>
<p>Returns: 1 if successful; 0 if the handle already exists</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="addbot-handle-address-botport-userport">
<h3>addbot &lt;handle&gt; &lt;address&gt; [botport [userport]]<a class="headerlink" href="#addbot-handle-address-botport-userport" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: adds a new bot to the userlist with the handle and botaddress given (with no password and no flags). &lt;address&gt; format is one of:</p>
<ul class="simple">
<li>ipaddress</li>
<li>ipv4address:botport/userport    [DEPRECATED]</li>
<li>[ipv6address]:botport/userport  [DEPRECATED]</li>
</ul>
</div></blockquote>
<p>NOTE 1: The []s around the ipv6address argument are literal []s, not optional arguments.
NOTE 2: In the deprecated formats, an additional botport and/or userport given as follow-on arguments are ignored.</p>
<blockquote>
<div><p>Returns: 1 if successful; 0 if the bot already exists or a port is invalid</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="deluser-handle">
<h3>deluser &lt;handle&gt;<a class="headerlink" href="#deluser-handle" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: attempts to erase the user record for a handle</p>
<p>Returns: 1 if successful, 0 if no such user exists</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="delhost-handle-hostmask">
<h3>delhost &lt;handle&gt; &lt;hostmask&gt;<a class="headerlink" href="#delhost-handle-hostmask" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: deletes a hostmask from a user’s host list</p>
<p>Returns: 1 on success; 0 if the hostmask (or user) doesn’t exist</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="addchanrec-handle-channel">
<h3>addchanrec &lt;handle&gt; &lt;channel&gt;<a class="headerlink" href="#addchanrec-handle-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: adds a channel record for a user</p>
<p>Returns: 1 on success; 0 if the user or channel does not exist</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="delchanrec-handle-channel">
<h3>delchanrec &lt;handle&gt; &lt;channel&gt;<a class="headerlink" href="#delchanrec-handle-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes a channel record for a user. This includes all associated channel flags.</p>
<p>Returns: 1 on success; 0 if the user or channel does not exist</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="haschanrec-handle-channel">
<h3>haschanrec &lt;handle&gt; &lt;channel&gt;<a class="headerlink" href="#haschanrec-handle-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the given handle has a chanrec for the specified channel; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="getchaninfo-handle-channel">
<h3>getchaninfo &lt;handle&gt; &lt;channel&gt;<a class="headerlink" href="#getchaninfo-handle-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: info line for a specific channel (behaves just like ‘getinfo’)</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="setchaninfo-handle-channel-info">
<h3>setchaninfo &lt;handle&gt; &lt;channel&gt; &lt;info&gt;<a class="headerlink" href="#setchaninfo-handle-channel-info" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sets the info line on a specific channel for a user. If info is “none”, it will be removed.</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="newchanban-channel-ban-creator-comment-lifetime-options">
<h3>newchanban &lt;channel&gt; &lt;ban&gt; &lt;creator&gt; &lt;comment&gt; [lifetime] [options]<a class="headerlink" href="#newchanban-channel-ban-creator-comment-lifetime-options" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: adds a ban to the ban list of a channel; creator is given credit for the ban in the ban list. lifetime is specified in minutes. If lifetime is not specified, ban-time (usually 60) is used. Setting the lifetime to 0 makes it a permanent ban.</p>
<p>Options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>sticky</td>
<td>forces the ban to be always active on a channel, even with dynamicbans on</td>
</tr>
</tbody>
</table>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="newban-ban-creator-comment-lifetime-options">
<h3>newban &lt;ban&gt; &lt;creator&gt; &lt;comment&gt; [lifetime] [options]<a class="headerlink" href="#newban-ban-creator-comment-lifetime-options" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: adds a ban to the global ban list (which takes effect on all channels); creator is given credit for the ban in the ban list. lifetime is specified in minutes. If lifetime is not specified, default-ban-time (usually 120) is used. Setting the lifetime to 0 makes it a permanent ban.</p>
<p>Options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>sticky</td>
<td>forces the ban to be always active on a channel, even with dynamicbans on</td>
</tr>
</tbody>
</table>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="newchanexempt-channel-exempt-creator-comment-lifetime-options">
<h3>newchanexempt &lt;channel&gt; &lt;exempt&gt; &lt;creator&gt; &lt;comment&gt; [lifetime] [options]<a class="headerlink" href="#newchanexempt-channel-exempt-creator-comment-lifetime-options" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: adds a exempt to the exempt list of a channel; creator is given credit for the exempt in the exempt list. lifetime is specified in minutes. If lifetime is not specified, exempt-time (usually 60) is used. Setting the lifetime to 0 makes it a permanent exempt. The exempt will not be removed until the corresponding ban has been removed. For timed bans, once the time period has expired, the exempt will not be removed until the corresponding ban has either expired or been removed.</p>
<p>Options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>sticky</td>
<td>forces the exempt to be always active on a channel, even with dynamicexempts on</td>
</tr>
</tbody>
</table>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="newexempt-exempt-creator-comment-lifetime-options">
<h3>newexempt &lt;exempt&gt; &lt;creator&gt; &lt;comment&gt; [lifetime] [options]<a class="headerlink" href="#newexempt-exempt-creator-comment-lifetime-options" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: adds a exempt to the global exempt list (which takes effect on all channels); creator is given credit for the exempt in the exempt list. lifetime is specified in minutes. If lifetime is not specified, exempt-time (usually 60) is used. Setting the lifetime to 0 makes it a permanent exempt. The exempt will not be removed until the corresponding ban has been removed.</p>
<p>Options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>sticky</td>
<td>forces the exempt to be always active on a channel, even with dynamicexempts on</td>
</tr>
</tbody>
</table>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="newchaninvite-channel-invite-creator-comment-lifetime-options">
<h3>newchaninvite &lt;channel&gt; &lt;invite&gt; &lt;creator&gt; &lt;comment&gt; [lifetime] [options]<a class="headerlink" href="#newchaninvite-channel-invite-creator-comment-lifetime-options" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: adds a invite to the invite list of a channel; creator is given credit for the invite in the invite list. lifetime is specified in minutes. If lifetime is not specified, invite-time (usually 60) is used. Setting the lifetime to 0 makes it a permanent invite. The invite will not be removed until the channel has gone -i.</p>
<p>Options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>sticky</td>
<td>forces the invite to be always active on a channel, even with dynamicinvites on</td>
</tr>
</tbody>
</table>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="newinvite-invite-creator-comment-lifetime-options">
<h3>newinvite &lt;invite&gt; &lt;creator&gt; &lt;comment&gt; [lifetime] [options]<a class="headerlink" href="#newinvite-invite-creator-comment-lifetime-options" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: adds a invite to the global invite list (which takes effect on all channels); creator is given credit for the invite in the invite list. lifetime is specified in minutes. If lifetime is not specified, invite-time (usually 60) is used. Setting the lifetime to 0 makes it a permanent invite. The invite will not be removed until the channel has gone -i.</p>
<p>Options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>sticky</td>
<td>forces the invite to be always active on a channel, even with dynamicinvites on</td>
</tr>
</tbody>
</table>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="stickban-banmask-channel">
<h3>stickban &lt;banmask&gt; [channel]<a class="headerlink" href="#stickban-banmask-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: makes a ban sticky, or, if a channel is specified, then it is set sticky on that channel only.</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="unstickban-banmask-channel">
<h3>unstickban &lt;banmask&gt; [channel]<a class="headerlink" href="#unstickban-banmask-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: makes a ban no longer sticky, or, if a channel is specified, then it is unstuck on that channel only.</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="stickexempt-exemptmask-channel">
<h3>stickexempt &lt;exemptmask&gt; [channel]<a class="headerlink" href="#stickexempt-exemptmask-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: makes an exempt sticky, or, if a channel is specified, then it is set sticky on that channel only.</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="unstickexempt-exemptmask-channel">
<h3>unstickexempt &lt;exemptmask&gt; [channel]<a class="headerlink" href="#unstickexempt-exemptmask-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: makes an exempt no longer sticky, or, if a channel is specified, then it is unstuck on that channel only.</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="stickinvite-invitemask-channel">
<h3>stickinvite &lt;invitemask&gt; [channel]<a class="headerlink" href="#stickinvite-invitemask-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: makes an invite sticky, or, if a channel is specified, then it is set sticky on that channel only.</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="unstickinvite-invitemask-channel">
<h3>unstickinvite &lt;invitemask&gt; [channel]<a class="headerlink" href="#unstickinvite-invitemask-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: makes an invite no longer sticky, or, if a channel is specified, then it is unstuck on that channel only.</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="killchanban-channel-ban">
<h3>killchanban &lt;channel&gt; &lt;ban&gt;<a class="headerlink" href="#killchanban-channel-ban" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes a ban from the ban list for a channel</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="killban-ban">
<h3>killban &lt;ban&gt;<a class="headerlink" href="#killban-ban" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes a ban from the global ban list</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="killchanexempt-channel-exempt">
<h3>killchanexempt &lt;channel&gt; &lt;exempt&gt;<a class="headerlink" href="#killchanexempt-channel-exempt" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes an exempt from the exempt list for a channel</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="killexempt-exempt">
<h3>killexempt &lt;exempt&gt;<a class="headerlink" href="#killexempt-exempt" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes an exempt from the global exempt list</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="killchaninvite-channel-invite">
<h3>killchaninvite &lt;channel&gt; &lt;invite&gt;<a class="headerlink" href="#killchaninvite-channel-invite" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes an invite from the invite list for a channel</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="killinvite-invite">
<h3>killinvite &lt;invite&gt;<a class="headerlink" href="#killinvite-invite" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes an invite from the global invite list</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="ischanjuped-channel">
<h3>ischanjuped &lt;channel&gt;<a class="headerlink" href="#ischanjuped-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the channel is juped, and the bot is unable to join; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="isban-ban-channel">
<h3>isban &lt;ban&gt; [channel]<a class="headerlink" href="#isban-ban-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the specified ban is in the global ban list; 0 otherwise. If a channel is specified, that channel’s ban list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="ispermban-ban-channel">
<h3>ispermban &lt;ban&gt; [channel]<a class="headerlink" href="#ispermban-ban-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the specified ban is in the global ban list AND is marked as permanent; 0 otherwise. If a channel is specified, that channel’s ban list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="isexempt-exempt-channel">
<h3>isexempt &lt;exempt&gt; [channel]<a class="headerlink" href="#isexempt-exempt-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the specified exempt is in the global exempt list; 0 otherwise. If a channel is specified, that channel’s exempt list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="ispermexempt-exempt-channel">
<h3>ispermexempt &lt;exempt&gt; [channel]<a class="headerlink" href="#ispermexempt-exempt-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the specified exempt is in the global exempt list AND is marked as permanent; 0 otherwise. If a channel is specified, that channel’s exempt list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="isinvite-invite-channel">
<h3>isinvite &lt;invite&gt; [channel]<a class="headerlink" href="#isinvite-invite-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the specified invite is in the global invite list; 0 otherwise. If a channel is specified, that channel’s invite list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="isperminvite-invite-channel">
<h3>isperminvite &lt;invite&gt; [channel]<a class="headerlink" href="#isperminvite-invite-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the specified invite is in the global invite list AND is marked as permanent; 0 otherwise. If a channel is specified, that channel’s invite list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="isbansticky-ban-channel">
<h3>isbansticky &lt;ban&gt; [channel]<a class="headerlink" href="#isbansticky-ban-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the specified ban is marked as sticky in the global ban list; 0 otherwise. If a channel is specified, that channel’s ban list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="isexemptsticky-exempt-channel">
<h3>isexemptsticky &lt;exempt&gt; [channel]<a class="headerlink" href="#isexemptsticky-exempt-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the specified exempt is marked as sticky in the global exempt list; 0 otherwise. If a channel is specified, that channel’s exempt list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="isinvitesticky-invite-channel">
<h3>isinvitesticky &lt;invite&gt; [channel]<a class="headerlink" href="#isinvitesticky-invite-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the specified invite is marked as sticky in the global invite list; 0 otherwise. If a channel is specified, that channel’s invite list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="matchban-nick-user-host-channel">
<h3>matchban &lt;<a class="reference external" href="mailto:nick!user&#37;&#52;&#48;host">nick!user<span>&#64;</span>host</a>&gt; [channel]<a class="headerlink" href="#matchban-nick-user-host-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the specified nick!user&#64;host matches a ban in the global ban list; 0 otherwise. If a channel is specified, that channel’s ban list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="matchexempt-nick-user-host-channel">
<h3>matchexempt &lt;<a class="reference external" href="mailto:nick!user&#37;&#52;&#48;host">nick!user<span>&#64;</span>host</a>&gt; [channel]<a class="headerlink" href="#matchexempt-nick-user-host-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the specified nick!user&#64;host matches an exempt in the global exempt list; 0 otherwise. If a channel is specified, that channel’s exempt list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="matchinvite-nick-user-host-channel">
<h3>matchinvite &lt;<a class="reference external" href="mailto:nick!user&#37;&#52;&#48;host">nick!user<span>&#64;</span>host</a>&gt; [channel]<a class="headerlink" href="#matchinvite-nick-user-host-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the specified nick!user&#64;host matches an invite in the global invite list; 0 otherwise. If a channel is specified, that
channel’s invite list is checked as well.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="banlist-channel">
<h3>banlist [channel]<a class="headerlink" href="#banlist-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of global bans, or, if a channel is specified, a list of channel-specific bans. Each entry is a sublist containing: hostmask, comment, expiration timestamp, time added, last time active, and creator. The three timestamps are in unixtime format.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="exemptlist-channel">
<h3>exemptlist [channel]<a class="headerlink" href="#exemptlist-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of global exempts, or, if a channel is specified, a list of channel-specific exempts. Each entry is a sublist containing: hostmask, comment, expiration timestamp, time added, last time active, and creator. The three timestamps are in unixtime format.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="invitelist-channel">
<h3>invitelist [channel]<a class="headerlink" href="#invitelist-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of global invites, or, if a channel is specified, a list of channel-specific invites. Each entry is a sublist containing: hostmask, comment, expiration timestamp, time added, last time active, and creator. The three timestamps are in unixtime format.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="newignore-hostmask-creator-comment-lifetime">
<h3>newignore &lt;hostmask&gt; &lt;creator&gt; &lt;comment&gt; [lifetime]<a class="headerlink" href="#newignore-hostmask-creator-comment-lifetime" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: adds an entry to the ignore list; creator is given credit for the ignore. lifetime is how many minutes until the ignore expires and is removed. If lifetime is not specified, ignore-time (usually 60) is used. Setting the lifetime to 0 makes it a permanent ignore.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="killignore-hostmask">
<h3>killignore &lt;hostmask&gt;<a class="headerlink" href="#killignore-hostmask" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes an entry from the ignore list</p>
<p>Returns: 1 if successful; 0 otherwise</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="ignorelist">
<h3>ignorelist<a class="headerlink" href="#ignorelist" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of ignores. Each entry is a sublist containing: hostmask, comment, expiration timestamp, time added, and creator. The timestamps are in unixtime format.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="isignore-hostmask">
<h3>isignore &lt;hostmask&gt;<a class="headerlink" href="#isignore-hostmask" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the ignore is in the list; 0 otherwise</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="save">
<h3>save<a class="headerlink" href="#save" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: writes the user and channel files to disk</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="reload">
<h3>reload<a class="headerlink" href="#reload" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: loads the userfile from disk, replacing whatever is in memory</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="backup">
<h3>backup<a class="headerlink" href="#backup" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: makes a simple backup of the userfile that’s on disk. If the channels module is loaded, this also makes a simple backup of the channel file.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="getting-users">
<h3>getting-users<a class="headerlink" href="#getting-users" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the bot is currently downloading a userfile from a sharebot (and hence, user records are about to drastically change); 0 if not</p>
<p>Module: core</p>
</div></blockquote>
</div>
</div>
<div class="section" id="channel-commands">
<h2>Channel Commands<a class="headerlink" href="#channel-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="channel-add-name-option-list">
<h3>channel add &lt;name&gt; [option-list]<a class="headerlink" href="#channel-add-name-option-list" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: adds a channel record for the bot to monitor. The full list of possible options are given in doc/settings/mod.channels. Note that the channel options must be in a list (enclosed in {}).</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="channel-set-name-options">
<h3>channel set &lt;name&gt; &lt;options…&gt;<a class="headerlink" href="#channel-set-name-options" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sets options for the channel specified. The full list of possible options are given in doc/settings/mod.channels.</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="channel-info-name">
<h3>channel info &lt;name&gt;<a class="headerlink" href="#channel-info-name" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of info about the specified channel’s settings.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="channel-get-name-setting">
<h3>channel get &lt;name&gt; [setting]<a class="headerlink" href="#channel-get-name-setting" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: The value of the setting you specify. For flags, a value of 0 means it is disabled (-), and non-zero means enabled (+). If no setting is specified, a flat list of all available settings and their values will be returned.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="channel-remove-name">
<h3>channel remove &lt;name&gt;<a class="headerlink" href="#channel-remove-name" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes a channel record from the bot and makes the bot no longer monitor the channel</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="savechannels">
<h3>savechannels<a class="headerlink" href="#savechannels" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: saves the channel settings to the channel-file if one is defined.</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="loadchannels">
<h3>loadchannels<a class="headerlink" href="#loadchannels" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: reloads the channel settings from the channel-file if one is defined.</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="channels">
<h3>channels<a class="headerlink" href="#channels" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of the channels the bot has a channel record for</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="channame2dname-channel-name">
<h3>channame2dname &lt;channel-name&gt;<a class="headerlink" href="#channame2dname-channel-name" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="chandname2name-channel-dname">
<h3>chandname2name &lt;channel-dname&gt;<a class="headerlink" href="#chandname2name-channel-dname" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: these two functions are important to correctly support !channels. The bot differentiates between channel description names (chan dnames) and real channel names (chan names). The chan dnames are what you would normally call the channel, such as “!channel”. The chan names are what the IRC server uses to identify the channel. They consist of the chan dname prefixed with an ID; such as “!ABCDEchannel”.</p>
<p>For bot functions like isop, isvoice, etc. you need to know the chan dnames. If you communicate with the server, you usually get the chan name, though. That’s what you need the channame2dname function for.</p>
<p>If you only have the chan dname and want to directly send raw server commands, use the chandname2name command.</p>
<p>NOTE: For non-!channels, chan dname and chan name are the same.</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="isbotnick-nick">
<h3>isbotnick &lt;nick&gt;<a class="headerlink" href="#isbotnick-nick" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the nick matches the botnick; 0 otherwise</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="botisop-channel">
<h3>botisop [channel]<a class="headerlink" href="#botisop-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the bot has ops on the specified channel (or any channel if no channel is specified); 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="botishalfop-channel">
<h3>botishalfop [channel]<a class="headerlink" href="#botishalfop-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the bot has halfops on the specified channel (or any channel if no channel is specified); 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="botisvoice-channel">
<h3>botisvoice [channel]<a class="headerlink" href="#botisvoice-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the bot has a voice on the specified channel (or any channel if no channel is specified); 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="botonchan-channel">
<h3>botonchan [channel]<a class="headerlink" href="#botonchan-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the bot is on the specified channel (or any channel if no channel is specified); 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="isop-nickname-channel">
<h3>isop &lt;nickname&gt; [channel]<a class="headerlink" href="#isop-nickname-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if someone by the specified nickname is on the channel (or any channel if no channel name is specified) and has ops; 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="ishalfop-nickname-channel">
<h3>ishalfop &lt;nickname&gt; [channel]<a class="headerlink" href="#ishalfop-nickname-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if someone by the specified nickname is on the channel (or any channel if no channel name is specified) and has halfops; 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="wasop-nickname-channel">
<h3>wasop &lt;nickname&gt; &lt;channel&gt;<a class="headerlink" href="#wasop-nickname-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if someone that just got opped/deopped in the chan had op before the modechange; 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="washalfop-nickname-channel">
<h3>washalfop &lt;nickname&gt; &lt;channel&gt;<a class="headerlink" href="#washalfop-nickname-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if someone that just got halfopped/dehalfopped in the chan had halfop before the modechange; 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="isvoice-nickname-channel">
<h3>isvoice &lt;nickname&gt; [channel]<a class="headerlink" href="#isvoice-nickname-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if someone by that nickname is on the channel (or any channel if no channel is specified) and has voice (+v); 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="onchan-nickname-channel">
<h3>onchan &lt;nickname&gt; [channel]<a class="headerlink" href="#onchan-nickname-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if someone by that nickname is on the specified channel (or any channel if none is specified); 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="nick2hand-nickname-channel">
<h3>nick2hand &lt;nickname&gt; [channel]<a class="headerlink" href="#nick2hand-nickname-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: the handle of a nickname on a channel. If a channel is not specified, the bot will check all of its channels. If the nick is not found, “” is returned. If the nick is found but does not have a handle, “*” is returned.</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="hand2nick-handle-channel">
<h3>hand2nick &lt;handle&gt; [channel]<a class="headerlink" href="#hand2nick-handle-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: nickname of the first person on the specified channel (if one is specified) whose nick!user&#64;host matches the given handle; “” is returned if no match is found. If no channel is specified, all channels are checked.</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="handonchan-handle-channel">
<h3>handonchan &lt;handle&gt; [channel]<a class="headerlink" href="#handonchan-handle-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the the nick!user&#64;host for someone on the channel (or any channel if no channel name is specified) matches for the handle given; 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="ischanban-ban-channel">
<h3>ischanban &lt;ban&gt; &lt;channel&gt;<a class="headerlink" href="#ischanban-ban-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the specified ban is on the given channel’s ban list (not the bot’s banlist for the channel)</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="ischanexempt-exempt-channel">
<h3>ischanexempt &lt;exempt&gt; &lt;channel&gt;<a class="headerlink" href="#ischanexempt-exempt-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the specified exempt is on the given channel’s exempt list (not the bot’s exemptlist for the channel)</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="ischaninvite-invite-channel">
<h3>ischaninvite &lt;invite&gt; &lt;channel&gt;<a class="headerlink" href="#ischaninvite-invite-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the specified invite is on the given channel’s invite list (not the bot’s invitelist for the channel)</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="chanbans-channel">
<h3>chanbans &lt;channel&gt;<a class="headerlink" href="#chanbans-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of the current bans on the channel. Each element is a sublist of the form {&lt;ban&gt; &lt;bywho&gt; &lt;age&gt;}. age is seconds from the bot’s point of view</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="chanexempts-channel">
<h3>chanexempts &lt;channel&gt;<a class="headerlink" href="#chanexempts-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of the current exempts on the channel. Each element is a sublist of the form {&lt;exempts&gt; &lt;bywho&gt; &lt;age&gt;}. age is seconds from the bot’s point of view</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="chaninvites-channel">
<h3>chaninvites &lt;channel&gt;<a class="headerlink" href="#chaninvites-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of the current invites on the channel. Each element is a sublist of the form {&lt;invites&gt; &lt;bywho&gt; &lt;age&gt;}. age is seconds from the bot’s point of view</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="resetbans-channel">
<h3>resetbans &lt;channel&gt;<a class="headerlink" href="#resetbans-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes all bans on the channel that aren’t in the bot’s ban list and refreshes any bans that should be on the channel but aren’t</p>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="resetexempts-channel">
<h3>resetexempts &lt;channel&gt;<a class="headerlink" href="#resetexempts-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes all exempt on the channel that aren’t in the bot’s exempt list and refreshes any exempts that should be on the channel but aren’t</p>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="resetinvites-channel">
<h3>resetinvites &lt;channel&gt;<a class="headerlink" href="#resetinvites-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes all invites on the channel that aren’t in the bot’s invite list and refreshes any invites that should be on the channel but aren’t</p>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="resetchanidle-nick-channel">
<h3>resetchanidle [nick] &lt;channel&gt;<a class="headerlink" href="#resetchanidle-nick-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: resets the channel idle time for the given nick or for all nicks on the channel if no nick is specified.</p>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="resetchanjoin-nick-channel">
<h3>resetchanjoin [nick] &lt;channel&gt;<a class="headerlink" href="#resetchanjoin-nick-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: resets the channel join time for the given nick or for all nicks on the channel if no nick is specified.</p>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="resetchan-channel-flags">
<h3>resetchan &lt;channel&gt; [flags]<a class="headerlink" href="#resetchan-channel-flags" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: rereads in the channel info from the server. If flags are specified, only the required information will be reset, according to the given flags. Available flags:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>b</td>
<td>reset channel bans</td>
</tr>
<tr class="row-even"><td>e</td>
<td>reset channel exempts</td>
</tr>
<tr class="row-odd"><td>I</td>
<td>reset channel invites</td>
</tr>
<tr class="row-even"><td>m</td>
<td>refresh channel modes</td>
</tr>
<tr class="row-odd"><td>t</td>
<td>refresh channel topic</td>
</tr>
<tr class="row-even"><td>w</td>
<td>refresh memberlist</td>
</tr>
</tbody>
</table>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="getchanhost-nickname-channel">
<h3>getchanhost &lt;nickname&gt; [channel]<a class="headerlink" href="#getchanhost-nickname-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: user&#64;host of the specified nickname (the nickname is not included in the returned host). If a channel is not specified, bot will check all of its channels. If the nickname is not on the channel(s), “” is returned.</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="getchanjoin-nickname-channel">
<h3>getchanjoin &lt;nickname&gt; &lt;channel&gt;<a class="headerlink" href="#getchanjoin-nickname-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: timestamp (unixtime format) of when the specified nickname joined the channel if available, 0 otherwise. Note that after a channel reset this information will be lost, even if previously available.</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="onchansplit-nick-channel">
<h3>onchansplit &lt;nick&gt; [channel]<a class="headerlink" href="#onchansplit-nick-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if that nick is split from the channel (or any channel if no channel is specified); 0 otherwise</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="chanlist-channel-flags-chanflags">
<h3>chanlist &lt;channel&gt; [flags][&lt;&amp;|&gt;chanflags]<a class="headerlink" href="#chanlist-channel-flags-chanflags" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: flags are any global flags; the ‘&amp;’ or ‘|’ denotes to look for channel specific flags, where ‘&amp;’ will return users having ALL chanflags and ‘|’ returns users having ANY of the chanflags (See matchattr above for additional examples).</p>
<p>Returns: Searching for flags optionally preceded with a ‘+’ will return a list of nicknames that have all the flags listed. Searching for flags preceded with a ‘-‘ will return a list of nicknames that do not have have any of the flags (differently said, ‘-‘ will hide users that have all flags listed). If no flags are given, all of the nicknames on the channel are returned.</p>
<p>Please note that if you’re executing chanlist after a part or sign bind, the gone user will still be listed, so you can check for wasop, isop, etc.</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="getchanidle-nickname-channel">
<h3>getchanidle &lt;nickname&gt; &lt;channel&gt;<a class="headerlink" href="#getchanidle-nickname-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: number of minutes that person has been idle; -1 if the specified user isn’t on the channel</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="getchanmode-channel">
<h3>getchanmode &lt;channel&gt;<a class="headerlink" href="#getchanmode-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: string of the type “+ntik key” for the channel specified</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="jump-server-port-password">
<h3>jump [server [[+]port [password]]]<a class="headerlink" href="#jump-server-port-password" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: jumps to the server specified, or (if none is specified) the next server in the bot’s serverlist. If you prefix the port with a plus sign (e.g. +6697), SSL connection will be attempted.</p>
<p>Returns: nothing</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="pushmode-channel-mode-arg">
<h3>pushmode &lt;channel&gt; &lt;mode&gt; [arg]<a class="headerlink" href="#pushmode-channel-mode-arg" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sends out a channel mode change (ex: pushmode #lame +o goober) through the bot’s queuing system. All the mode changes will be sent out at once (combined into one line as much as possible) after the script finishes, or when ‘flushmode’ is called.</p>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="flushmode-channel">
<h3>flushmode &lt;channel&gt;<a class="headerlink" href="#flushmode-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: forces all previously pushed channel mode changes to be sent to the server, instead of when the script is finished (just for the channel specified)</p>
<p>Returns: nothing</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="topic-channel">
<h3>topic &lt;channel&gt;<a class="headerlink" href="#topic-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: string containing the current topic of the specified channel</p>
<p>Module: irc</p>
</div></blockquote>
</div>
<div class="section" id="validchan-channel">
<h3>validchan &lt;channel&gt;<a class="headerlink" href="#validchan-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: checks if the bot has a channel record for the specified channel. Note that this does not necessarily mean that the bot is ON the channel.</p>
<p>Returns: 1 if the channel exists, 0 if not</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="isdynamic-channel">
<h3>isdynamic &lt;channel&gt;<a class="headerlink" href="#isdynamic-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the channel is a dynamic channel; 0 otherwise</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="setudef-flag-int-str-name">
<h3>setudef &lt;flag/int/str&gt; &lt;name&gt;<a class="headerlink" href="#setudef-flag-int-str-name" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: initializes a user defined channel flag, string or integer setting. You can use it like any other flag/setting. IMPORTANT: Don’t forget to reinitialize your flags/settings after a restart, or it’ll be lost.</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="renudef-flag-int-str-oldname-newname">
<h3>renudef &lt;flag/int/str&gt; &lt;oldname&gt; &lt;newname&gt;<a class="headerlink" href="#renudef-flag-int-str-oldname-newname" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: renames a user defined channel flag, string, or integer setting.</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="deludef-flag-int-str-name">
<h3>deludef &lt;flag/int/str&gt; &lt;name&gt;<a class="headerlink" href="#deludef-flag-int-str-name" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: deletes a user defined channel flag, string, or integer setting.</p>
<p>Returns: nothing</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="getudefs-flag-int-str">
<h3>getudefs [flag/int/str]<a class="headerlink" href="#getudefs-flag-int-str" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of user defined channel settings of the given type, or all of them if no type is given.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
<div class="section" id="chansettype-setting">
<h3>chansettype &lt;setting&gt;<a class="headerlink" href="#chansettype-setting" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: The type of the setting you specify. The possible types are flag, int, str, pair. A flag type references a channel flag setting that can be set to either + or -. An int type is a channel  setting that is set to a number, such as ban-time. A str type is a  channel setting that stores a string, such as need-op. A pair type is a setting that holds a value couple, such as the flood settings.</p>
<p>Module: channels</p>
</div></blockquote>
</div>
</div>
<div class="section" id="dcc-commands">
<h2>DCC Commands<a class="headerlink" href="#dcc-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="putdcc-idx-text-raw">
<h3>putdcc &lt;idx&gt; &lt;text&gt; [-raw]<a class="headerlink" href="#putdcc-idx-text-raw" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sends text to the idx specified. If -raw is specified, the text will be sent as is, without forced new lines or limits to line length.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="dccbroadcast-message">
<h3>dccbroadcast &lt;message&gt;<a class="headerlink" href="#dccbroadcast-message" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sends a message to everyone on the party line across the botnet, in the form of “*** &lt;message&gt;” for local users, “*** (Bot) &lt;message&gt;” for users on other bots with version below 1.8.4, and “(Bot) &lt;message&gt;” for users on other bots with version 1.8.4+ and console log mode ‘l’ enabled</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="dccputchan-channel-message">
<h3>dccputchan &lt;channel&gt; &lt;message&gt;<a class="headerlink" href="#dccputchan-channel-message" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sends your message to everyone on a certain channel on the botnet, in a form exactly like dccbroadcast does. Valid channels are 0 through 99999.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="boot-user-bot-reason">
<h3>boot &lt;<a class="reference external" href="mailto:user&#37;&#52;&#48;bot">user<span>&#64;</span>bot</a>&gt; [reason]<a class="headerlink" href="#boot-user-bot-reason" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: boots a user from the partyline</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="dccsimul-idx-text">
<h3>dccsimul &lt;idx&gt; &lt;text&gt;<a class="headerlink" href="#dccsimul-idx-text" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: simulates text typed in by the dcc user specified. Note that in v0.9, this only simulated commands; now a command must be preceded by a ‘.’ to be simulated.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="hand2idx-handle">
<h3>hand2idx &lt;handle&gt;<a class="headerlink" href="#hand2idx-handle" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: the idx (a number greater than or equal to zero) for the user given if the user is on the party line in chat mode (even if she is currently on a channel or in chat off), the file area, or in the control of a script. -1 is returned if no idx is found. If the user is on multiple times, the oldest idx is returned.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="idx2hand-idx">
<h3>idx2hand &lt;idx&gt;<a class="headerlink" href="#idx2hand-idx" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: handle of the user with the given idx</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="valididx-idx">
<h3>valididx &lt;idx&gt;<a class="headerlink" href="#valididx-idx" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the idx currently exists; 0 otherwise</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="getchan-idx">
<h3>getchan &lt;idx&gt;<a class="headerlink" href="#getchan-idx" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: the current party line channel for a user on the party line; “0” indicates he’s on the group party line, “-1” means he has chat off, and a value from 1 to 99999 is a private channel</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="setchan-idx-channel">
<h3>setchan &lt;idx&gt; &lt;channel&gt;<a class="headerlink" href="#setchan-idx-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sets a party line user’s channel. The party line user is not notified that she is now on a new channel. A channel name can be used (provided it exists).</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="console-idx-channel-console-modes">
<h3>console &lt;idx&gt; [channel] [console-modes]<a class="headerlink" href="#console-idx-channel-console-modes" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: changes a dcc user’s console mode, either to an absolute mode (like “mpj”) or just adding/removing flags (like “+pj” or “-moc” or “+mp-c”). The user’s console channel view can be changed also (as long as the new channel is a valid channel).</p>
<p>Returns: a list containing the user’s (new) channel view and (new) console modes, or nothing if that user isn’t currently on the partyline</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="resetconsole-idx">
<h3>resetconsole &lt;idx&gt;<a class="headerlink" href="#resetconsole-idx" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: changes a dcc user’s console mode to the default setting in the configfile.</p>
<p>Returns: a list containing the user’s channel view and (new) console modes, or nothing if that user isn’t currently on the partyline</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="echo-idx-status">
<h3>echo &lt;idx&gt; [status]<a class="headerlink" href="#echo-idx-status" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: turns a user’s echo on or off; the status has to be a 1 or 0</p>
<p>Returns: new value of echo for that user (or the current value, if status was omitted)</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="strip-idx-strip-flags">
<h3>strip &lt;idx&gt; [+/-strip-flags]<a class="headerlink" href="#strip-idx-strip-flags" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: modifies the strip-flags for a user. The supported strip-flags are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>c</td>
<td>remove all color codes</td>
</tr>
<tr class="row-even"><td>b</td>
<td>remove all boldface codes</td>
</tr>
<tr class="row-odd"><td>r</td>
<td>remove all reverse video codes</td>
</tr>
<tr class="row-even"><td>u</td>
<td>remove all underline codes</td>
</tr>
<tr class="row-odd"><td>a</td>
<td>remove all ANSI codes</td>
</tr>
<tr class="row-even"><td>g</td>
<td>remove all ctrl-g (bell) codes</td>
</tr>
<tr class="row-odd"><td>o</td>
<td>remove all ordinary codes (ctrl+o, terminates bold/color/..)</td>
</tr>
<tr class="row-even"><td>i</td>
<td>remove all italics codes</td>
</tr>
<tr class="row-odd"><td>*</td>
<td>remove all of the above</td>
</tr>
</tbody>
</table>
<p>Returns: new strip-flags for the specified user (or the current flags, if strip-flags was omitted)</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="putbot-bot-nick-message">
<h3>putbot &lt;bot-nick&gt; &lt;message&gt;<a class="headerlink" href="#putbot-bot-nick-message" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sends a message across the botnet to another bot. If no script intercepts the message on the other end, the message is ignored.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="putallbots-message">
<h3>putallbots &lt;message&gt;<a class="headerlink" href="#putallbots-message" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sends a message across the botnet to all bots. If no script intercepts the message on the other end, the message is ignored.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="killdcc-idx">
<h3>killdcc &lt;idx&gt;<a class="headerlink" href="#killdcc-idx" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: kills a partyline or file area connection</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="bots">
<h3>bots<a class="headerlink" href="#bots" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: list of the bots currently connected to the botnet</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="botlist">
<h3>botlist<a class="headerlink" href="#botlist" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of bots currently on the botnet. Each item in the list is a sublist with four elements: bot, uplink, version, and sharing status:</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>bot</td>
<td>the bot’s botnetnick</td>
</tr>
<tr class="row-even"><td>uplink</td>
<td>the bot the bot is connected to</td>
</tr>
<tr class="row-odd"><td>version</td>
<td>it’s current numeric version</td>
</tr>
<tr class="row-even"><td>sharing</td>
<td>a “+” if the bot is a sharebot; “-” otherwise</td>
</tr>
</tbody>
</table>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="islinked-bot">
<h3>islinked &lt;bot&gt;<a class="headerlink" href="#islinked-bot" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: 1 if the bot is currently linked; 0 otherwise</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="dccused">
<h3>dccused<a class="headerlink" href="#dccused" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: number of dcc connections currently in use</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="dcclist-type">
<h3>dcclist [type]<a class="headerlink" href="#dcclist-type" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of active connections, each item in the list is a sublist containing seven elements:
{&lt;idx&gt; &lt;handle&gt; &lt;hostname&gt; &lt;[+]port&gt; &lt;type&gt; {&lt;other&gt;} &lt;timestamp&gt;}.</p>
<p>The types are: chat, bot, files, file_receiving, file_sending, file_send_pending, script, socket (these are connections that have not yet been put under ‘control’), telnet, and server. The timestamp is in unixtime format.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="whom-chan">
<h3>whom &lt;chan&gt;<a class="headerlink" href="#whom-chan" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: list of people on the botnet who are on that channel. 0 is the default party line. Each item in the list is a sublist with six elements: nickname, bot, hostname, access flag (‘-‘, ‘&#64;’, ‘+’, or ‘*’), minutes idle, and away message (blank if the user is not away). If you specify * for channel, every user on the botnet is returned with an extra argument indicating the channel the user is on.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="getdccidle-idx">
<h3>getdccidle &lt;idx&gt;<a class="headerlink" href="#getdccidle-idx" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: number of seconds the dcc chat/file system/script user has been idle</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="getdccaway-idx">
<h3>getdccaway &lt;idx&gt;<a class="headerlink" href="#getdccaway-idx" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: away message for a dcc chat user (or “” if the user is not set away)</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="setdccaway-idx-message">
<h3>setdccaway &lt;idx&gt; &lt;message&gt;<a class="headerlink" href="#setdccaway-idx-message" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sets a party line user’s away message and marks them away. If set to “”, the user is marked as no longer away.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="connect-host-port">
<h3>connect &lt;host&gt; &lt;[+]port&gt;<a class="headerlink" href="#connect-host-port" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: makes an outgoing connection attempt and creates a dcc entry for it. A ‘control’ command should be used immediately after a successful ‘connect’ so no input is lost. If the port is prefixed with a plus sign, SSL encrypted connection will be attempted.</p>
<p>Returns: idx of the new connection</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="listen-port-type-options-flag">
<h3>listen &lt;port&gt; &lt;type&gt; [options] [flag]<a class="headerlink" href="#listen-port-type-options-flag" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: opens a listening port to accept incoming telnets; type must be one of “bots”, “all”, “users”, “script”, or “off”. Prefixing the port with a plus sign will make eggdrop accept SSL connections on it.</p>
<blockquote>
<div><p>listen &lt;port&gt; bots [mask]</p>
<blockquote>
<div><p>Description: accepts connections from bots only; the optional mask is used to identify permitted bot names. If the mask begins with ‘&#64;’, it is interpreted to be a mask of permitted hosts to accept connections from.</p>
<p>Returns: port number</p>
</div></blockquote>
<p>listen &lt;port&gt; users [mask]</p>
<blockquote>
<div><p>Description: accepts connections from users only (no bots); the optional mask is used to identify permitted nicknames. If the mask begins with ‘&#64;’, it is interpreted to be a mask of permitted hosts to accept connections from.</p>
<p>Returns: port number</p>
</div></blockquote>
<p>listen &lt;port&gt; all [mask]</p>
<blockquote>
<div><p>Description: accepts connections from anyone; the optional mask is used to identify permitted nicknames/botnames. If the mask begins with ‘&#64;’, it is interpreted to be a mask of permitted hosts to accept connections from.</p>
<p>Returns: port number</p>
</div></blockquote>
<p>listen &lt;port&gt; script &lt;proc&gt; [flag]</p>
<blockquote>
<div><p>Description: accepts connections which are immediately routed to a proc. The proc is called with one parameter: the idx of the new connection. Flag may currently only be ‘pub’, which makes the bot allow anyone to connect and not perform an ident lookup.</p>
<p>Returns: port number</p>
</div></blockquote>
<p>listen &lt;port&gt; off</p>
<blockquote>
<div><p>Description: stop listening on a port</p>
<p>Returns: nothing</p>
</div></blockquote>
</div></blockquote>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="dccdumpfile-idx-filename">
<h3>dccdumpfile &lt;idx&gt; &lt;filename&gt;<a class="headerlink" href="#dccdumpfile-idx-filename" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: dumps out a file from the text directory to a dcc chat user. The flag matching that’s used everywhere else works here, too.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
</div>
<div class="section" id="notes-module">
<h2>Notes Module<a class="headerlink" href="#notes-module" title="Permalink to this headline">¶</a></h2>
<div class="section" id="notes-user-numberlist">
<h3>notes &lt;user&gt; [numberlist]<a class="headerlink" href="#notes-user-numberlist" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: -1 if no such user, -2 if notefile failure. If a numberlist is not specified, the number of notes stored for the user is returned. Otherwise, a list of sublists containing information about notes stored for the user is returned. Each sublist is in the format of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">&lt;</span><span class="n">from</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">timestamp</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">note</span> <span class="n">text</span><span class="o">&gt;</span><span class="p">}</span>
</pre></div>
</div>
<p>Module: notes</p>
</div></blockquote>
</div>
<div class="section" id="erasenotes-user-numberlist">
<h3>erasenotes &lt;user&gt; &lt;numberlist&gt;<a class="headerlink" href="#erasenotes-user-numberlist" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: erases some or all stored notes for a user. Use ‘-‘ to erase all notes.</p>
<p>Returns: -1 if no such user, -2 if notefile failure, 0 if no such note, or number of erased notes.</p>
<p>Module: notes</p>
</div></blockquote>
</div>
<div class="section" id="listnotes-user-numberlist">
<h3>listnotes &lt;user&gt; &lt;numberlist&gt;<a class="headerlink" href="#listnotes-user-numberlist" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: lists existing notes according to the numberlist (ex: “2-4;8;16-“)</p>
<p>Returns: -1 if no such user, -2 if notefile failure, 0 if no such note, list of existing notes.</p>
<p>Module: notes</p>
</div></blockquote>
</div>
<div class="section" id="storenote-from-to-msg-idx">
<h3>storenote &lt;from&gt; &lt;to&gt; &lt;msg&gt; &lt;idx&gt;<a class="headerlink" href="#storenote-from-to-msg-idx" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: stores a note for later reading, notifies idx of any results (use idx -1 for no notify).</p>
<p>Returns: 0 on success; non-0 on failure</p>
<p>Module: notes</p>
</div></blockquote>
</div>
</div>
<div class="section" id="assoc-module">
<h2>Assoc Module<a class="headerlink" href="#assoc-module" title="Permalink to this headline">¶</a></h2>
<div class="section" id="assoc-chan-name">
<h3>assoc &lt;chan&gt; [name]<a class="headerlink" href="#assoc-chan-name" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sets the name associated with a botnet channel, if you specify one</p>
<p>Returns: current name for that channel, if any</p>
<p>Module: assoc</p>
</div></blockquote>
</div>
<div class="section" id="killassoc-chan">
<h3>killassoc &lt;chan&gt;<a class="headerlink" href="#killassoc-chan" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes the name associated with a botnet channel, if any exists. Use ‘killassoc &amp;’ to kill all assocs.</p>
<p>Returns: nothing</p>
<p>Module: assoc</p>
</div></blockquote>
</div>
</div>
<div class="section" id="compress-module">
<h2>Compress Module<a class="headerlink" href="#compress-module" title="Permalink to this headline">¶</a></h2>
<div class="section" id="compressfile-level-level-src-file-target-file">
<h3>compressfile [-level &lt;level&gt;] &lt;src-file&gt; [target-file]<a class="headerlink" href="#compressfile-level-level-src-file-target-file" title="Permalink to this headline">¶</a></h3>
<div class="section" id="and">
<h4>and<a class="headerlink" href="#and" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="uncompressfile-src-file-target-file">
<h4>uncompressfile &lt;src-file&gt; [target-file]<a class="headerlink" href="#uncompressfile-src-file-target-file" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Description: compresses or un-compresses files. The level option specifies the compression mode to use when compressing. Available modes are from 0 (minimum CPU usage, minimum compression) all the way up to 9 (maximum CPU usage, maximum compression). If you don’t specify the target-file, the src-file will be overwritten.</p>
<p>Returns: nothing</p>
<p>Module: compress</p>
</div></blockquote>
</div>
</div>
<div class="section" id="iscompressed-filename">
<h3>iscompressed &lt;filename&gt;<a class="headerlink" href="#iscompressed-filename" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: determines whether &lt;filename&gt; is gzip compressed.</p>
<p>Returns: 1 if it is, 0 if it isn’t, and 2 if some kind of error prevented the checks from succeeding.</p>
<p>Module: compress</p>
</div></blockquote>
</div>
</div>
<div class="section" id="filesys-module">
<h2>Filesys Module<a class="headerlink" href="#filesys-module" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setpwd-idx-dir">
<h3>setpwd &lt;idx&gt; &lt;dir&gt;<a class="headerlink" href="#setpwd-idx-dir" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: changes the directory of a file system user, in exactly the same way as a ‘cd’ command would. The directory can be specified relative or absolute.</p>
<p>Returns: nothing</p>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="getpwd-idx">
<h3>getpwd &lt;idx&gt;<a class="headerlink" href="#getpwd-idx" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: the current directory of a file system user</p>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="getfiles-dir">
<h3>getfiles &lt;dir&gt;<a class="headerlink" href="#getfiles-dir" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of files in the directory given; the directory is relative to dcc-path</p>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="getdirs-dir">
<h3>getdirs &lt;dir&gt;<a class="headerlink" href="#getdirs-dir" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of subdirectories in the directory given; the directory is relative to dcc-path</p>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="dccsend-filename-ircnick">
<h3>dccsend &lt;filename&gt; &lt;ircnick&gt;<a class="headerlink" href="#dccsend-filename-ircnick" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: attempts to start a dcc file transfer to the given nick; the filename must be specified either by full pathname or in relation to the bot’s startup directory</p>
<p>Returns:</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>0</td>
<td>success</td>
</tr>
<tr class="row-even"><td>1</td>
<td>the dcc table is full (too many connections)</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>can’t open a socket for the transfer</td>
</tr>
<tr class="row-even"><td>3</td>
<td>the file doesn’t exist</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>the file was queued for later transfer, which means that person has
too many file transfers going right now</td>
</tr>
<tr class="row-even"><td>5</td>
<td>copy-to-tmp is enabled and the file already exists in the temp
directory</td>
</tr>
</tbody>
</table>
<p>Module: transfer</p>
</div></blockquote>
</div>
<div class="section" id="filesend-idx-filename-ircnick">
<h3>filesend &lt;idx&gt; &lt;filename&gt; [ircnick]<a class="headerlink" href="#filesend-idx-filename-ircnick" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: like dccsend, except it operates for a current filesystem user, and the filename is assumed to be a relative path from that user’s current directory</p>
<p>Returns: 0 on failure; 1 on success (either an immediate send or a queued send)</p>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="fileresend-idx-filename-ircnick">
<h3>fileresend &lt;idx&gt; &lt;filename&gt; [ircnick]<a class="headerlink" href="#fileresend-idx-filename-ircnick" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: functions like filesend, only that it sends a DCC RESEND instead of a DCC SEND, which allows people to resume aborted file transfers if their client supports that protocol. ircII/BitchX/etc. support it; mIRC does not.</p>
<p>Returns: 0 on failure; 1 on success (either an immediate send or a queued send)</p>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="setdesc-dir-file-desc">
<h3>setdesc &lt;dir&gt; &lt;file&gt; &lt;desc&gt;<a class="headerlink" href="#setdesc-dir-file-desc" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sets the description for a file in a file system directory; the directory is relative to dcc-path</p>
<p>Returns: nothing</p>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="getdesc-dir-file">
<h3>getdesc &lt;dir&gt; &lt;file&gt;<a class="headerlink" href="#getdesc-dir-file" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: the description for a file in the file system, if one exists</p>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="setowner-dir-file-handle">
<h3>setowner &lt;dir&gt; &lt;file&gt; &lt;handle&gt;<a class="headerlink" href="#setowner-dir-file-handle" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: changes the owner for a file in the file system; the directory is relative to dcc-path</p>
<p>Returns: nothing</p>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="getowner-dir-file">
<h3>getowner &lt;dir&gt; &lt;file&gt;<a class="headerlink" href="#getowner-dir-file" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: the owner of a file in the file system</p>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="setlink-dir-file-link">
<h3>setlink &lt;dir&gt; &lt;file&gt; &lt;link&gt;<a class="headerlink" href="#setlink-dir-file-link" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: creates or changes a linked file (a file that actually exists on another bot); the directory is relative to dcc-path</p>
<p>Returns: nothing</p>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="getlink-dir-file">
<h3>getlink &lt;dir&gt; &lt;file&gt;<a class="headerlink" href="#getlink-dir-file" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: the link for a linked file, if it exists</p>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="getfileq-handle">
<h3>getfileq &lt;handle&gt;<a class="headerlink" href="#getfileq-handle" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: list of files queued by someone; each item in the list will be a sublist with two elements: nickname the file is being sent to and the filename</p>
<p>Module: transfer</p>
</div></blockquote>
</div>
<div class="section" id="getfilesendtime-idx">
<h3>getfilesendtime &lt;idx&gt;<a class="headerlink" href="#getfilesendtime-idx" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: the unixtime value from when a file transfer started, or a negative number:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>-1</td>
<td>no matching transfer with the specified idx was found</td>
</tr>
<tr class="row-even"><td>-2</td>
<td>the idx matches an entry which is not a file transfer</td>
</tr>
</tbody>
</table>
<p>Module: transfer</p>
</div></blockquote>
</div>
<div class="section" id="mkdir-directory-required-flags-channel">
<h3>mkdir &lt;directory&gt; [&lt;required-flags&gt; [channel]]<a class="headerlink" href="#mkdir-directory-required-flags-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: creates a directory in the file system. Only users with the required flags may access it.</p>
<p>Returns:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>0</td>
<td>success</td>
</tr>
<tr class="row-even"><td>1</td>
<td>can’t create directory</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>directory exists but is not a directory</td>
</tr>
<tr class="row-even"><td>-3</td>
<td>could not open filedb</td>
</tr>
</tbody>
</table>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="rmdir-directory">
<h3>rmdir &lt;directory&gt;<a class="headerlink" href="#rmdir-directory" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes a directory from the file system.</p>
<p>Returns: 0 on success; 1 on failure</p>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="mv-file-destination">
<h3>mv &lt;file&gt; &lt;destination&gt;<a class="headerlink" href="#mv-file-destination" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: moves a file from its source to the given destination. The file can also be a mask, such as /incoming/*, provided the destination is a directory.</p>
<p>Returns: If the command was successful, the number of files moved will be returned. Otherwise, a negative number will be returned:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>-1</td>
<td>invalid source file</td>
</tr>
<tr class="row-even"><td>-2</td>
<td>invalid destination</td>
</tr>
<tr class="row-odd"><td>-3</td>
<td>destination file exists</td>
</tr>
<tr class="row-even"><td>-4</td>
<td>no matches found</td>
</tr>
</tbody>
</table>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="cp-file-destination">
<h3>cp &lt;file&gt; &lt;destination&gt;<a class="headerlink" href="#cp-file-destination" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: copies a file from its source to the given destination. The file can also be a mask, such as /incoming/*, provided the destination is a directory.</p>
<p>Returns: If the command was successful, the number of files copied will be returned. Otherwise, a negative number will be returned:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>-1</td>
<td>invalid source file</td>
</tr>
<tr class="row-even"><td>-2</td>
<td>invalid destination</td>
</tr>
<tr class="row-odd"><td>-3</td>
<td>destination file exists</td>
</tr>
<tr class="row-even"><td>-4</td>
<td>no matches found</td>
</tr>
</tbody>
</table>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="getflags-dir">
<h3>getflags &lt;dir&gt;<a class="headerlink" href="#getflags-dir" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: the flags required to access a directory</p>
<p>Module: filesys</p>
</div></blockquote>
</div>
<div class="section" id="setflags-dir-flags-channel">
<h3>setflags &lt;dir&gt; [&lt;flags&gt; [channel]]<a class="headerlink" href="#setflags-dir-flags-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sets the flags required to access a directory</p>
<p>Returns: 0 on success; -1 or -3 on failure</p>
<p>Module: filesys</p>
</div></blockquote>
</div>
</div>
<div class="section" id="miscellaneous-commands">
<h2>Miscellaneous Commands<a class="headerlink" href="#miscellaneous-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="bind-type-flags-keyword-mask-proc-name">
<h3>bind &lt;type&gt; &lt;flags&gt; &lt;keyword/mask&gt; [proc-name]<a class="headerlink" href="#bind-type-flags-keyword-mask-proc-name" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: You can use the ‘bind’ command to attach Tcl procedures to certain events. flags are the flags the user must have to trigger the event (if applicable). proc-name is the name of the Tcl procedure to call for this command (see below for the format of the procedure call). If the proc-name is omitted, no binding is added. Instead, the current binding is returned (if it’s stackable, a list of the current bindings is returned).</p>
<p>Returns: name of the command that was added, or (if proc-name was omitted), a list of the current bindings for this command</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="unbind-type-flags-keyword-mask-proc-name">
<h3>unbind &lt;type&gt; &lt;flags&gt; &lt;keyword/mask&gt; &lt;proc-name&gt;<a class="headerlink" href="#unbind-type-flags-keyword-mask-proc-name" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes a previously created bind</p>
<p>Returns: name of the command that was removed</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="binds-type-mask">
<h3>binds [type/mask]<a class="headerlink" href="#binds-type-mask" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="docutils">
<dt>Returns: a list of Tcl binds, each item in the list is a sublist of five elements:</dt>
<dd>{&lt;type&gt; &lt;flags&gt; &lt;name&gt; &lt;hits&gt; &lt;proc&gt;}</dd>
</dl>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="logfile-modes-channel-filename">
<h3>logfile [&lt;modes&gt; &lt;channel&gt; &lt;filename&gt;]<a class="headerlink" href="#logfile-modes-channel-filename" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: creates a new logfile, which will log the modes given for the channel listed. If no logfile is specified, a list of existing logfiles will be returned. “*” indicates all channels. You can also change the modes and channel of an existing logfile with this command. Entering a blank mode and channel (“”) makes the bot stop logging there.</p>
<p>Logfile flags:</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>b</td>
<td>information about bot linking and userfile sharing</td>
</tr>
<tr class="row-even"><td>c</td>
<td>commands</td>
</tr>
<tr class="row-odd"><td>d</td>
<td>misc debug information</td>
</tr>
<tr class="row-even"><td>g</td>
<td>raw outgoing share traffic</td>
</tr>
<tr class="row-odd"><td>h</td>
<td>raw incoming share traffic</td>
</tr>
<tr class="row-even"><td>j</td>
<td>joins, parts, quits, topic changes, and netsplits on the channel</td>
</tr>
<tr class="row-odd"><td>k</td>
<td>kicks, bans, and mode changes on the channel</td>
</tr>
<tr class="row-even"><td>l</td>
<td>linked bot messages</td>
</tr>
<tr class="row-odd"><td>m</td>
<td>private msgs, notices and ctcps to the bot</td>
</tr>
<tr class="row-even"><td>o</td>
<td>misc info, errors, etc (IMPORTANT STUFF)</td>
</tr>
<tr class="row-odd"><td>p</td>
<td>public text on the channel</td>
</tr>
<tr class="row-even"><td>r</td>
<td>raw incoming server traffic</td>
</tr>
<tr class="row-odd"><td>s</td>
<td>server connects, disconnects, and notices</td>
</tr>
<tr class="row-even"><td>t</td>
<td>raw incoming botnet traffic</td>
</tr>
<tr class="row-odd"><td>u</td>
<td>raw outgoing botnet traffic</td>
</tr>
<tr class="row-even"><td>v</td>
<td>raw outgoing server traffic</td>
</tr>
<tr class="row-odd"><td>w</td>
<td>wallops (make sure the bot sets +w in init-server)</td>
</tr>
<tr class="row-even"><td>x</td>
<td>file transfers and file-area commands</td>
</tr>
</tbody>
</table>
<p>Returns: filename of logfile created, or, if no logfile is specified, a list of logfiles such as: {mco * eggdrop.log} {jp #lame lame.log}</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="maskhost-nick-user-host-masktype">
<h3>maskhost &lt;<a class="reference external" href="mailto:nick!user&#37;&#52;&#48;host">nick!user<span>&#64;</span>host</a>&gt; [masktype]<a class="headerlink" href="#maskhost-nick-user-host-masktype" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: masked hostmask for the string given according to the masktype (the default is 3).</p>
<p>Available types are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>0</td>
<td>*!user&#64;host</td>
</tr>
<tr class="row-even"><td>1</td>
<td>*!*user&#64;host</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>*!*&#64;host</td>
</tr>
<tr class="row-even"><td>3</td>
<td>*!*user&#64;*.host</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>*!*&#64;*.host</td>
</tr>
<tr class="row-even"><td>5</td>
<td>nick!user&#64;host</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>nick!*user&#64;host</td>
</tr>
<tr class="row-even"><td>7</td>
<td>nick!*&#64;host</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>nick!*user&#64;*.host</td>
</tr>
<tr class="row-even"><td>9</td>
<td>nick!*&#64;*.host</td>
</tr>
</tbody>
</table>
<p>You can also specify types from 10 to 19 which correspond to types
0 to 9, but instead of using a * wildcard to replace portions of the
host, only numbers in hostnames are replaced with the ‘?’ wildcard.
Same is valid for types 20-29, but instead of ‘?’, the ‘*’ wildcard
will be used. Types 30-39 set the host to ‘*’.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="timer-minutes-tcl-command-count">
<h3>timer &lt;minutes&gt; &lt;tcl-command&gt; [count]<a class="headerlink" href="#timer-minutes-tcl-command-count" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: executes the given Tcl command after a certain number of minutes have passed, at the top of the minute (ie, if a timer is started at 10:03:34 with 1 minute specified, it will execute at 10:04:00. If a timer is started at 10:06:34 with 2 minutes specified, it will execute at 10:08:00). If count is specified, the command will be executed count times with the given interval in between. If you specify a count of 0, the timer will repeat until it’s removed with killtimer or until the bot is restarted.</p>
<p>Returns: a timerID</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="utimer-seconds-tcl-command-count">
<h3>utimer &lt;seconds&gt; &lt;tcl-command&gt; [count]<a class="headerlink" href="#utimer-seconds-tcl-command-count" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: executes the given Tcl command after a certain number of seconds have passed. If count is specified, the command will be executed count times with the given interval in between. If you specify a count of 0, the utimer will repeat until it’s removed with killutimer or until the bot is restarted.</p>
<p>Returns: a timerID</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="timers">
<h3>timers<a class="headerlink" href="#timers" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of active minutely timers. Each entry in the list contains the number of minutes left till activation, the command that will be executed, the timerID, and the remaining number of repeats.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="utimers">
<h3>utimers<a class="headerlink" href="#utimers" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of active secondly timers. Each entry in the list contains the number of minutes left till activation, the command that will be executed, the timerID, and the remaining number of repeats.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="killtimer-timerid">
<h3>killtimer &lt;timerID&gt;<a class="headerlink" href="#killtimer-timerid" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes a minutely timer from the list</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="killutimer-timerid">
<h3>killutimer &lt;timerID&gt;<a class="headerlink" href="#killutimer-timerid" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes a secondly timer from the list</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="unixtime">
<h3>unixtime<a class="headerlink" href="#unixtime" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a long integer which represents the number of seconds that have passed since 00:00 Jan 1, 1970 (GMT).</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="duration-seconds">
<h3>duration &lt;seconds&gt;<a class="headerlink" href="#duration-seconds" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: the number of seconds converted into years, weeks, days, hours, minutes, and seconds. 804600 seconds is turned into 1 week 2 days 7 hours 30 minutes.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="strftime-formatstring-time">
<h3>strftime &lt;formatstring&gt; [time]<a class="headerlink" href="#strftime-formatstring-time" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a formatted string of time using standard strftime format. If time is specified, the value of the specified time is used. Otherwise, the current time is used. Note: The implementation of strftime varies from platform to platform, so the user should only use POSIX-compliant format specifiers to ensure fully portable code.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="ctime-unixtime">
<h3>ctime &lt;unixtime&gt;<a class="headerlink" href="#ctime-unixtime" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a formatted date/time string based on the current locale settings from the unixtime string given; for example “Fri Aug 3 11:34:55 1973”</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="myip">
<h3>myip<a class="headerlink" href="#myip" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a long number representing the bot’s IP address, as it might appear in (for example) a DCC request</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="rand-limit">
<h3>rand &lt;limit&gt;<a class="headerlink" href="#rand-limit" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a random integer between 0 and limit-1. Limit must be greater than 0 and equal to or less than RAND_MAX, which is generally 2147483647. The underlying pseudo-random number generator is not cryptographically secure.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="control-idx-command">
<h3>control &lt;idx&gt; &lt;command&gt;<a class="headerlink" href="#control-idx-command" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: removes an idx from the party line and sends all future input to the Tcl command given. The command will be called with two parameters: the idx and the input text. The command should return 0 to indicate success and 1 to indicate that it relinquishes control of the user back to the bot. If the input text is blank (“”), it indicates that the connection has been dropped. Also, if the input text is blank, never call killdcc on it, as it will fail with “invalid idx”.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="sendnote-from-to-bot-message">
<h3>sendnote &lt;from&gt; &lt;to[&#64;bot]&gt; &lt;message&gt;<a class="headerlink" href="#sendnote-from-to-bot-message" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: simulates what happens when one user sends a note to another</p>
<p>Returns:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>0</td>
<td>the send failed</td>
</tr>
<tr class="row-even"><td>1</td>
<td>the note was delivered locally or sent to another bot</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>the note was stored locally</td>
</tr>
<tr class="row-even"><td>3</td>
<td>the user’s notebox is too full to store a note</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>a Tcl binding caught the note</td>
</tr>
<tr class="row-even"><td>5</td>
<td>the note was stored because the user is away</td>
</tr>
</tbody>
</table>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="link-via-bot-bot">
<h3>link [via-bot] &lt;bot&gt;<a class="headerlink" href="#link-via-bot-bot" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: attempts to link to another bot directly. If you specify a via-bot, it tells the via-bot to attempt the link.</p>
<p>Returns: 1 if the link will be attempted; 0 otherwise</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="unlink-bot">
<h3>unlink &lt;bot&gt;<a class="headerlink" href="#unlink-bot" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: attempts to unlink a bot from the botnet</p>
<p>Returns: 1 on success; 0 otherwise</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="encrypt-key-string">
<h3>encrypt &lt;key&gt; &lt;string&gt;<a class="headerlink" href="#encrypt-key-string" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: encrypted string (using the currently loaded encryption module), encoded into ASCII using base-64. As of v1.8.4, the default blowfish encryption module can use either the older ECB mode (currently used by default for compatibility reasons), or the more recent and more-secure CBC mode. You can explicitly request which encryption mode to use by prefixing the encryption key with either “ecb:” or “cbc:”, or by using the blowfish-use-mode setting in the config file. Note: the default encryption mode for this function is planned to transition from ECB to CBC in v1.9.0.</p>
<p>Module: encryption</p>
</div></blockquote>
</div>
<div class="section" id="decrypt-key-encrypted-base64-string">
<h3>decrypt &lt;key&gt; &lt;encrypted-base64-string&gt;<a class="headerlink" href="#decrypt-key-encrypted-base64-string" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: decrypted string (using the currently loaded encryption module). If the default blowfish encryption module is used, this automatically picks the right decryption mode. You may still prefix the key with “ecb:” or “cbc:” or use the blowfish-use-mode setting in the config file (see the encrypt command for more detailed information).</p>
<p>Module: encryption</p>
</div></blockquote>
</div>
<div class="section" id="encpass-password">
<h3>encpass &lt;password&gt;<a class="headerlink" href="#encpass-password" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: encrypted string (using the currently loaded encryption module)</p>
<p>Module: encryption</p>
</div></blockquote>
</div>
<div class="section" id="die-reason">
<h3>die [reason]<a class="headerlink" href="#die-reason" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: causes the bot to log a fatal error and exit completely. If no reason is given, “EXIT” is used.</p>
<p>Returns: none</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="unames">
<h3>unames<a class="headerlink" href="#unames" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: the current operating system the bot is using</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="dnslookup-ip-address-hostname-proc-arg1-arg2-argn">
<h3>dnslookup &lt;ip-address/hostname&gt; &lt;proc&gt; [[arg1] [arg2] … [argN]]<a class="headerlink" href="#dnslookup-ip-address-hostname-proc-arg1-arg2-argn" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: This issues an asynchronous dns lookup request. The command will block if dns module is not loaded; otherwise it will either return immediately or immediately call the specified proc (e.g. if the lookup is already cached).</p>
<p>As soon as the request completes, the specified proc will be called as follows:</p>
<blockquote>
<div>&lt;proc&gt; &lt;ipaddress&gt; &lt;hostname&gt; &lt;status&gt; [[arg1] [arg2] … [argN]]</div></blockquote>
<p>status is 1 if the lookup was successful and 0 if it wasn’t. All additional parameters (called arg1, arg2 and argN above) get appended to the proc’s other parameters.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="md5-string">
<h3>md5 &lt;string&gt;<a class="headerlink" href="#md5-string" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: the 128 bit MD5 message-digest of the specified string</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="callevent-event">
<h3>callevent &lt;event&gt;<a class="headerlink" href="#callevent-event" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: triggers the evnt bind manually for a certain event. You can call arbitrary events here, even ones that are not pre-defined by Eggdrop. For example: callevent rehash, or callevent myownevent123.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="traffic">
<h3>traffic<a class="headerlink" href="#traffic" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of sublists containing information about the bot’s traffic usage in bytes. Each sublist contains five elements: type, in-traffic today, in-traffic total, out-traffic today, out-traffic total (in that order).</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="modules">
<h3>modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Returns: a list of sublists containing information about the bot’s currently loaded modules. Each sublist contains three elements: module, version, and dependencies. Each dependency is also a sublist containing the module name and version.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="loadmodule-module">
<h3>loadmodule &lt;module&gt;<a class="headerlink" href="#loadmodule-module" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: attempts to load the specified module.</p>
<p>Returns: “Already loaded.” if the module is already loaded, “” if successful, or the reason the module couldn’t be loaded.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="unloadmodule-module">
<h3>unloadmodule &lt;module&gt;<a class="headerlink" href="#unloadmodule-module" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: attempts to unload the specified module.</p>
<p>Returns: “No such module” if the module is not loaded, “” otherwise.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="loadhelp-helpfile-name">
<h3>loadhelp &lt;helpfile-name&gt;<a class="headerlink" href="#loadhelp-helpfile-name" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: attempts to load the specified help file from the help/ directory.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="unloadhelp-helpfile-name">
<h3>unloadhelp &lt;helpfile-name&gt;<a class="headerlink" href="#unloadhelp-helpfile-name" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: attempts to unload the specified help file.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="reloadhelp">
<h3>reloadhelp<a class="headerlink" href="#reloadhelp" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: reloads the bot’s help files.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="restart">
<h3>restart<a class="headerlink" href="#restart" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: rehashes the bot, kills all timers, reloads all modules, and reconnects the bot to the next server in its list.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="rehash">
<h3>rehash<a class="headerlink" href="#rehash" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: rehashes the bot</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="stripcodes-strip-flags-string">
<h3>stripcodes &lt;strip-flags&gt; &lt;string&gt;<a class="headerlink" href="#stripcodes-strip-flags-string" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: strips specified control characters from the string given. strip-flags can be any combination of the following:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>c</td>
<td>remove all color codes</td>
</tr>
<tr class="row-even"><td>b</td>
<td>remove all boldface codes</td>
</tr>
<tr class="row-odd"><td>r</td>
<td>remove all reverse video codes</td>
</tr>
<tr class="row-even"><td>u</td>
<td>remove all underline codes</td>
</tr>
<tr class="row-odd"><td>a</td>
<td>remove all ANSI codes</td>
</tr>
<tr class="row-even"><td>g</td>
<td>remove all ctrl-g (bell) codes</td>
</tr>
<tr class="row-odd"><td>o</td>
<td>remove all ordinary codes (ctrl+o, terminates bold/color/..)</td>
</tr>
<tr class="row-even"><td>i</td>
<td>remove all italics codes</td>
</tr>
<tr class="row-odd"><td>*</td>
<td>remove all of the above</td>
</tr>
</tbody>
</table>
<p>Returns: the stripped string.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="matchaddr-hostmask-address">
<h3>matchaddr &lt;hostmask&gt; &lt;address&gt;<a class="headerlink" href="#matchaddr-hostmask-address" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: checks if the address matches the hostmask given. The address should be in the form nick!user&#64;host.</p>
<p>Returns: 1 if the address matches the hostmask, 0 otherwise.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="matchcidr-block-address-prefix">
<h3>matchcidr &lt;block&gt; &lt;address&gt; &lt;prefix&gt;<a class="headerlink" href="#matchcidr-block-address-prefix" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: performs a cidr match on the specified ip addresses. IPv6 is supported, if enabled at compile time.</p>
<p>Example: matchcidr 192.168.0.0 192.168.1.17 16</p>
<p>Returns: 1 if the address matches the block prefix, 0 otherwise.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="matchstr-pattern-string">
<h3>matchstr &lt;pattern&gt; &lt;string&gt;<a class="headerlink" href="#matchstr-pattern-string" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: checks if pattern matches string. Only two wildcards are supported: ‘*’ and ‘?’. Matching is case-insensitive. This command is intended as a simplified alternative to Tcl’s string match.</p>
<p>Returns: 1 if the pattern matches the string, 0 if it doesn’t.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="rfcequal-string1-string2">
<h3>rfcequal &lt;string1&gt; &lt;string2&gt;<a class="headerlink" href="#rfcequal-string1-string2" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: Checks if two strings are equal. Case is ignored, and this uses RFC1459 matching {}|~ == []^, depending on the rfc_compliant setting.</p>
<p>Returns: 1 if equal, 0 if not.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="status-type">
<h3>status [type]<a class="headerlink" href="#status-type" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: provides eggdrop status information similar to the .status command in partyline. The available types of information are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>cpu</td>
<td>total cpu time spent by eggdrop</td>
</tr>
<tr class="row-even"><td>mem</td>
<td>dynamically allocated memory excluding the Tcl interpreter</td>
</tr>
<tr class="row-odd"><td>cache</td>
<td>user entries cache hits (in %)</td>
</tr>
<tr class="row-even"><td>ipv6</td>
<td>shows whether IPv6 support was compiled in</td>
</tr>
</tbody>
</table>
<p>Returns: the requested information type or all information if type isn’t specified. The format is a flat list of name-value pairs.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="istls-idx">
<h3>istls &lt;idx&gt;<a class="headerlink" href="#istls-idx" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: checks if a connection is encrypted or cleartext. This command is available on TLS-enabled bots only.</p>
<p>Returns: 1 if the idx is a TLS connection, 0 if it’s plaintext.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="starttls-idx">
<h3>starttls &lt;idx&gt;<a class="headerlink" href="#starttls-idx" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: establishes a secure (using TLS) connection over idx. The TLS connection should be first negotiated over the plaintext link, or using other means. Both parties must switch to TLS simultaneously. This command is available on TLS-enabled bots only.</p>
<p>Returns: nothing</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="tlsstatus-idx">
<h3>tlsstatus &lt;idx&gt;<a class="headerlink" href="#tlsstatus-idx" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: provides information about an established TLS connection This includes certificate and cipher information as well as protocol version. This command is available on TLS-enabled bots only.</p>
<p>Returns: a flat list of name-value pairs</p>
<p>Module: core</p>
</div></blockquote>
</div>
</div>
<div class="section" id="global-variables">
<h2>Global Variables<a class="headerlink" href="#global-variables" title="Permalink to this headline">¶</a></h2>
<p>NOTE: All config file variables are also global.</p>
<div class="section" id="botnick">
<h3>botnick<a class="headerlink" href="#botnick" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Value: the current nickname the bot is using (for example: “Valis”, “Valis0”, etc.)</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="botname">
<h3>botname<a class="headerlink" href="#botname" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Value: the current nick!user&#64;host that the server sees (for example: “Valis!valis&#64;crappy.com”)</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="server">
<h3>server<a class="headerlink" href="#server" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Value: the current server’s real name (what server calls itself) and port bot is connected to (for example: “irc.math.ufl.edu:6667”) Note that this does not necessarily match the servers internet address.</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="serveraddress">
<h3>serveraddress<a class="headerlink" href="#serveraddress" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Value: the current server’s internet address (hostname or IP) and port bot is connected to. This will correspond to the entry in server list (for example: “eu.undernet.org:6667”). Note that this does not necessarily match the name server calls itself.</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="version">
<h3>version<a class="headerlink" href="#version" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Value: current bot version “1.1.2+pl1 1010201”; first item is the text version, to include a patch string if present, and second item is a numerical version</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="numversion">
<h3>numversion*<a class="headerlink" href="#numversion" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Value: the current numeric bot version (for example: “1010201”). Numerical version is in the format of “MNNRRPP”, where:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>M</td>
<td>major release number</td>
</tr>
<tr class="row-even"><td>NN</td>
<td>minor release number</td>
</tr>
<tr class="row-odd"><td>RR</td>
<td>sub-release number</td>
</tr>
<tr class="row-even"><td>PP</td>
<td>patch level for that sub-release</td>
</tr>
</tbody>
</table>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="uptime">
<h3>uptime<a class="headerlink" href="#uptime" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Value: the unixtime value for when the bot was started</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="server-online">
<h3>server-online<a class="headerlink" href="#server-online" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Value: the unixtime value for when the bot connected to its current server</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="lastbind">
<h3>lastbind<a class="headerlink" href="#lastbind" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Value: the last command binding which was triggered. This allows you to identify which command triggered a Tcl proc.</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="isjuped">
<h3>isjuped<a class="headerlink" href="#isjuped" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Value: 1 if bot’s nick is juped(437); 0 otherwise</p>
<p>Module: server</p>
</div></blockquote>
</div>
<div class="section" id="handlen">
<h3>handlen<a class="headerlink" href="#handlen" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Value: the value of the HANDLEN define in src/eggdrop.h</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="config">
<h3>config<a class="headerlink" href="#config" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Value: the filename of the config file Eggdrop is currently using</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="configureargs">
<h3>configureargs<a class="headerlink" href="#configureargs" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Value: a string (not list) of configure arguments in shell expansion (single quotes)</p>
<p>Module: core</p>
</div></blockquote>
</div>
<div class="section" id="language">
<h3>language<a class="headerlink" href="#language" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Value: a string containing the language with the highest priority for use by Eggdrop. This commonly reflects what is added with addlang in the config file</p>
<p>Module: core</p>
</div></blockquote>
</div>
</div>
<div class="section" id="binds">
<h2>Binds<a class="headerlink" href="#binds" title="Permalink to this headline">¶</a></h2>
<p>You can use the ‘bind’ command to attach Tcl procedures to certain events.
For example, you can write a Tcl procedure that gets called every time a
user says “danger” on the channel.</p>
<p>Some bind types are marked as “stackable”. That means that you can bind
multiple commands to the same trigger. Normally, for example, a bind such
as ‘bind msg - stop msg:stop’ (which makes a msg-command “stop” call the
Tcl proc “msg:stop”) will overwrite any previous binding you had for the
msg command “stop”. With stackable bindings, like ‘msgm’ for example,
you can bind the same command to multiple procs. When the bind is triggered,
ALL of the Tcl procs that are bound to it will be called. Raw binds are
triggered before builtin binds, as a builtin bind has the potential to
modify args.</p>
<p>To remove a bind, use the ‘unbind’ command. For example, to remove the
bind for the “stop” msg command, use ‘unbind msg - stop msg:stop’.</p>
<div class="section" id="bind-types">
<h3>Bind Types<a class="headerlink" href="#bind-types" title="Permalink to this headline">¶</a></h3>
<p>The following is a list of bind types and how they work. Below each bind type is the format of the bind command, the list of arguments sent to the Tcl proc, and an explanation.</p>
<ol class="arabic simple">
<li>MSG</li>
</ol>
<blockquote>
<div><p>bind msg &lt;flags&gt; &lt;command&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;text&gt;</p>
<p>Description: used for /msg commands. The first word of the user’s msg is the command, and everything else becomes the text argument.</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>DCC</li>
</ol>
<blockquote>
<div><p>bind dcc &lt;flags&gt; &lt;command&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;idx&gt; &lt;text&gt;</p>
<p>Description: used for partyline commands; the command is the first word and everything else becomes the text argument. The idx is valid until the user disconnects. After that, it may be reused, so be careful about storing an idx for long periods of time.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>FIL</li>
</ol>
<blockquote>
<div><p>bind fil &lt;flags&gt; &lt;command&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;idx&gt; &lt;text&gt;</p>
<p>Description: the same as DCC, except this is triggered if the user is in the file area instead of the party line</p>
<p>Module: filesys</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>PUB</li>
</ol>
<blockquote>
<div><p>bind pub &lt;flags&gt; &lt;command&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt; &lt;text&gt;</p>
<p>Description: used for commands given on a channel. The first word becomes the command and everything else is the text argument.</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="5">
<li>MSGM (stackable)</li>
</ol>
<blockquote>
<div><p>bind msgm &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;text&gt;</p>
<p>Description: matches the entire line of text from a /msg with the mask. This is useful for binding Tcl procs to words or phrases spoken anywhere within a line of text. If the proc returns 1, Eggdrop will not log the message that triggered this bind. MSGM binds are processed before MSG binds. If the exclusive-binds setting is enabled, MSG binds will not be triggered by text that a MSGM bind has already handled.</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="6">
<li>PUBM (stackable)</li>
</ol>
<blockquote>
<div><p>bind pubm &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt; &lt;text&gt;</p>
<p>Description: just like MSGM, except it’s triggered by things said on a channel instead of things /msg’d to the bot. The mask is matched against the channel name followed by the text and can contain wildcards. If the proc returns 1, Eggdrop will not log the message that triggered this bind. PUBM binds are processed before PUB binds. If the exclusive-binds setting is enabled, PUB binds will not be triggered by text that a PUBM bind has already handled.</p>
<dl class="docutils">
<dt>Examples:</dt>
<dd><dl class="first last docutils">
<dt>bind pubm * “#eggdrop Hello*” myProc</dt>
<dd>Listens on #eggdrop for any line that begins with “Hello”</dd>
<dt>bind pubm * “% Hello*” myProc</dt>
<dd>Listens on any channel for any line that begins with “Hello”</dd>
<dt>bind pubm * “% !command” myProc</dt>
<dd>Listens on any channel for a line that ONLY contains “!command”</dd>
</dl>
</dd>
</dl>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="7">
<li>NOTC (stackable)</li>
</ol>
<blockquote>
<div><p>bind notc &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;text&gt; &lt;dest&gt;</p>
<p>Description: dest will be a nickname (the bot’s nickname, obviously) or a channel name. mask is matched against the entire text of the notice and can contain wildcards. It is considered a breach of protocol to respond to a /notice on IRC, so this is intended for internal use (logging, etc.) only. Note that server notices do not trigger the NOTC bind. If the proc returns 1, Eggdrop will not log the message that triggered this bind.</p>
<p>New Tcl procs should be declared as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>proc notcproc {nick uhost hand text {dest &quot;&quot;}} {
  global botnick; if {$dest == &quot;&quot;} {set dest $botnick}
  ...
}
</pre></div>
</div>
<p>for compatibility.</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="8">
<li>JOIN (stackable)</li>
</ol>
<blockquote>
<div><p>bind join &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt;</p>
<p>Description: triggered by someone joining the channel. The mask in the bind is matched against “#channel nick!user&#64;host” and can contain wildcards.</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="9">
<li>PART (stackable)</li>
</ol>
<blockquote>
<div><p>bind part &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt; &lt;msg&gt;</p>
<p>Description: triggered by someone leaving the channel. The mask is matched against “#channel nick!user&#64;host” and can contain wildcards. If no part message is specified, msg will be set to “”.</p>
<p>New Tcl procs should be declared as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">proc</span> <span class="n">partproc</span> <span class="p">{</span><span class="n">nick</span> <span class="n">uhost</span> <span class="n">hand</span> <span class="n">chan</span> <span class="p">{</span><span class="n">msg</span> <span class="s2">&quot;&quot;</span><span class="p">}}</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>for compatibility.</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="10">
<li>SIGN (stackable)</li>
</ol>
<blockquote>
<div><p>bind sign &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt; &lt;reason&gt;</p>
<p>Description: triggered by a signoff, or possibly by someone who got netsplit and never returned. The signoff message is the last argument to the proc. Wildcards can be used in the mask, which is matched against ‘#channel nick!user&#64;host’.</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="11">
<li>TOPC (stackable)</li>
</ol>
<blockquote>
<div><p>bind topc &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt; &lt;topic&gt;</p>
<p>Description: triggered by a topic change. mask can contain wildcards and is matched against ‘#channel &lt;new topic&gt;’.</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="12">
<li>KICK (stackable)</li>
</ol>
<blockquote>
<div><p>bind kick &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt; &lt;target&gt; &lt;reason&gt;</p>
<p>Description: triggered when someone is kicked off the channel. The mask is matched against ‘#channel target reason’ where the target is the nickname of the person who got kicked (can contain wildcards). The proc is called with the nick, user&#64;host, and handle of the kicker, plus the channel, the nickname of the person who was kicked, and the reason.</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="13">
<li>NICK (stackable)</li>
</ol>
<blockquote>
<div><p>bind nick &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt; &lt;newnick&gt;</p>
<p>Description: triggered when someone changes nicknames. The mask is matched against ‘#channel newnick’ and can contain wildcards. Channel is “*” if the user isn’t on a channel (usually the bot not yet in a channel).</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="14">
<li>MODE (stackable)</li>
</ol>
<blockquote>
<div><p>bind mode &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt; &lt;mode-change&gt; &lt;target&gt;</p>
<p>Description: mode changes are broken down into their component parts before being sent here, so the &lt;mode-change&gt; will always be a single mode, such as “+m” or “-o”. target will show the argument of the mode change (for o/v/b/e/I) or “” if the set mode does not take an argument. The bot’s automatic response to a mode change will happen AFTER all matching Tcl procs are called. The mask will be matched against ‘#channel +/-modes’ and can contain wildcards.</p>
<p>If it is a server mode, nick will be “”, user&#64;host is the server name, and handle is *.</p>
<p>Note that “target” was added in 1.3.17 and that this will break Tcl scripts that were written for pre-1.3.17 Eggdrop that use the mode binding. Also, due to a typo, mode binds were broken completely in 1.3.17 but were fixed in 1.3.18. Mode bindings are not triggered at all in 1.3.17.</p>
<p>One easy example (from guppy) of how to support the “target” parameter in 1.3.18 and later and still remain compatible with older Eggdrop versions is:</p>
<p>Old script looks as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bind</span> <span class="n">mode</span> <span class="o">-</span> <span class="o">*</span> <span class="n">mode_proc</span>
<span class="n">proc</span> <span class="n">mode_proc</span> <span class="p">{</span><span class="n">nick</span> <span class="n">uhost</span> <span class="n">hand</span> <span class="n">chan</span> <span class="n">mode</span><span class="p">}</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>To make it work with 1.3.18+ and stay compatible with older bots, do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>bind mode - * mode_proc_fix
proc mode_proc_fix {nick uhost hand chan mode {target &quot;&quot;}} {
  if {$target != &quot;&quot;} {append mode &quot; $target&quot;}
  mode_proc $nick $uhost $hand $chan $mode
}
proc mode_proc {nick uhost hand chan mode} { ... }
</pre></div>
</div>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="15">
<li>CTCP (stackable)</li>
</ol>
<blockquote>
<div><p>bind ctcp &lt;flags&gt; &lt;keyword&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;dest&gt; &lt;keyword&gt; &lt;text&gt;</p>
<p>Description: dest will be a nickname (the bot’s nickname, obviously) or channel name. keyword is the ctcp command (which can contain wildcards), and text may be empty. If the proc returns 0, the bot will attempt its own processing of the ctcp command.</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="16">
<li>CTCR (stackable)</li>
</ol>
<blockquote>
<div><p>bind ctcr &lt;flags&gt; &lt;keyword&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;dest&gt; &lt;keyword&gt; &lt;text&gt;</p>
<p>Description: just like ctcp, but this is triggered for a ctcp-reply (ctcp embedded in a notice instead of a privmsg)</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="17">
<li>RAW (stackable)</li>
</ol>
<blockquote>
<div><p>bind raw &lt;flags&gt; &lt;keyword&gt; &lt;proc&gt;</p>
<p>procname &lt;from&gt; &lt;keyword&gt; &lt;text&gt;</p>
<p>Description: previous versions of Eggdrop required a special compile option to enable this binding, but it’s now standard. The keyword is either a numeric, like “368”, or a keyword, such as “PRIVMSG”. “from” will be the server name or the source user (depending on the keyword); flags are ignored. The order of the arguments is identical to the order that the IRC server sends to the bot. The pre-processing  only splits it apart enough to determine the keyword. If the proc returns 1, Eggdrop will not process the line any further (this could cause unexpected behavior in some cases).</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="18">
<li>BOT</li>
</ol>
<blockquote>
<div><p>bind bot &lt;flags&gt; &lt;command&gt; &lt;proc&gt;</p>
<p>procname &lt;from-bot&gt; &lt;command&gt; &lt;text&gt;</p>
<p>Description: triggered by a message coming from another bot in the botnet. The first word is the command and the rest becomes the text argument; flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="19">
<li>CHON (stackable)</li>
</ol>
<blockquote>
<div><p>bind chon &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;idx&gt;</p>
<p>Description: when someone first enters the party-line area of the bot via dcc chat or telnet, this is triggered before they are connected to a chat channel (so, yes, you can change the channel in a ‘chon’ proc). mask is matched against the handle and supports wildcards. This is NOT triggered when someone returns from the file area, etc.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="20">
<li>CHOF (stackable)</li>
</ol>
<blockquote>
<div><p>bind chof &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;idx&gt;</p>
<p>Description: triggered when someone leaves the party line to disconnect from the bot. mask is matched against the handle and can contain wildcards. Note that the connection may have already been dropped by the user, so don’t send output to the idx.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="21">
<li>SENT (stackable)</li>
</ol>
<blockquote>
<div><p>bind sent &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;nick&gt; &lt;path/to/file&gt;</p>
<p>Description: after a user has successfully downloaded a file from the bot, this binding is triggered. mask is matched against the handle of the user that initiated the transfer and supports wildcards. nick is the actual recipient (on IRC) of the file. The path is relative to the dcc directory (unless the file transfer was started by a script call to ‘dccsend’, in which case the path is the exact path given in the call to ‘dccsend’).</p>
<p>Module: transfer</p>
</div></blockquote>
<ol class="arabic simple" start="22">
<li>RCVD (stackable)</li>
</ol>
<blockquote>
<div><p>bind rcvd &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;nick&gt; &lt;path/to/file&gt;</p>
<p>Description: triggered after a user uploads a file successfully. mask is matched against the user’s handle. nick is the IRC nickname that the file transfer originated from. The path is where the file ended up, relative to the dcc directory (usually this is your incoming dir).</p>
<p>Module: transfer</p>
</div></blockquote>
<ol class="arabic simple" start="23">
<li>CHAT (stackable)</li>
</ol>
<blockquote>
<div><p>bind chat &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;channel#&gt; &lt;text&gt;</p>
<p>Description: when a user says something on the botnet, it invokes this binding. Flags are ignored; handle could be a user on this bot (“DronePup”) or on another bot (“Eden&#64;Wilde”) and therefore you can’t rely on a local user record. The mask is checked against the entire line of text and supports wildcards.</p>
<p>NOTE: If a BOT says something on the botnet, the BCST bind is invoked instead.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="24">
<li>LINK (stackable)</li>
</ol>
<blockquote>
<div><p>bind link &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;botname&gt; &lt;via&gt;</p>
<p>Description: triggered when a bot links into the botnet. botname is the botnetnick of the bot that just linked in; via is the bot it linked through. The mask is checked against the botnetnick of the bot that linked and supports wildcards. flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="25">
<li>DISC (stackable)</li>
</ol>
<blockquote>
<div><p>bind disc &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;botname&gt;</p>
<p>Description: triggered when a bot disconnects from the botnet for whatever reason. Just like the link bind, flags are ignored; mask is matched against the botnetnick of the bot that unlinked. Wildcards are supported in mask.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="26">
<li>SPLT (stackable)</li>
</ol>
<blockquote>
<div><p>bind splt &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt;</p>
<p>Description: triggered when someone gets netsplit on the channel. Be aware that this may be a false alarm (it’s easy to fake a netsplit signoff message on some networks); mask may contain wildcards and is matched against ‘#channel nick!user&#64;host’. Anyone who is SPLT will trigger a REJN or SIGN within the next wait-split (defined in the config file) seconds.</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="27">
<li>REJN (stackable)</li>
</ol>
<blockquote>
<div><p>bind rejn &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;channel&gt;</p>
<p>Description: someone who was split has rejoined. mask can contain wildcards, and is matched against ‘#channel nick!user&#64;host’.</p>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="28">
<li>FILT (stackable)</li>
</ol>
<blockquote>
<div><p>bind filt &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;idx&gt; &lt;text&gt;</p>
<p>Description: party line and file system users have their text sent through filt before being processed. If the proc returns a blank string, the text is considered parsed. Otherwise, the bot will use the text returned from the proc and continue parsing that</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="29">
<li>NEED (stackable)</li>
</ol>
<blockquote>
<div><p>bind need &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;channel&gt; &lt;type&gt;</p>
<p>Description: this bind is triggered on certain events, like when the bot needs operator status or the key for a channel. The types are: op, unban, invite, limit, and key; the mask is matched against ‘#channel type’ and can contain wildcards. flags are ignored.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bind</span> <span class="n">need</span> <span class="o">-</span> <span class="s2">&quot;</span><span class="si">% o</span><span class="s2">p&quot;</span> <span class="n">needop</span> <span class="o">&lt;</span> <span class="n">handles</span> <span class="n">only</span> <span class="n">need</span> <span class="n">op</span>
<span class="n">bind</span> <span class="n">need</span> <span class="o">-</span> <span class="s2">&quot;*&quot;</span> <span class="n">needall</span>   <span class="o">&lt;</span> <span class="n">handles</span> <span class="nb">all</span> <span class="n">needs</span>
</pre></div>
</div>
<p>Module: irc</p>
</div></blockquote>
<ol class="arabic simple" start="30">
<li>FLUD (stackable)</li>
</ol>
<blockquote>
<div><p>bind flud &lt;flags&gt; &lt;type&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;user&#64;host&gt; &lt;handle&gt; &lt;type&gt; &lt;channel&gt;</p>
<p>Description: any floods detected through the flood control settings (like ‘flood-ctcp’) are sent here before processing. If the proc returns 1, no further action is taken on the flood; if the proc returns 0, the bot will do its normal “punishment” for the flood. The flood types are: pub, msg, join, or ctcp (and can be masked to “*” for the bind); flags are ignored.</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="31">
<li>NOTE (stackable)</li>
</ol>
<blockquote>
<div><p>bind note &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;from&gt; &lt;to&gt; &lt;text&gt;</p>
<p>Description: incoming notes (either from the party line, someone on IRC, or someone on another bot on the botnet) are checked against these binds before being processed. The mask is matched against the receiving handle and supports wildcards. If the proc returns 1, Eggdrop will not process the note any further. Flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="32">
<li>ACT (stackable)</li>
</ol>
<blockquote>
<div><p>bind act &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;channel#&gt; &lt;action&gt;</p>
<p>Description: when someone does an action on the botnet, it invokes this binding. flags are ignored; the mask is matched against the text of the action and can support wildcards.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="33">
<li>WALL (stackable)</li>
</ol>
<blockquote>
<div><p>bind wall &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;from&gt; &lt;msg&gt;</p>
<p>Description: when the bot receives a wallops, it invokes this binding. flags are ignored; the mask is matched against the text of the wallops msg. Note that RFC shows the server name as a source of the message, whereas many IRCds send the nick!user&#64;host of the actual sender, thus, Eggdrop will not parse it at all, but simply pass it to bind in its original form. If the proc returns 1,           Eggdrop will not log the message that triggered this bind.</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="34">
<li>BCST (stackable)</li>
</ol>
<blockquote>
<div><p>bind bcst &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;botname&gt; &lt;channel#&gt; &lt;text&gt;</p>
<p>Description: when a bot broadcasts something on the botnet (see ‘dccbroadcast’ above), it invokes this binding. flags are ignored; the mask is matched against the message text and can contain wildcards. ‘channel’ argument will always be ‘-1’ since broadcasts are not directed to any partyline channel.</p>
<p>It is also invoked when a BOT (not a person, as with the CHAT bind) ‘says’ something on a channel. In this case, the ‘channel’ argument will be a valid channel, and not ‘-1’.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="35">
<li>CHJN (stackable)</li>
</ol>
<blockquote>
<div><p>bind chjn &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;botname&gt; &lt;handle&gt; &lt;channel#&gt; &lt;flag&gt; &lt;idx&gt; &lt;user&#64;host&gt;</p>
<p>Description: when someone joins a botnet channel, it invokes this binding. The mask is matched against the channel and can contain wildcards. flag is one of: * (owner), + (master), &#64; (op), or % (botnet master). Flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="36">
<li>CHPT (stackable)</li>
</ol>
<blockquote>
<div><p>bind chpt &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;botname&gt; &lt;handle&gt; &lt;idx&gt; &lt;channel#&gt;</p>
<p>Description: when someone parts a botnet channel, it invokes this binding. The mask is matched against the channel and can contain wildcards. Flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="37">
<li>TIME (stackable)</li>
</ol>
<blockquote>
<div><p>bind time &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;minute 00-59&gt; &lt;hour 00-23&gt; &lt;day 01-31&gt; &lt;month 00-11&gt; &lt;year 0000-9999&gt;</p>
<p>Description: allows you to schedule procedure calls at certain times. mask matches 5 space separated integers of the form: “minute hour day month year”. The month var starts at 00 (Jan) and ends at 11 (Dec). Minute, hour, day, month have a zero padding so they are exactly two characters long; year is four characters. Flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="38">
<li>AWAY (stackable)</li>
</ol>
<blockquote>
<div><p>bind away &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;botname&gt; &lt;idx&gt; &lt;text&gt;</p>
<p>Description: triggers when a user goes away or comes back on the botnet. text is the reason than has been specified (text is “” when returning). mask is matched against the botnet-nick of the bot the user is connected to and supports wildcards. flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="39">
<li>LOAD (stackable)</li>
</ol>
<blockquote>
<div><p>bind load &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;module&gt;</p>
<p>Description: triggers when a module is loaded. mask is matched against the name of the loaded module and supports wildcards; flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="40">
<li>UNLD (stackable)</li>
</ol>
<blockquote>
<div><p>bind unld &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;module&gt;</p>
<p>Description: triggers when a module is unloaded. mask is matched against the name of the unloaded module and supports wildcards;
flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="41">
<li>NKCH (stackable)</li>
</ol>
<blockquote>
<div><p>bind nkch &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;oldhandle&gt; &lt;newhandle&gt;</p>
<p>Description: triggered whenever a local user’s handle is changed (in the userfile). mask is matched against the user’s old handle and can contain wildcards; flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="42">
<li>EVNT (stackable)</li>
</ol>
<blockquote>
<div><p>bind evnt &lt;flags&gt; &lt;type&gt; &lt;proc&gt;</p>
<p>procname &lt;type&gt;</p>
<p>Description: triggered whenever one of these events happen. flags are ignored. Pre-defined events triggered by Eggdrop are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sighup</span>            <span class="o">-</span> <span class="n">called</span> <span class="n">on</span> <span class="n">a</span> <span class="n">kill</span> <span class="o">-</span><span class="n">HUP</span> <span class="o">&lt;</span><span class="n">pid</span><span class="o">&gt;</span>
<span class="n">sigterm</span>           <span class="o">-</span> <span class="n">called</span> <span class="n">on</span> <span class="n">a</span> <span class="n">kill</span> <span class="o">-</span><span class="n">TERM</span> <span class="o">&lt;</span><span class="n">pid</span><span class="o">&gt;</span>
<span class="n">sigill</span>            <span class="o">-</span> <span class="n">called</span> <span class="n">on</span> <span class="n">a</span> <span class="n">kill</span> <span class="o">-</span><span class="n">ILL</span> <span class="o">&lt;</span><span class="n">pid</span><span class="o">&gt;</span>
<span class="n">sigquit</span>           <span class="o">-</span> <span class="n">called</span> <span class="n">on</span> <span class="n">a</span> <span class="n">kill</span> <span class="o">-</span><span class="n">QUIT</span> <span class="o">&lt;</span><span class="n">pid</span><span class="o">&gt;</span>
<span class="n">save</span>              <span class="o">-</span> <span class="n">called</span> <span class="n">when</span> <span class="n">the</span> <span class="n">userfile</span> <span class="ow">is</span> <span class="n">saved</span>
<span class="n">rehash</span>            <span class="o">-</span> <span class="n">called</span> <span class="n">just</span> <span class="n">after</span> <span class="n">a</span> <span class="n">rehash</span>
<span class="n">prerehash</span>         <span class="o">-</span> <span class="n">called</span> <span class="n">just</span> <span class="n">before</span> <span class="n">a</span> <span class="n">rehash</span>
<span class="n">prerestart</span>        <span class="o">-</span> <span class="n">called</span> <span class="n">just</span> <span class="n">before</span> <span class="n">a</span> <span class="n">restart</span>
<span class="n">logfile</span>           <span class="o">-</span> <span class="n">called</span> <span class="n">when</span> <span class="n">the</span> <span class="n">logs</span> <span class="n">are</span> <span class="n">switched</span> <span class="n">daily</span>
<span class="n">loaded</span>            <span class="o">-</span> <span class="n">called</span> <span class="n">when</span> <span class="n">the</span> <span class="n">bot</span> <span class="ow">is</span> <span class="n">done</span> <span class="n">loading</span>
<span class="n">userfile</span><span class="o">-</span><span class="n">loaded</span>   <span class="o">-</span> <span class="n">called</span> <span class="n">after</span> <span class="n">userfile</span> <span class="n">has</span> <span class="n">been</span> <span class="n">loaded</span>
<span class="n">connect</span><span class="o">-</span><span class="n">server</span>    <span class="o">-</span> <span class="n">called</span> <span class="n">just</span> <span class="n">before</span> <span class="n">we</span> <span class="n">connect</span> <span class="n">to</span> <span class="n">an</span> <span class="n">IRC</span> <span class="n">server</span>
<span class="n">preinit</span><span class="o">-</span><span class="n">server</span>    <span class="o">-</span> <span class="n">called</span> <span class="n">immediately</span> <span class="n">when</span> <span class="n">we</span> <span class="n">connect</span> <span class="n">to</span> <span class="n">the</span> <span class="n">server</span>
<span class="n">init</span><span class="o">-</span><span class="n">server</span>       <span class="o">-</span> <span class="n">called</span> <span class="n">when</span> <span class="n">we</span> <span class="n">actually</span> <span class="n">get</span> <span class="n">on</span> <span class="n">our</span> <span class="n">IRC</span> <span class="n">server</span>
<span class="n">disconnect</span><span class="o">-</span><span class="n">server</span> <span class="o">-</span> <span class="n">called</span> <span class="n">when</span> <span class="n">we</span> <span class="n">disconnect</span> <span class="kn">from</span> <span class="nn">our</span> <span class="n">IRC</span> <span class="n">server</span>
<span class="n">fail</span><span class="o">-</span><span class="n">server</span>       <span class="o">-</span> <span class="n">called</span> <span class="n">when</span> <span class="n">an</span> <span class="n">IRC</span> <span class="n">server</span> <span class="n">fails</span> <span class="n">to</span> <span class="n">respond</span>
</pre></div>
</div>
<p>Note that Tcl scripts can trigger arbitrary events, including ones that are not pre-defined or used by Eggdrop.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="43">
<li>LOST (stackable)</li>
</ol>
<blockquote>
<div><p>bind lost &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;nick&gt; &lt;path&gt; &lt;bytes-transferred&gt; &lt;length-of-file&gt;</p>
<p>Description: triggered when a DCC SEND transfer gets lost, such as when the connection is terminated before all data was successfully sent/received. This is typically caused by a user abort.</p>
<p>Module: transfer</p>
</div></blockquote>
<ol class="arabic simple" start="44">
<li>TOUT (stackable)</li>
</ol>
<blockquote>
<div><p>bind tout &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;handle&gt; &lt;nick&gt; &lt;path&gt; &lt;bytes-transferred&gt; &lt;length-of-file&gt;</p>
<p>Description: triggered when a DCC SEND transfer times out. This may either happen because the dcc connection was not accepted or because the data transfer stalled for some reason.</p>
<p>Module: transfer</p>
</div></blockquote>
<ol class="arabic simple" start="45">
<li>OUT (stackable)</li>
</ol>
<blockquote>
<div><p>bind out &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;queue&gt; &lt;message&gt; &lt;queued|sent&gt;</p>
<p>Description: triggered whenever output is sent to the server. Normally the event will occur twice for each line sent: once before entering a server queue and once after the message is actually sent. This allows for more flexible logging of server output and introduces the ability to cancel the message. Mask is matched against “queue status”, where status is either ‘queued’ or ‘sent’. Queues are: mode, server, help, noqueue. noqueue is only used by the putnow tcl command.</p>
<p>Module: server</p>
</div></blockquote>
<ol class="arabic simple" start="46">
<li>CRON (stackable)</li>
</ol>
<blockquote>
<div><p>bind cron &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;minute 0-59&gt; &lt;hour 0-23&gt; &lt;day 1-31&gt; &lt;month 1-12&gt; &lt;weekday 0-6&gt;</p>
<p>Description: similar to bind TIME, but the mask is evaluated as a cron expression, e.g. “16/2 */2 5-15 7,8,9 4”. It can contain up to five fields: minute, hour, day, month, weekday; delimited by whitespace. Week days are represented as 0-6, where Sunday can be either 0 or 7. Symbolic names are not supported. The bind will be triggered if the mask matches all of the fields, except that if both day and weekday are not ‘*’, only one of them is required to match. If any number of fields are omitted at the end, the match will proceed as if they were ‘*’. All cron operators are supported. Please refer to the crontab manual for their meanings. Flags are ignored.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="47">
<li>LOG (stackable)</li>
</ol>
<blockquote>
<div><p>bind log &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;level&gt; &lt;channel&gt; &lt;message&gt;</p>
<p>Description: triggered whenever a message is sent to a log. The mask is matched against “channel text”. The level argument to the proc will contain the level(s) the message is sent to, or ‘*’ if the message is sent to all log levels at once. If the message wasn’t sent to a specific channel, channel will be set to ‘*’.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="48">
<li>TLS (stackable)</li>
</ol>
<blockquote>
<div><p>bind tls &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;idx&gt;</p>
<p>Description: triggered for tcp connections when a ssl handshake has completed and the connection is secured. The mask is matched against the idx of the connection.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="49">
<li>DIE (stackable)</li>
</ol>
<blockquote>
<div><p>bind die &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;shutdownreason&gt;</p>
<p>Description: triggered when eggdrop is about to die. The mask is matched against the shutdown reason. The bind won’t be triggered if the bot crashes or is being terminated by SIGKILL.</p>
<p>Module: core</p>
</div></blockquote>
<ol class="arabic simple" start="51">
<li>INVT (stackable)</li>
</ol>
<blockquote>
<div><p>bind invt &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;<a class="reference external" href="mailto:user&#37;&#52;&#48;host">user<span>&#64;</span>host</a>&gt; &lt;channel&gt; &lt;invitee&gt;</p>
<p>Description: triggered when eggdrop received an INVITE message. The mask for the bind is in the format “#channel nickname”, where nickname (not a hostmask) is that of the invitee. For the proc, nick is the nickname of the person sending the invite request, <a class="reference external" href="mailto:user&#37;&#52;&#48;host">user<span>&#64;</span>host</a> is the <a class="reference external" href="mailto:user&#37;&#52;&#48;host">user<span>&#64;</span>host</a> of the person sending the invite, channel is the channel the invitee is being invited to, and invitee is the target (nickname only) of the invite. The invitee argument was added to support the IRCv3 invite-notify capability, where the eggdrop may be able to see invite messages for other people that are not the eggdrop.</p>
</div></blockquote>
</div>
<div class="section" id="return-values">
<h3>Return Values<a class="headerlink" href="#return-values" title="Permalink to this headline">¶</a></h3>
<p>Several bindings pay attention to the value you return from the proc(using ‘return &lt;value&gt;’). Usually, they expect a 0 or 1, and returning an empty return is interpreted as a 0. Be aware if you omit the return statement, the result of the last Tcl command executed will be returned by the proc. This will not likely produce the results you intended (this is a “feature” of Tcl).</p>
<p>Here’s a list of the bindings that use the return value from procs they trigger:</p>
<ol class="arabic">
<li><p class="first">MSG   Return 1 to make Eggdrop log the command as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(nick!user@host) !handle! command
</pre></div>
</div>
</li>
<li><p class="first">DCC   Return 1 to make Eggdrop log the command as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#handle# command</span>
</pre></div>
</div>
</li>
<li><p class="first">FIL   Return 1 to make Eggdrop log the command as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#handle# files: command</span>
</pre></div>
</div>
</li>
<li><p class="first">PUB   Return 1 to make Eggdrop log the command as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;&lt;nick&gt;&gt; !handle! command
</pre></div>
</div>
</li>
<li><p class="first">CTCP  Return 1 to ask the bot not to process the CTCP command on its own. Otherwise, it would send its own response to the CTCP (possibly an error message if it doesn’t know how to deal with it).</p>
</li>
<li><p class="first">FILT  Return “” to indicate the text has been processed, and the bot should just ignore it. Otherwise, it will treat the text like any other.</p>
</li>
<li><p class="first">FLUD  Return 1 to ask the bot not to take action on the flood. Otherwise it will do its normal punishment.</p>
</li>
<li><p class="first">RAW   Return 1 to ask the bot not to process the server text. This can affect the bot’s performance by causing it to miss things that it would normally act on – you have been warned.</p>
</li>
<li><p class="first">CHON  Return 1 to ask the bot not to process the partyline join event.</p>
</li>
<li><p class="first">CHOF  Return 1 to ask the bot not to process the partyline part event.</p>
</li>
<li><p class="first">WALL  Return 1 to make Eggdrop not log the message that triggered this bind.</p>
</li>
<li><p class="first">NOTE  Return 1 to make Eggdrop not process the note any further. This includes stacked note bindings that would be processed after this one, as well as the built-in eggdrop note handling routines.</p>
</li>
<li><p class="first">MSGM  Return 1 to make Eggdrop not log the message that triggered this bind.</p>
</li>
<li><p class="first">PUBM  Return 1 to make Eggdrop not log the message that triggered this bind.</p>
</li>
<li><p class="first">NOTC  Return 1 to make Eggdrop not log the message that triggered this bind.</p>
</li>
<li><p class="first">OUT   Return 1 to make Eggdrop drop the message instead of sending it. Only meaningful for messages with status “queued”.</p>
</li>
<li><p class="first">EVNT  Return 1 to make Eggdrop not to take the default action for the event. Used for signal type events, ignored for others.</p>
</li>
<li><p class="first">TLS   Return 1 to disable verbose ssl information for the handshake.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="control-procedures">
<h2>Control Procedures<a class="headerlink" href="#control-procedures" title="Permalink to this headline">¶</a></h2>
<p>Using the ‘control’ command, you can put a DCC connection (or outgoing
TCP connection) in control of a script. All text received from the
connection is sent to the proc you specify. All outgoing text should
be sent with ‘putdcc’.</p>
<p>The control procedure is called with these parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">procname</span> <span class="o">&lt;</span><span class="n">idx</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">input</span><span class="o">-</span><span class="n">text</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This allows you to use the same proc for several connections. The
idx will stay the same until the connection is dropped. After that,
it will probably get reused for a later connection.</p>
<p>To indicate that the connection has closed, your control procedure
will be called with blank text (the input-text will be “”). This
is the only time it will ever be called with “” as the text, and it
is the last time your proc will be called for that connection. Don’t
call killdcc on the idx when text is blank, it will always fail with
“invalid idx”.</p>
<p>If you want to hand control of your connection back to Eggdrop, your
proc should return 1. Otherwise, return 0 to retain control.</p>
</div>
<div class="section" id="tcp-connections">
<h2>TCP Connections<a class="headerlink" href="#tcp-connections" title="Permalink to this headline">¶</a></h2>
<p>Eggdrop allows you to make two types of TCP (“telnet”) connections:
outgoing and incoming. For an outgoing connection, you specify the
remote host and port to connect to. For an incoming connection, you
specify a port to listen on.</p>
<p>All of the connections are <em>event driven</em>. This means that the bot will
trigger your procs when something happens on the connection, and your
proc is expected to return as soon as possible. Waiting in a proc for
more input is a no-no.</p>
<p>To initiate an outgoing connection, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span> <span class="n">idx</span> <span class="p">[</span><span class="n">connect</span> <span class="o">&lt;</span><span class="n">hostname</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="p">[</span><span class="o">+</span><span class="p">]</span><span class="n">port</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p>For SSL connections, prefix the port with a plus sign.</p>
<p>$idx now contains a new DCC entry for the outgoing connection.</p>
<p>All connections use non-blocking (commonly called “asynchronous”,
which is a misnomer) I/O. Without going into a big song and dance
about asynchronous I/O, what this means to you is:</p>
<blockquote>
<div><ul class="simple">
<li>assume the connection succeeded immediately</li>
<li>if the connection failed, an EOF will arrive for that idx</li>
</ul>
</div></blockquote>
<p>The only time a ‘connect’ will return an error is if you give it a
hostname that can’t be resolved (this is considered a “DNS error”).
Otherwise, it will appear to have succeeded. If the connection failed,
you will immediately get an EOF.</p>
<p>Right after doing a ‘connect’ call, you should set up a ‘control’ for
the new idx (see the section above). From then on, the connection will
act just like a normal DCC connection that has been put under the control
of a script. If you ever return “1” from the control proc (indicating
that you want control to return to Eggdrop), the bot will just close the
connection and dispose of it. Other commands that work on normal DCC
connections, like ‘killdcc’ and ‘putdcc’, will work on this idx, too.
The ‘killdcc’ command will fail with “invalid idx” if you attempt to use
it on a closed socket.</p>
<p>To create a listen port, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">listen</span> <span class="o">&lt;</span><span class="p">[</span><span class="o">+</span><span class="p">]</span><span class="n">port</span><span class="o">&gt;</span> <span class="n">script</span> <span class="o">&lt;</span><span class="n">proc</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>By default, a listen port will allow both plaintext and SSL connections.
To restrict a port to allow only SSL connections, prefix the port with a
plus sign.</p>
<p>Procs should be declared as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">procname</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">newidx</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>listen 6687 script listen:grab

proc listen:grab {newidx} {
  control $newidx listen:control
}
</pre></div>
</div>
<p>When a new connection arrives in port 6687, Eggdrop will create a new idx for the connection. That idx is sent to ‘listen:grab’. The proc immediately puts this idx under control. Once ‘listen:grab’ has been called, the idx behaves exactly like an outgoing connection would.</p>
<p>Secure connection can be also established after a connection is active. You can connect/listen normally and switch later using the ‘starttls’ command. Your script should first inform the other side of the connection that it wants to switch to SSL. How to do this is application specific.</p>
<p>The best way to learn how to use these commands is to find a script that uses them and follow it carefully. However, hopefully this has given you a good start.</p>
</div>
<div class="section" id="match-characters">
<h2>Match Characters<a class="headerlink" href="#match-characters" title="Permalink to this headline">¶</a></h2>
<p>Many of the bindings allow match characters in the arguments. Here
are the four special characters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="94%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>?</td>
<td>matches any single character</td>
</tr>
<tr class="row-even"><td>*</td>
<td>matches 0 or more characters of any type</td>
</tr>
<tr class="row-odd"><td>%</td>
<td>matches 0 or more non-space characters (can be used to match a single
word) (This character only works in binds, not in regular matching)</td>
</tr>
<tr class="row-even"><td>~</td>
<td>matches 1 or more space characters (can be used for whitespace between
words) (This char only works in binds, not in regular matching)</td>
</tr>
</tbody>
</table>
<blockquote>
<div>Copyright (C) 1999 - 2020 Eggheads Development Team</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="patch.html" title="Patch How-To"
              >previous</a> |
            <a href="ipv6.html" title="IPv6 support"
              >next</a>
          </div>
          <div role="note" aria-label="source link">
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Eggheads.
      Last updated on Jan 20, 2020.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>