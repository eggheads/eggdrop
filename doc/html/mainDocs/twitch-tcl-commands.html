
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Eggdrop Twitch Tcl Commands &#8212; Eggdrop 1.9.0 documentation</title>
    <link rel="stylesheet" href="../_static/eggdrop.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="IPv6 support" href="ipv6.html" />
    <link rel="prev" title="Twitch" href="twitch.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
          <p class="logo"><a href="../index.html">
            <img class="logo" src="../_static/eggman.png.gif" alt="Logo"/>
          </a></p>
        <div class="headertitle"><a
          href="../index.html">Eggdrop 1.9.0 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="twitch.html" title="Twitch"
             accesskey="P">previous</a> |
          <a href="ipv6.html" title="IPv6 support"
             accesskey="N">next</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="sidebar">
          
          <h3>Table of Contents</h3>
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../installAndSetup/readme.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installAndSetup/install.html">Installing Eggdrop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installAndSetup/faq.html">Frequently Asked Questions</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About Eggdrop</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Eggdrop Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="users.html">Users and Flags</a></li>
<li class="toctree-l1"><a class="reference internal" href="partyline.html">The Party Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="bans.html">Bans, Invites, and Exempts</a></li>
<li class="toctree-l1"><a class="reference internal" href="botnet.html">Botnet Sharing and Linking</a></li>
<li class="toctree-l1"><a class="reference internal" href="patch.html">Patch How-To</a></li>
<li class="toctree-l1"><a class="reference internal" href="pbkdf2.html">PBKDF2 Hashing</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcl-commands.html">Eggdrop Tcl Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="twitch.html">Twitch</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Eggdrop Twitch Tcl Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipv6.html">IPv6 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="tls.html">TLS support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/core.html">Eggdrop Core Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/modules.html">Eggdrop Module Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/assoc.html">Assoc Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/blowfish.html">Blowfish Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/channels.html">Channels Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/compress.html">Compress Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/console.html">Console Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/ctcp.html">CTCP Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/dns.html">DNS Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/filesys.html">Filesys Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/ident.html">Ident Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/irc.html">IRC Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/notes.html">Notes Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/pbkdf2.html">PBKDF2 Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/seen.html">Seen Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/server.html">Server Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/share.html">Share Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/transfer.html">Transfer Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/twitch.html">Twitch Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/uptime.html">Uptime Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreDocs/woobie.html">Woobie Module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendices/known-probs.html">Known Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/tricks.html">Eggdrop Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/text-sub.html">Textfile Substitutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/weird-msgs.html">Weird Messages That Get Logged</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/first-script.html">Your First Eggdrop Script</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="../search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
            </form>
          </div>

        </div>
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>Eggdrop Twitch Tcl Commands
Last revised: April 25, 2020</p>
<div class="section" id="eggdrop-twitch-tcl-commands">
<h1>Eggdrop Twitch Tcl Commands<a class="headerlink" href="#eggdrop-twitch-tcl-commands" title="Permalink to this headline">¶</a></h1>
<p>This is an exhaustive list of all the Twitch-specific Tcl commands added to
Eggdrop. These commands are held separate from the traditional tcl-commands.doc
due to the unique nature of Twitch and the fact that these commands WILL NOT
work on a normal IRC server. Again, if you try and use these commands on a
normal IRC server they will, at best, not work and possibly have unintended
consequences.</p>
<p>This list is accurate for Eggdrop v1.9.0, the minimum version for which Twitch
functionality is possible.</p>
<div class="section" id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="twcmd-chan-cmd-arg">
<h3>twcmd &lt;chan&gt; &lt;cmd&gt; [arg]<a class="headerlink" href="#twcmd-chan-cmd-arg" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: sends cmd to the server, prefixed with a ‘/’. This is replicates
the web UI functionality of sending commands such as /vip or /subscribers. Do
not include a ‘/’ in the cmd. arg, if required, is a single argument, so
enclose multiple strings in quotes. Example: twcmd timeout “badguy 100”</p>
<p>Returns: 0 if command is successfully sent to the Twitch server, 1 on failure</p>
</div></blockquote>
</div>
<div class="section" id="userstate-channel">
<h3>userstate &lt;channel&gt;<a class="headerlink" href="#userstate-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: provides current userstate for the Eggdrop on the given channel.</p>
<p>Returns: a dict containing key/value pairs for userstate values.</p>
</div></blockquote>
</div>
<div class="section" id="roomstate-channel">
<h3>roomstate &lt;channel&gt;<a class="headerlink" href="#roomstate-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: provides current roomstate of a channel Eggdrop is on.</p>
<p>Returns: a dict containing key/value pairs for roomstate values.</p>
</div></blockquote>
</div>
<div class="section" id="twitchmods-channel">
<h3>twitchmods &lt;channel&gt;<a class="headerlink" href="#twitchmods-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: maintains a list of usernames provided by Twitch as those that have moderator status on the provided channel. This list is refreshed upon join, or can manually be refreshed by using the Tcl <code class="docutils literal notranslate"><span class="pre">twcmd</span></code> to issue a /mods Twitch command. This list is a comprehensive list, the user does not need to be present on the channel to be included on this list.</p>
<p>Returns: A list of usernames designated as having moderator status by Twitch.</p>
</div></blockquote>
</div>
<div class="section" id="twitchvips-channel">
<h3>twitchvips &lt;channel&gt;<a class="headerlink" href="#twitchvips-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: maintains a list of usernames provided by Twitch as those that have VIP status on the provided channel. This list is refreshed upon join, or can manually be refreshed by using the Tcl <code class="docutils literal notranslate"><span class="pre">twcmd</span></code> to issue a /vips Twitch command. This list is a comprehensive list, the user does not need to be present on the channel to be included on this list.</p>
<p>Returns: A list of usernames designated as having VIP status by Twitch.</p>
</div></blockquote>
</div>
<div class="section" id="ismod-nick-channel">
<h3>ismod &lt;nick&gt; [channel]<a class="headerlink" href="#ismod-nick-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: checks if a user is on the moderator list maintained by Twitch (the same list accessible by the /mods command entered via the Twith web GUI). This differs from the other “normal” is* Eggdrop Tcl cmds, as this does NOT check if the user is currently on the channel (that status is unreliable on Twitch IRC).</p>
<p>Returns: 1 if someone by the specified nickname is on the moderator list for the channel (or any channel if no channel name is specified); 0 otherwise.</p>
</div></blockquote>
</div>
<div class="section" id="isvip-nick-channel">
<h3>isvip &lt;nick&gt; [channel]<a class="headerlink" href="#isvip-nick-channel" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Description: checks if a user is on the VIP list maintained by Twitch (the same list accessible by the /vips command entered via the Twith web GUI). This differs from the other “normal” is* Eggdrop Tcl cmds, as this does NOT check if the user is currently on the channel (that status is unreliable on Twitch IRC).</p>
<p>Returns: 1 if someone by the specified nickname is on the VIP list for the channel (or any channel if no channel name is specified); 0 otherwise.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="binds">
<h2>Binds<a class="headerlink" href="#binds" title="Permalink to this headline">¶</a></h2>
<p>You can use the ‘bind’ command to attach Tcl procedures to certain events. The
binds listed here are in addition to the binds listed in tcl-commands.doc.</p>
<p>Because Twitch offers an IRC gateway that significantly reduces traditional IRC
functionality, the following binds listed in tcl-commands.doc are not
compatible with Twitch. If they are in an existing script you are running that
is fine, they just likely won’t do anything.</p>
<p>To remove a bind, use the ‘unbind’ command. For example, to remove the
bind for the “stop” msg command, use ‘unbind msg - stop msg:stop’.</p>
<div class="section" id="flags">
<h3>Flags<a class="headerlink" href="#flags" title="Permalink to this headline">¶</a></h3>
<p>Most of the following binds have “flags” listed as an argument for the bind. Flags represents a flagmask that the user, if found, must match in order for the bind to trigger. Example flag masks are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>-</td>
<td>Matches any user existing in Eggdrop’s internal user list (added to the bot)</td>
</tr>
<tr class="row-even"><td>*</td>
<td>Matches any user, doesn’t need to be added to Eggdrop</td>
</tr>
<tr class="row-odd"><td>+o</td>
<td>Matches a user with the global ‘o’ flag added to their handle on the Eggdrop</td>
</tr>
<tr class="row-even"><td>|+f</td>
<td>Matches a user with the ‘f’ flag added on a channel to their handle on the Eggdrop</td>
</tr>
<tr class="row-odd"><td>+m|+m</td>
<td>Matches a user with the ‘m’ flag added either globally or on a channel on the Eggdrop</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="bind-types">
<h3>Bind Types<a class="headerlink" href="#bind-types" title="Permalink to this headline">¶</a></h3>
<p>The following is a list of bind types and how they work. Below each bind type is the format of the bind command, the list of arguments sent to the Tcl proc, and an explanation.</p>
<ol class="arabic simple">
<li>CCHT  (CLEARCHAT)</li>
</ol>
<blockquote>
<div><p>bind ccht &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;chan&gt;</p>
<p>Description: Called when the chat history for the channel or a user on the channel is cleared. The value of <code class="docutils literal notranslate"><span class="pre">mask</span></code> specified in the bind is matched against <code class="docutils literal notranslate"><span class="pre">#channel</span> <span class="pre">nick!nick&#64;nick.tmi.twitch.tv</span></code> and can use wildcards. If a user is found that matches <code class="docutils literal notranslate"><span class="pre">mask</span></code>, they must also match the <code class="docutils literal notranslate"><span class="pre">flags</span></code> mask. If the CLEARCHAT is only targeted at a specific user and not the channel, that user’s nickname will appear in <code class="docutils literal notranslate"><span class="pre">nick</span></code>, otherwise <code class="docutils literal notranslate"><span class="pre">nick</span></code> is empty. <code class="docutils literal notranslate"><span class="pre">chan</span></code> will contain the channel the CLEARCHAT was used on.</p>
</div></blockquote>
<ol class="arabic simple">
<li>CMSG (CLEARMSG)</li>
</ol>
<blockquote>
<div><p>bind cmsg &lt;flags&gt; &lt;command&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;chan&gt; &lt;msgid&gt; &lt;msg&gt;</p>
<p>Description: Called when a specific message on the channel is cleared. The value of <code class="docutils literal notranslate"><span class="pre">mask</span></code> specified in the bind is matched against <code class="docutils literal notranslate"><span class="pre">#channel</span> <span class="pre">nick!nick&#64;nick.tmi.twitch.tv</span></code> and can use wildcards. If a user is found that matches <code class="docutils literal notranslate"><span class="pre">mask</span></code>, they must also match the <code class="docutils literal notranslate"><span class="pre">flags</span></code> mask. <code class="docutils literal notranslate"><span class="pre">nick</span></code> contains the user’s nickname, and <code class="docutils literal notranslate"><span class="pre">chan</span></code> will contain the channel the CLEARMSG was used on.</p>
</div></blockquote>
<ol class="arabic simple">
<li>HTGT (HOSTTARGET)</li>
</ol>
<blockquote>
<div><p>bind htgt &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;target&gt; &lt;chan&gt; &lt;viewers&gt;</p>
<p>Description: Called when a broadcaster starts or stops hosting another Twitch channel. <code class="docutils literal notranslate"><span class="pre">mask</span></code> is in the format “#channel target”, where #channel is the hosting channel and target is the name of the broadcaster being hosted by #channel. Similarly for the proc, <code class="docutils literal notranslate"><span class="pre">target</span></code> is the name of the Twitch channel being hosted by <code class="docutils literal notranslate"><span class="pre">chan</span></code>. A value of <code class="docutils literal notranslate"><span class="pre">-</span></code> in <code class="docutils literal notranslate"><span class="pre">target</span></code> indicates that the broadcaster has stopped hosting another channel. <code class="docutils literal notranslate"><span class="pre">viewers</span></code> contains the number of viewers in <code class="docutils literal notranslate"><span class="pre">chan</span></code> that are now watching <code class="docutils literal notranslate"><span class="pre">target</span></code> when hosting starts, but has been found to not be reliably provided by Twitch (often arbitrarily set to 0).</p>
</div></blockquote>
<ol class="arabic simple">
<li>WSPR (WHISPER)</li>
</ol>
<blockquote>
<div><p>bind wspr &lt;flags&gt; &lt;commmand&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;userhost&gt; &lt;handle&gt; &lt;msg&gt;</p>
<p>Description: Called when Eggdrop received a whisper from another Twitch user. The first word of the user’s msg is matched against <code class="docutils literal notranslate"><span class="pre">command</span></code>, and the remainder of the text is passed to <code class="docutils literal notranslate"><span class="pre">msg</span></code>. <code class="docutils literal notranslate"><span class="pre">nick</span></code> is populated with the login name of the user messaging the Eggdrop, <code class="docutils literal notranslate"><span class="pre">userhost</span></code> contains nick’s userhost in the format <a class="reference external" href="mailto:nick!nick&#37;&#52;&#48;nick&#46;tmi&#46;twitch&#46;tv">nick!nick<span>&#64;</span>nick<span>&#46;</span>tmi<span>&#46;</span>twitch<span>&#46;</span>tv</a>. <code class="docutils literal notranslate"><span class="pre">handle</span></code> will match the user’s handle on the bot if present, otherwise it will return a <code class="docutils literal notranslate"><span class="pre">*</span></code>.</p>
</div></blockquote>
<ol class="arabic simple">
<li>WSPM (WHISPER)</li>
</ol>
<blockquote>
<div><p>bind wspr &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;nick&gt; &lt;userhost&gt; &lt;handle&gt; &lt;msg&gt;</p>
<p>Description: Called when Eggdrop received a whisper from another Twitch user. The msg is matched against <code class="docutils literal notranslate"><span class="pre">mask</span></code>, which can contain wildcards. <code class="docutils literal notranslate"><span class="pre">nick</span></code> is populated with the login name of the user messaging the Eggdrop, <code class="docutils literal notranslate"><span class="pre">userhost</span></code> contains nick’s userhost in the format <a class="reference external" href="mailto:nick!nick&#37;&#52;&#48;nick&#46;tmi&#46;twitch&#46;tv">nick!nick<span>&#64;</span>nick<span>&#46;</span>tmi<span>&#46;</span>twitch<span>&#46;</span>tv</a>. <code class="docutils literal notranslate"><span class="pre">handle</span></code> will match the user’s handle on the bot if present, otherwise it will return a <code class="docutils literal notranslate"><span class="pre">*</span></code>. The full text of the whisper is stored in <code class="docutils literal notranslate"><span class="pre">msg</span></code>.</p>
</div></blockquote>
<ol class="arabic simple">
<li>RMST (ROOMSTATE)</li>
</ol>
<blockquote>
<div><p>bind rmst &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;chan&gt; &lt;tags&gt;</p>
<p>Description: Called when Eggdrop receives a ROOMSTATE message. <code class="docutils literal notranslate"><span class="pre">mask</span></code> is in the format of <code class="docutils literal notranslate"><span class="pre">#channel</span> <span class="pre">keys</span></code> and can use wildcards. For example, to trigger this bind on #eggdrop for any change, you would use <code class="docutils literal notranslate"><span class="pre">#eggdroptest</span> <span class="pre">*</span></code> as the mask, or to trigger on #eggdrop specifically for the emote-only setting, you would use <code class="docutils literal notranslate"><span class="pre">&quot;#eggdrop</span> <span class="pre">*emote-only*&quot;</span></code> as the mask. Due to the nature of multiple keys per roomstate and uncertainty of ordering, it is recommended to use multiple binds if you wish to specify multiple key values. <code class="docutils literal notranslate"><span class="pre">chan</span></code> is the channel Eggdrop received the ROOMSTATE message for, and <code class="docutils literal notranslate"><span class="pre">tags</span></code> is a list of key/value pairs provided by the ROOMSTATE message, suitable for use as a Tcl dict. <code class="docutils literal notranslate"><span class="pre">flags</span></code> is ignored.</p>
</div></blockquote>
<ol class="arabic simple">
<li>USST (USERSTATE)</li>
</ol>
<blockquote>
<div><p>bind usst &lt;flags&gt; &lt;mask&gt; &lt;proc&gt;</p>
<p>procname &lt;chan&gt; &lt;tags&gt;</p>
<p>Description: Called when Eggdrop receives a USERSTATE message. <code class="docutils literal notranslate"><span class="pre">mask</span></code> is in the format of <code class="docutils literal notranslate"><span class="pre">#channel</span> <span class="pre">keys</span></code> and can use wildcards (see the RMST bind for additional details on format). <code class="docutils literal notranslate"><span class="pre">chan</span></code> is the channel Eggdrop received the USERSTATE message for, and <code class="docutils literal notranslate"><span class="pre">tags</span></code> is a list of key/value pairs provided in the USERSTATE message, suitable for use as a Tcl dict. <code class="docutils literal notranslate"><span class="pre">flags</span></code> is ignored.</p>
</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="twitch.html" title="Twitch"
              >previous</a> |
            <a href="ipv6.html" title="IPv6 support"
              >next</a>
          </div>
          <div role="note" aria-label="source link">
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, Eggheads.
      Last updated on Jan 24, 2021.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>