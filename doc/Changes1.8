
Eggdrop Changes (Last Updated 2017-12-20):
__________________________________________

Eggdrop v1.8.3rc1:

  2017-12-20 * Fix percentsign being interpreted by format printers. Fixes #498
                 [Found by: VertigoRN / Patch by: Cizzle]
             * Update NEWS for 1.8.3
             * Update newversion script
             * Update version strings to 1.8.3
  2017-12-19 * Remove false SSL noise
             * Clarify precedence of & and ?
  2017-12-18 * Update THANKS file
  2017-12-17 * Change addbot command to use spaces. (#496)
             * Make T_A handler mirror the T_AAAA behaviour
                 [Found by: Nomis / Patch by: Nomis]
             * Only show warning to convert old userfile for actual old userfiles
                 [Found by: Many, many, people / Patch by: Cizzle]
  2017-12-12 * Fix shared userfile missing first 511 bytes when using SSL
                 [Found by: Geo / Patch by: Cizzle]
  2017-12-06 * Do not trigger CHON binds when returning from a control script. Fixes #14
                 [Found by: Tothwolf / Patch by: Cizzle]
             * Use tmpfile for receiving userfile when copy-to-tmp is enabled. Fixes #490
                 [Found by: OUTsider, simple, Geo, ... / Patch by: Cizzle]
  2017-12-02 * A better check if chan is shared for ban sharing
             * More errorchecking for +bot, chaddr and tcl addbot
  2017-12-01 * Prevent loop when writing to stdout in foreground mode causing segfault
             * Trim/update tcl.m4
  2017-11-26 * Set ssl port to 0 by default too for new bots.
  2017-11-25 * Fix matchattr for local flags. Fixes #419
  2017-11-24 * Fix +bot IPv6 display format Old message: .+bot testbot [fd15:4ba5:5a2b:1008:c5c6:bbd0:483e:4492]
               4444/5555 Added bot 'testbot' with address [[fd15:4ba5:5a2b:1008:c5c6:bbd0:483e:4492]]:4444/5555 and
               no hostmask. New message: Added bot 'testbot' with address [fd15:4-
               ba5:5a2b:1008:c5c6:bbd0:483e:4492]:4444/5555 and no hostmask.
             * Totally remove []s from IPv6 address if present
                 [Found by: Geo / Patch by: Geo]
  2017-11-23 * Typofix in eggdrop-basic.conf
  2017-11-21 * Only report SSL error when return value indicates so.
  2017-11-20 * Fix typo in tcl-commands
  2017-11-14 * Clarify chanlist Tcl command documentation. Fixes #78
  2017-11-12 * Fix addbot Tcl command. Fixes #470
                 [Found by: Geo / Patch by: Geo]
  2017-11-11 * Connect to IP of the already-active link for userfile xfer. Fixes #21
                 [Found by: Darkreap1, simple / Patch by: Cizzle]
             * Remove leftover unused BOT_BOT botflag b
  2017-11-06 * One less loop iteration.
             * Fix bug in certfile/keyfile checking code to fatal on startup. Thanks Geo.
  2017-11-05 * Initialize SSL field when adding a new bot
             * Add TLS ifdefs to ssl var initialization
  2017-11-04 * More +bot/chaddr error checking
             * Fix forgotten bug for log output of incoming share traffic.
             * Fail early on TLS certificate loading errors. Fixes #447
  2017-10-21 * Fix tcl setuser botaddr field docs and functionality. Fixes #459
             * Various error-checks against +bot/chaddr functions.
  2017-10-14 * Fix bad strncpyz. Fixes #466
                 [Found by: jack3 / Patch by: Geo]
  2017-10-12 * Update tcl.m4
             * Revert stowaway commit
  2017-10-09 * pick me
  2017-09-28 * Rechange wording of botnet log modes once again.
  2017-09-27 * Reset console draft. Closes #311
             * Stop link to rejected (+r) bot before opening socket. Fixes #463
  2017-09-26 * Log outgoing botnet traffic and some more incoming. Fixes #22
             * Split raw share traffic into incoming and outgoing.
             * Move certain global partyline output to existing and new console log modes. Closes #8
  2017-09-19 * Checks bans when received through botnet with users on chans. Fixes #10
             * Add new bot share cmd to request userflags for a new channel. Fixes #11
  2017-09-02 * Remove unused var in filesys.mod.
  2017-09-01 * Allow parallel make for building eggdrop
                 [Patch by: thommey]
  2017-08-19 * Add transfer.portuguese.lang
                 [Patch by: TheMythPT]
             * Add assoc portuguese lang file
                 [Patch by: TheMythPT]
             * Create console.pt.lang
             * Create notes.pt.lang
             * Add +o console flag to new -nt runs. Closes #428
                 [Found by: thommey / Patch by: Cizzle]
             * Swap incorrect 'ssl-privatekey/certificate not loaded' error messages. Fixes #445
                 [Found by: Geo / Patch by: Geo]
             * Sanity check for dcc ban syntax. Closes #358
  2017-08-07 * Re-enable ChangeLog generation for releaseprep
             * Fix INSTALL typo in the *right* place
  2017-08-05 * Fix INSTALL saying make ssl-cert instead of make sslcert.
                 [Found by: Paladinz]
  2017-07-21 * Check for compatibility OpenSSL functions regardless of whether paths to the library were specified.
                 [Found by: Artea, Zela]
             * Fix v in front of versions for changelogs.
  2017-07-14 * Add v to version number in changelog.
             * Clarify getuser arguments in error message.
  2017-07-08 * Fix doc IP address caught in version update. Fixes #420

Eggdrop v1.8.2 (2017-08-13):

  2017-08-13 * Fix INSTALL saying make ssl-cert instead of make sslcert.
                 [Found by: Paladinz]
             * Re-enable ChangeLog generation for releaseprep
             * Fix INSTALL typo in the *right* place
             * Eggdrop v1.8.2 *STABLE* release
             * Merge branch 'stable/1.8' into release/1.8.2

Eggdrop v1.8.2rc2 (2017-07-22):

  2017-07-22 * Update THANKS file
             * Eggdrop v1.8.2rc2 Release Candidate 2
  2017-07-21 * Check for compatibility OpenSSL functions regardless of whether paths to the library were specified.
                 [Found by: Artea, Zela]
             * Fix doc IP address caught in version update. Fixes #420
             * Add v to version number in changelog.
             * Clarify getuser arguments in error message.
             * Fix v in front of versions for changelogs.

Eggdrop v1.8.2rc1 (2017-07-07):

  2017-07-07 * Use local branches for releaseprep
             * Eggdrop v1.8.2 Release Candidate 1
  2017-07-06 * Update NEWS.
             * Fix date
             * Update version strings to 1.8.2
             * Generate docs with 1.8.2 version
             * Fix typo in NEWS.
             * Allow forced local git refs for genchanges with ./ prefix.
  2017-07-04 * Update NEWS
  2017-07-02 * Update NEWS.
             * Improve ChangeLog and ChangesX.Y generation. Adapt releaseprep scripts. Generate them.
             * Skip changelog generation commits for ChangesX.Y.
  2017-06-17 * Transfer.mod spelling/grammars fix
                 [Found by: maimizuno]
  2017-06-09 * Update THANKS file
             * Update UPGRADING file Per formalized documentation plan, renamed and updated UPGRADING file to
               contain historical upgrade-related notes (1.4->1.6)
             * Update and rename NEWS-1.8.1 to NEWS. Closes #340 Per formalized documentation plan, renamed file to
               NEWS. NEWS will hold a running list of short summaries of major changes to each version. Each new
               version will add to the top.
             * Change temp-path to tmpfile. Closes #322
  2017-06-02 * Fix additional invalid chanset options. Fixes #406
  2017-05-31 * Provide config setting for blowfish mode. Fixes #384
             * Display listen-addr on startup splash screen. Fixes #405
  2017-05-21 * Fix foreground user losing owner perms upon rehash
             * Validate user input for flood-* chan settings. Closes #381
             * Fix some oob (and an iob) for a few config settings
             * Add configure args to Tcl API, fix string expansion for -v. Fixes #342
                 [Found by: maimizuno]
             * Add transfer.mod's fstat user setting to getuser w/o args. Fixes #385
                 [Found by: maimizuno]
  2017-05-15 * Do not start if -n is missing from -c or -t cli flags. Fixes #391
  2017-05-11 * Check if current nick matches altnick mask before switching. Fixes #366
  2017-05-05 * Update docs regarding new ban-type values.
  2017-04-29 * Add portuguese language file
             * Improve command line arg validation. Fixes #359
             * Re-add configure flags display to show_ver()
  2017-04-27 * Have full access when starting bot with -tn. (#380)
  2017-04-26 * Fix oversight in getuser key/value list support. Fixes #382
                 [Found by: maimizuno]
  2017-04-25 * Remove 'none' custom string from aclocal ac flags. Fixes #352.
             * Correct typo chhand to chhandle.
             * Add documentation about CBC mode merged in commit 59813bc2
             * Add error message if server list contains only SSL servers and TLS is disabled. Fixes #348
  2017-04-24 * channels.mod will no longer delete channels not in the chanfile on restart/load.
                 [Found by: HeXiLeD]
  2017-04-22 * Add key/value list to getuser without key argument. Fixes #351.
                 [Found by: maimizuno]
             * Show unset entries in getuser handle as empty strings.
  2017-04-20 * Add HTML anchors to tcl-commands.doc commands. Closes #253
             * Generate docs
             * Assign appropriate type to store ipv4/6 address. Fixes #363
             * Improve README spelling and grammar. Fixes #349.
                 [Found by: maimizuno, jackal / Patch by: jackal]
  2017-04-19 * Fix autobotchk error when eggdrop returns an error. (#371)
                 [Found by: Arkadietz]
             * Fix EOL and shorten README (#349).
                 [Found by: maimizuno, jackal / Patch by: jackal]
             * Change global-* to default-* in docs and conf, add default-* in src. (#310)
             * Fix braces bug in 687b9e.
             * Allow spaces in server names. Fixes #369.
                 [Found by: WildCrazy]
             * Add warning if no dns-servers found for dns.mod. Fixes #333.
             * Add CBC mode to blowfish and use it by default. (#281)
                 [Patch by: Cizzle]
             * Update COPYING (#347)
                 [Patch by: jackal]
             * Add maskhost types 30-39 that set hostmask to *. Fixes #169.
                 [Found by: Robby]
             * Remove cr characters in changelog generation.
             * Convert line endings in quotepong to lf.
             * Use compatibility function for ASN1_STRING_get0_data/ASN1_STRING_data in (#373)
  2017-03-27 * Remove changelog generation from releaseprep TODO: Better integrate this for 1.8.2
  2017-03-26 * Unify changelog generation.
  2017-03-20 * Restore NEWS-1.8.0 as UPGRADE-1.8.
             * Update releaseprep to correct version.h on stable release
  2017-03-18 * Add compatibility autoconf macro for stdint.h
             * Update gitingore file.
  2017-03-15 * Make depend.

Eggdrop v1.8.1 (2017-03-27):

  2017-03-27 * Remove changelog generation from releaseprep TODO: Better integrate this for 1.8.2
             * Eggdrop v1.8.1 *STABLE* release
             * Merge branch 'stable/1.8' into release/1.8.1
  2017-03-26 * Restore NEWS-1.8.0 as UPGRADE-1.8.
             * Update releaseprep to correct version.h on stable release
             * Unify changelog generation.

Eggdrop v1.8.1rc2 (2017-03-03):

  2017-03-03 * Replace version fetching function in aclocal.m4 to use new version.h.
                 [Found by: karakedi]
             * Remove debug output.
             * Eggdrop v1.8.1 Release Candidate 2

Eggdrop v1.8.1rc1 (2017-03-01):

  2017-03-01 * Update NEWS file for 1.8.1
             * Eggdrop v1.8.1 Release Candidate 1
  2017-02-28 * Fix copyright date
                 [Found by: Pixelz]
  2017-02-27 * Geo-proof misc/newversion
             * Update version strings to 1.8.1
             * Generate docs with 1.8.1 version
  2017-02-26 * Update Eggdrop versioning system. Fixes #337
                 [Found by: maimizuno]
             * Use setpatch vice addpatch. Use 'none' to remove patchlevel from version.h
             * Update patch.h reference to version.h
             * Update releaseprep with setpatch usage. Update patch.h reference to version.h. Don't change version
               in releaseprep, it is done in newversion. Fix missing quotes generating version.h. Add missing quo-
               tes to version.h string version
             * Add comment about .su command in -nt
             * Add misc/genchanges to generate doc/Changes file entries.
             * Add indentation to genchanges.
  2017-02-19 * Update newversion with sphinx doc paths
  2017-02-17 * Don't use pointer after freeing w/o explicit setting to NULL.
             * Fix safe_write prototype to equal write.
  2017-02-14 * Variety of long-needed code clean-up & fixes (coverity branch)
  2017-02-13 * Fixes for autobotchk. Fixes #239
                 [Found by: Cizzle, StephenS / Patch by: Cizzle, Geo]
             * Clean up some compile warnings (#330)
  2017-02-08 * Update THANKS file
             * Update AUTHORS file
  2017-02-07 * Update copyright to 2017
  2017-02-06 * Update docs copyright as part of updatecopyright script
             * update updatecopyright help
             * Add main.c to search path
  2017-02-04 * Simplify sockgets line parsing
  2017-02-03 * Zero memory after nmalloc() to initialize memberlist. Fixes #326
             * Fix channels output for ".who linkedbot"
  2017-02-02 * Specify what 1 and 0 do for prefer-ipv6 in conf
  2017-01-30 * Update BUG-REPORT with GitHub info
  2017-01-28 * Detect newer OpenSSL function names. Fixes #323
  2017-01-27 * Fix minutely hook to be called for all missed minutes. Fixes #308
                 [Found by: maimizuno / Patch by: Cizzle]
  2017-01-26 * Return more user-friendly message with incorrect vhost4/6 setting in config. Closes #316
  2017-01-25 * Add summary with tcl, tls and ipv6 info to configure output. Closes #264
                 [Patch by: Cizzle]
  2017-01-20 * Fix patch() compilation warning. Fixes #303
  2017-01-15 * Address cppcheck mods. Fixes #69
                 [Found by: vBm / Patch by: Cizzle]
  2017-01-01 * Update docs version as part of releaseprep
  2016-12-31 * Fix pandoc rendering. Fixes #302
                 [Found by: Geo / Patch by: Geo]
  2016-12-28 * Update config server comments. Fixes #237
                 [Found by: andy5995]
  2016-12-27 * Remove CVS references from Eggdrop. Fixes #149
             * Fix misleading indentation warnings from gcc
                 [Found by: Cizzle / Patch by: Cizzle]
  2016-12-25 * Update mod.channels src/docs to match defaults to eggdrop.conf. Fixes #243
                 [Found by: Geo / Patch by: Cizzle]
             * Reorganize commit.template
  2016-12-19 * Make genChangelog executable.
             * Add git commit template to misc/.

1.8.0 (December 04, 2016):

  # RC4 release on Nov 23, 2016

  - Add some default paths to tcl.m4.
    Patch by: thommey / Found by: Kiril, erickjvelez, various

  - Revert userent.c bugfix in XTRA settings for now.
    Patch by: thommey / Found by: erickjvelez

  - Fix parenthesis bug.
    Patch by: thommey

  # RC3 Released on Nov 22, 2016

  - Fix skipping password generation on botnet links with TLS.
    Patch by: Geo / Found by: erickjvelez

  - Various small bugfixes.
    Patch by: Geo, thommey

  # RC2 Released on Nov 1, 2016

  - Use -pthread for OpenBSD linking, found in TCL_EXTRA_CFLAGS in tclConfig.sh.
    Patch by: thommey / Found by: fahuo

  - Trim version numbers from tcllib names like libtcl8.5.so.1.7.
    Patch by: thommey

  - Switch to using $CC -shared for BSD in general, this seems to work on
    newer versios, and ld -Bshareable -x fails.
    Patch by: thommey / Found by: LinaSovereign

  - Work around some incompatibilies between gnu make 3.82 and 4.x.
    Patch by: thommey / Found by: Robby

  - Fix out-of-bounds read error
    Patch by: thommey, Geo / Found by: Robby

  - Clear channel modes on disconnect
    Patch by: Geo / Found by: thommey

    nuke_server() calls reset_chan_info(), which clears channel modes and
    then re-requests them, which is the point of the function. However,
    because the server connection has already been killed, chan->status
    is set to CHAN_ASKEDBANS and thus doesn't re-request the banlist from
    the server when it finally does rejoin. By setting to clear_chan, the
    list is just cleared and the banlist properly requested from the IRC
    server on join.

  - Ensure our Makefile works with both BSD make and GNU make.
    Patch by: thommey / Found by: Geo

  - Fix formatting bug in 618ecbf9, MISC_LOGREPEAT contains a format specifier.
    Patch by: thommey / Found by: Robby

  - Increase memory table size for memory debugging by factor 10.
    Found by: Kiril, various / Patch by: thommey

  - Fix compile warnings.
    Patch by: thommey

  - Update x-compile Makefile changes to POSIX compliance. Fixes #273
    Patch by: Geo

    Allows bsd 'make' to be used on BSD systems (gmake not needed). Fixes
    bug introduced in e3321ccf46da7950995f7003b83e1b4a8e9eef81

  - Tcl various OS linking, cross-compilation issues. Fixes #250, #251
    Patch by: thommey / Found by: eelcohuininga, thommey

    Fixes Tcl-related compilation/linking issues by using the
    tclConfig.sh variables and including -lz if Tcl >= 8.6 and we have no
    tclConfig.sh

  - Fix cygwin windows.h inclusion. Fixes #262, #265, #266
    Patch by: thommey / Found by: creatio, jackal

    Cygwin's windows.h inclusion only works if VOID is not defined, and
    we undefine their openssl defines before including the official
    openssh headers. We need to include windows.h to have FreeConsole()
    to launch eggdrop into the background properly.

  - Reset channel information on disconnect properly.
    Patch by: Cizzle

  - Fix a bug introduced by Tcl interp result transition.
    Patch by: thommey / Found by: simply

  - Update tcl.m4 (Adds NetBSD tclConfig.sh path). Fixes #175
    Patch by: thommey,Geo / Found by: fhorst

  - Remove duplicate uppercase doc filenames
    Patch by: Geo / Found by: jackal^

  - Fix compile warning about potentially signed char as array subscript.
    Patch by: thommey

  - Install eggdrop-basic.conf on make install.
    Patch by: Geo / Found by: thommey

  - Fix various compile warnings:
    Fixed type of recvfrom's last argument to be socklen_t, not uint.
    Added first arg cast for const char* in gethostbyaddr for cygwin.
    Added explicit type of idx as function argument.
    Patch by: thommey

  - Add help-path to eggdrop-basic.conf
    Patch by: thommey / Found by: simple

  - Add owner setting to eggdrop-basic.conf
    Patch by: thommey

  - Update TEA version for tcl.m4.
    Patch by: thommey / Found by: b6s3d

  - Fix doc generation incorrectly placing new docs
    Patch by: Geo / Found by: Pixelz

  - Commit ChangeLog before generating RC/Final release
    Patch by: Geo / Found by: kisser

  - Update docs to indicate the 'j' flag logs topic changes
    Patch by: Geo / Found by: senpai

  - Fix cross-compilation errors regarding socklen and IPv6
    Skip attempted test run after make on x-compiles
    Patch by: Anonymous / Found by: eelcohuininga

  - Update copyright date for ./eggdrop -v.
    Patch by: thommey / Found by: maimizuno

  - Typo: tcl-commands.doc bind time description
    Patch by: Geo / Found by: maimizuno

  - Typo: "timer <seconds>" should be "utimer <seconds>"
    Patch by: sirfz, Geo / Found by: sirfz

  # RC1 Released on September 12, 2016

  - Add basic.eggdrop.conf to source directory
    Patch by: Geo, thommey

  - Update releaseprep script to transition from CVS to git.
    Update release scripts for 1.8 modifications
    Patch by: Geo

  - Fix DNS resolution with IPv6 disabled.
    Patch by: Geo, thommey / Found by: raclure

  - Fix a compilation issue with --disable-ipv6.
    Patch by: Geo

  - Reset the channel information when eggdrop disconnects.
    Patch by: Geo / Found by: renols

  - Fix SSL hostname verification for partyline connections.
    Patch by: manuel

  - Move logging of failed bot logins to LOG_MISC to improve visibility.
    It can also affect users logging in, so it does not belong to LOG_BOT only.
    Patch by: Robby

  - Fix SSL verification flags not working.
    Patch by: manuel

  - Improve CTCP CHAT IPv6 selection logic.
    Patch by: Geo / Found by: Geo, Robby, thommey

  - Set bounce-bans to default to 0 in the sourcecode, not just in the config.
    Patch by: speechles / Found by: Release_

  - Prevent msg commands from functioning without a password set.
    Patch by: Geo / Found by: elWanderino

  - Reduce TLS error noise if neither key nor cert is set.
    Patch by: thommey

  - Clarify that wait-split is in seconds, not minutes.
    Found by: SpiKe^^

  - Remove unnecessary Tcl_CreateInterp() prototype, it is in tcl.h.
  - Reintroduce closest match when matching masks broken by CIDR code.
    Maximum score for matching IPv4 and IPv6 is 32.
    Patch by: thommey

  - Provide some examples for bind pubm documentation in tcl-commands.
    Patch by: Geo

  - Correct the documentation of getudefs, improve tcl-commands.doc.
    Patch by: Geo / Found by: Domino

  - Complain if an SSL connection is specified in server connections, but
    SSL support was not compiled.
    Patch by: Geo / Found by: thommey

  - Add the Tcl function rfcequal which compares strings case-insensitively
    and with respect to RFC1459 character equality if rfc_compliant is 1.
    Patch by: thommey / Found by: Pixelz

  - Revert compression of +b, +e, +I to +beI when asking for MODEs.
    Unfortunately, MODE #chan +beI doesn't work on all IRCds.
    Patch by: thommey / Found by: knux

  - Document that you can trigger arbitrary events by Tcl scripts.
    This is an intended feature.
  - Make sure to always set evnt and log temporary variables in the
    global scope. This is not complete by any means, but fixes the most
    common binds triggered by Tcl scripts in a local scope.
    Patch by: thommey / Found by: Domino

  - Fix relative DEST= paths for make install.
    Patch by: thommey

  - Allow botmasters to add hosts to shared bots.
    Patch by: Geo

  - Alias PASSWORD to PASS in msg cmds
    Patch by: Geo

  - Add option to disable ident lookup
    Patch by: manuel

  - Fix init_channel logic/memory leak
    Patch by: Geo / Found by: Phiber2000

  - Prevent the user from installing into the source directory.
    Patch by: thommey / Found by: boubou

  - Remove unused HAVE_TCL defines.
  - Clean up the inline business by removing most of them, or changing
    them all to static inline.
  - Fix compilation with tcl.m4 again.
  - Fix Makefile
  - Fix compilation with tcl.m4
    Patch by: thommey

  - Fixed assoc module ability to work with local partyline channels.
    Patch by: Geo / Found by: mw

  - Update botname after +i/+x
    Patch by: Pixelz / Found by: Domino

  - Clarify SSL documentation, add error messages
    Patch by: Geo

  - Remove deprecated EMAIL and URL fields from tcl-commands.doc
    Patch by: Geo

  - Reset channel info on part/kick
    Patch by: Geo / Found by: multiple users

  - Fix duplicate array value in module API
    Patch by: Geo / Found by: IRC user

  - Reply properly to server-generated CTCPs
    Patch by: Geo / Found by: IRC user

  - Return -1 for idletime if user is not on channel
    Patch by: Geo

  - Fix failing alt hub links
    Patch by: Geo / Found by: Robby

  - Change user mode after adding a hostmask to a user
    Patch by: Geo, thommey / Found by: IRC user

  - Fix some compiler warnings
    Patch by: Tobbe

  - Incorporate tclConfig.sh into ./configure process
    Patch by: Geo

  - Throw error when writing to read-only variables in server module.
    Patch by: chrfle / Found by: thommey

  - Add a config warning to tell users they are in the source directory.
    Patch by: Pixelz

  - Fix description for share-unlinks in the config.
    Patch by: chrfle

  - Remove length limit of info line.
    Patch by: chrfle / Found by: Kiril

  - Fix stripcodes modifying the Tcl object in-place.
    Patch by: thommey / Found by: speechles

  - Only permanent owners can delete owners.
    Patch by: chrfle / Found by: pseudo

  - Add Tcl8.6 and /usr/lib/x86_64-linux-gnu to Tcl search paths.
  - Ran autotools.
    Patch by: Geo

  - Changed IRCnet's max-bans/max-modes to 64.
    Patch by: ente

  - Fix error messages of the Tcl commands (un)stick(exempt/invite).
  - Add an alias for (un)stickban to correspond to them.
    Found by: Domino / Patch by: thommey

  - Fix a potentially endless loop when looking up bot hostnames.
    Patch by: thommey / Found by: Kiril

  - We only support Tcl >= 8.2 now. Deal with it.
  - Remove servlimit variables, unused these days
    Patch by: guppy

  - New evnt bind type - preinit-server - to allow CAP implementation in Tcl
    Patch by: grawity

  - Better documentation of bind cron/time
  - New evnt bind type - fail-server - which triggers on failed connection
    attempts to a server.
  - Share flags documentation update
    Patch by: Geo

  - Master can no longer .-user another master.
    Found by: pseudo / Patch by: Geo

  - Correct and add missing flags for .help strip, [strip] and [stripcodes]
    Patch by: Robby

  - Fixed a typo in the html documentation.
    Found by: Johannes13 / Patch by: pseudo

  - Fixed the .match command help.
    Fixes Trac Bug #85 "dcc match command documentation"
    Found by: jack3 / Patch by: pseudo

  - Against all odds we survived unixtime 999999999.
    Patch by: thommey / Found by: Robby

  - Fix a special char issue in dccwhois.tcl
    Patch by: thommey / Found by: dupondje

  - Make sure match_cidr returns NOMATCH if address families mismatch.
    Patch by: Robby

  - Fix match_cidr to always return MATCH if the prefix is 0.
    Patch by: thommey / Found by: Robby

  - Export the tcl_result* functions to modules. They're required because
    access to interp->result will be removed from Tcl.
    Patch by: thommey / Found by: Nocty

  - Clarify documentation of mask matching in bind notc.
    Patch by: Pixelz

  - Added a [stripcodes] flag to remove mIRC's italics (ascii 29).
  - Refactored code to clarify 'o' means "ordinary".
    Patch by: thommey / Found by: speechles

  - Added a [stripcodes] flag to remove mIRC's CTRL+o (ascii 15) which
    terminates all bold, underline, color. Also added * to strip everything.
    Patch by: thommey / Found by: SpiKe, ealexp

  - Partially revert changes to vwait/update. They are back to only
    processing Tcl events for now (fileevent/after) as handling eggdrop
    events turned out to require careful examination of reentrance issues.
    Patch by: thommey

  - Call Tcl's bgerror on Eggdrop background errors. This allows custom
    code to react to errors (and output full $::errorInfo, for example).
    Patch by: thommey

  - Remove wrong truncation of ERR_YOUREBANNEDCREEP output to console.
    Found by: Edelstahl / Patch by: thommey

  - Fixed the format specifier for the Tcl [traffic] command.
    Found by: Vertigo / Patch by: thommey

  - Added missing read trace flag to the nick-len variable trace after
    being unset to make the trace be removed properly on unload.
    Found by: Dopsy / Patch by: pseudo

  - Fixed a bug in the mainloop for Tcl threads which is now
    also being used as vwait/update recursion mainloop.
    Patch by: thommey

  - Ran autotools.
  - Work around Tcl8.5.10 bug 3371644 (strings starting with # could crash
    in Tcl_ConvertElement()). TCL_DONT_QUOTE_HASH can be used to work
    around it, as long as the string is not passed to Tcl_Eval().
    Found by: Austin
  - Use the autoconf macros AC_LANG_PROGRAM/AC_LANG_SOURCE for sourcecode
    to avoid warnings in autoconf >= 2.68.
    Patch by: thommey

  - Make sure to account for null termination when using Tcl_ScanElement
    to generate a string representation of a list using Tcl_ConvertElement.
    A behavioural change in Tcl8.5.10 revealed this bug.
    Found by: various / Patch by: thommey

  - Moved variable declarations to conform to C89 (beginning of blocks only).
    Found by: Anon-e-mouse / Patch by: thommey

  - Documented a .+ban/+exempt/+invite feature allowing to make the hostmask
    sticky by prefixing the comment with '*'.
    Found by: Robby / Patch by: pseudo

  - script listen sockets with the pub flag no longer perform ident lookups
    Found by: FireEgl / Patch by: thommey

  - Fixed a bug with connecting to numeric addresses when compiled with
    --disable-ipv6, reintroduced with a recent sync between branches.
    Found by: skydrome / Patch by: pseudo

  - Fixed statuslog documentation.
    Found by: ziplock / Patch by: pseudo

  - Fixed a bug with [channel get] returning types instead of values for
    udefs.
    Found by: Robby / Patch by: pseudo

  - Check for pending data on SSL sockets even when select() reports the
    descriptor's not readable.
  - Allow moving write buffers for SSL sockets.
    Patch by: pseudo

  - Added missing message for incoming telnet connections.
    Found by: Robby / Patch by: pseudo

  - Changed the prototype in module.h for check_tcl_event
  - bind evnt return value now ignored for non-signal events as documented
    Found by: Robby / Patch by: thommey

  - Reran autotools
  - Clarified --with-tcl* usage in configure and mentioned tcl-dev packages.
  - Fixed some section numbering in doc/COMPILE-GUIDE.
    Patch by: thommey

  - Added a little hack to send starttls before password exchange during the
    initial handshake.
    Patch by: pseudo

  - Fixed a problem with sharing causing starttls to fail.
    Found by: DarkReap1
  - Moved STARTTLS early in the bot link process and synchronized the
    handshake.
  - Made it possible for ssl handshakes to complete even without data to be
    sent on the channel.
  - Fixed an ancient bug resulting in sending uninitialized strings when
    sharing bot addresses.
  - Enabled (user)file sending over ssl.
    Patch by: pseudo

  - Fixed a problem with resolving hostnames when compiled with IPv6 disabled.
  - Made server.mod report connection failures properly.
    Found by: Arkadietz / Patch by: pseudo

  - Fixed getudef() to return intptr_t instead of int to prevent crashes on
    64-bit systems.
    Found by: izy` / Patch by: pseudo

  - Fixed a bug in (u)timers which could lead to invalid memory access.
    Found by: DarkReap1 / Patch by: thommey

  - Made it possible to specify ssl independently for telnet and user ports
    when modifying bot addresses.
  - Changed the syntax of .chaddr and .+bot to use space as a port separator
    instead of ':'.
  - Changed the syntax of server list entries to enclose IPv6 addresses in
    square brackets, instead of using a comma to separate the port.
    Patch by: pseudo

  - Fixed dcc_telnet_pass() to not use a constant string with fingerprint
    authentication, because strip_telnet() may attempt to write to it later.
    Found by: grawity / Patch by: pseudo

  - Modified tcl_channel_get to return a flat list of all channel settings
    and their values when called without a setting argument.
  - Added two new Tcl commands: [chansettype] returning setting types and
    [getudefs] listing user defined channel settings.
    Patch by: pseudo

  - Added optional count argument to Tcl timer and utimer to allow them run
    more than once.
    Patch by: pseudo

  - Renamed the vhost Tcl variable to vhost4 as it is in the documentation.
    Patch by: pseudo

  - Removed -mwin32 on Windows. It's no longer necessary and causes problems
    with Cygwin 1.7.
    Patch by: Kirben, pseudo

  - Removed few wire.mod leftovers. Removed IRC_FUNKICK.
    Patch by: pseudo

  - Performed some cleanup. Removed some obsolete config aliases.
  - Added missing parts of the documentation. Updated news and features
    for 1.8.
    Patch by: pseudo

  - Added -lcrypto when probing for -lssl in --with-ssllib
    Patch by: pseudo

  - Removed the never-give-up, sort-users and kick-fun/ban-fun variables.
    Sorting users shouldn't be a challenge for CPUs nowadays. The rest are
    rarely used and can be scripted.
    Patch by: guppy

  - Removed wire.mod and all references to it. Botnet and partyline encryption
    are now available using ssl.
    Patch by: guppy

  - Modified SIGQUIT handler to restart the bot by default.
  - Added support for evnt bind procs to cancel default signal actions.
  - Removed the die-on-sighup and die-on-sigterm variables.
  - Added a new bind type DIE triggered before a clean shutdown.
  - Changed the exit status on clean shutdown to 0.
    Patch by: pseudo

  - Clarified the OpenSSL version requirements.
  - Rewrote open_telnet() to make it more useful.
  - Replaced some calls to open_telnet_raw() with open_telnet().
    Patch by: pseudo

  - Added few autoconf checks for ssl.
  - Added tls to tcl_status()
    Patch by: pseudo

  - Added full SSL support including Tcl commands.
  - Added support for certificate authentication.
  - Added support for botnet and partyline encryption using ssl.
  - Documented the new features and commands.
  - Fixed add_server() problems with IPv6 addresses in the server list.
    Patch by: pseudo

  - Fixed dns.mod on QNX6/Mac OS X/Solaris
  - Rewrote dns.mod's autoconf checks to detect the resolver library properly
    on Darwin/Solaris.
  - Added -lsocket to the list of libraries, searched for res_* functions, in
    order to support QNX6.
    Patch by: pseudo

  - Altered the permission check on the pls/mns ban/exempt/invite commands
    from USER_MASTER to USER_OP to allow global operators to set global bans.
    Patch by: pjb

  - Removed the unrecognized options warning when configuring modules.
  - Modified -v output and .status display configure options.
    Patch by: pseudo

  - Added the process and parent pids to .status output. Increased the
    precision of cpu time reporting.
  - Added a new Tcl command 'status' to provide access to cpu/memory/cache
    information now and some more in the future.
    Patch by: pseudo

  - Fixed some problems with IPv6 autodetection and system headers.
    Patch by: pseudo

  - Made some corrections to the contributors list, removed a duplicate entry.
    Patch by: pseudo

  - Fixed bind cron html documentation to be in sync with non-html one.
    Found by: 64MAAMVDH / Patch by: thommey

  - Replaced most dns.mod preprocessor definitions with config variables.
  - Added support for user-specified dns servers and non-standard ports.
    This is most important for Cygwin 1.7, where the dns server list won't
    get initialized under some common conditions.
  - Added a trace to the new variable dns-servers, allowing scripts to get
    or set the current dns server list.
  - Added the servers list to the dns module information displayed by
    .status all
    Patch by: pseudo

  - Fixed a bug in setsockname() making it fail with IPv6 enabled due to a
    variable not being set.
    Found by: afterlife / Patch by: pseudo

  - Fix env(TZ) config setting to not contain a space. The space is just
    inserted in POSIX documentation to clarify, it must not be there.
    Found by: Digdilem / Patch by: thommey

  - Made dcc_telnet_new() allow non-latin characters in new handles like
    other handle validation functions.
    Patch by: pseudo

  - Modified src/compat/ replacements of gethostbyname2() and inet_ntop()
    to not compile when IPv6 is disabled.
  - Added a missing header preventing gethostbyname2() from compiling on
    FreeBSD.
  - Fixed few lines with wrong indentation.
    Patch by: pseudo

  - Reran autotools.
  - Added detection of Tcl_NotifierProcs members to ensure the notifier can
    be replaced. Fixes compilation against Tcl 8.2 and 8.3.
    Found by: AlIt0 / Patch by: thommey

  - Added full IPv6 support. New patch, nothing in common with older ones.
  - Changed a lot of functions and variables without breaking scripting
    compatibility. The list of changes is too long to include here.
    Patch by: pseudo

  - Updated documentation to reference 1.8 instead of 1.6.
  - Changed module dependencies to 1.8.
  - Changed default handlen to 32.
  - Changed default make type to 'debug' as it should be in CVS builds.
    Patch by: pseudo

  - Ran misc/runautotools for 1.8.0.
    Patch by: pseudo

  - Ran misc/newversion for 1.8.0.
    Patch by: pseudo

  - initial commit of old 1.6.20 source
    Commit by: simple

  # 1.8 tree started on July 26, 2010
